(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{399:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=h(n(47)),a=h(n(844)),s=n(561),l=h(n(837)),u=d(n(735)),c=d(n(730)),p=h(n(695)),f=h(n(694));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"render",value:function(){var e=this,t=(0,s.connect)(function(e){return e},o({},u,c))(f.default);return i.default.createElement(a.default,{render:function(n,r){return i.default.createElement(s.Provider,{store:l.default},i.default.createElement(t,o({isFullscreen:n,localStorage:p.default,toggleFullscreen:r},e.props)))}})}}]),t}();t.default=m},403:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transformAnnotationView=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.getRectFromCoords=function(e){var t=e.map(function(e){return e[0]}),n=e.map(function(e){return e[1]});return{left:(0,a.default)(t),top:(0,a.default)(n),right:(0,s.default)(t),bottom:(0,s.default)(n)}},t.floatCoordinatesToStringPoint=function(e){return e.join(",")},t.roundCoordinatePoint=p,t.pickX=function(e){return e[0]},t.pickY=function(e){return e[1]},t.concat=function(e,t){return e.concat(t)},t.applyScale=function(e){return function(t){return t*e}},t.applyTranslate=function(e,t){return function(n){return[n[0]+e,n[1]+t]}},t.applyTranslatePoint=function(e,t){return function(n){return{x:n.x+e,y:n.y+t,width:n.width,opacity:n.opacity}}},t.translateYAxis=f,t.stringPointToFloatCoordinates=function(e){return e.split(",").map(function(e){return parseFloat(e)})},t.translateAnnotation=function(e,t,n){var a=(0,i.default)(e);if(e.rect){var s=r(e.rect,2),l=r(s[0],2),u=l[0],c=l[1],p=r(s[1],2),f=p[0],d=p[1],h=[[u+t,c+n],[f+t,d+n]];a.rect=h}e.coords&&(a.coords=a.coords.map(function(e){return e.map(function(e){return[e[0]+t,e[1]+n]})}));e.inklist&&e.inklist.gestures&&(a.inklist.gestures=e.inklist.gestures.map(function(e){return e.map(function(e){return o({},e,{x:e.x+t,y:e.y+n})})}));return a},t.transformAnnotationSave=function(e,t,n){var r=(0,i.default)(n);n.rect&&(r.rect=r.rect.map(function(n){return[p(n[0]/t),p(f(e,1,n[1])/t)]}));n.coords&&(r.coords=r.coords.map(function(n){return n.map(function(n){return[p(n[0]/t),p(f(e,1,n[1])/t)]})}));n.inklist&&n.inklist.gestures&&(r.inklist.gestures=r.inklist.gestures.map(function(n){return n.map(function(n){return o({},n,{x:p(n.x/t),y:p(f(e,1,n.y)/t)})})}));return r},t.getDimensions=function(e){var t=e.inklist&&e.inklist.gestures||c,n=null,o=null,r=null,i=null,a=!0,s=!1,l=void 0;try{for(var u,p=t[Symbol.iterator]();!(a=(u=p.next()).done);a=!0){var f=u.value,d=!0,h=!1,m=void 0;try{for(var g,v=(f||c)[Symbol.iterator]();!(d=(g=v.next()).done);d=!0){var y=g.value;(null===n||y[0]<n)&&(n=y[0]),(null===o||y[1]<o)&&(o=y[1]),(null===r||y[0]>r)&&(r=y[0]),(null===i||y[1]>i)&&(i=y[1])}}catch(e){h=!0,m=e}finally{try{!d&&v.return&&v.return()}finally{if(h)throw m}}}}catch(e){s=!0,l=e}finally{try{!a&&p.return&&p.return()}finally{if(s)throw l}}return{left:n,top:o,right:r,bottom:i}},t.multiplyPath=function(e){for(var t=[],n=0;n<e.length;n+=1)if(t[2*n]=e[n],e.length>n+1){var o=Object.assign({},e[n+1]);o.x=(e[n].x+e[n+1].x)/2,o.y=(e[n].y+e[n+1].y)/2,"number"==typeof e[n].opacity&&"number"==typeof e[n+1].opacity&&(o.opacity=(e[n].opacity+e[n+1].opacity)/2),"number"==typeof e[n].width&&"number"==typeof e[n+1].width&&(o.width=(e[n].width+e[n+1].width)/2),t[2*n+1]=o}return t},t.horizontallyConnectRects=function(e,t){var n=!1;return e.forEach(function(e){var o=e.right>=t.left-10&&e.left<t.left&&e.right<t.right,r=t.right>=e.left-10&&t.left<e.left&&t.right<e.right,i=e.top<=t.top&&e.bottom>=t.bottom;i&&o?(e.right=t.right,n=!0):i&&r&&(e.left=t.left,n=!0)}),n?e:e.concat(t)},t.areRectanglesIntersecting=d,t.intersectsWith=h,t.intersectsWithSome=function(e){return function(t){return e.some(function(e){return d(e,t)})}},t.isInsideRectangle=m,t.removeNeedlessRectOverlapping=function(e,t){if(!e.length)return[t];var n=Object.assign({},t),o=void 0,r=0;do{o=!1,r++;var i=!0,a=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;if(d(c,t)){if(m(t,c))return e;var p=c.right>t.right&&c.left<t.left,f=c.right<t.right&&c.left>t.left,h=t.top<c.top&&t.bottom>c.top&&t.bottom<c.bottom,g=t.top>c.top&&t.top<c.bottom&&t.bottom>c.bottom;h?p?(o=!0,n.bottom=c.top):f&&(o=!0,c.top=n.bottom):g&&(p?(o=!0,n.top=c.bottom):f&&(o=!0,c.bottom=n.top))}}}catch(e){a=!0,s=e}finally{try{!i&&u.return&&u.return()}finally{if(a)throw s}}}while(o&&r<100);100===r&&console.warn("removeNeedlessClientRectOverlapping had too many iterations");return e.concat(n)},t.mergeRectangles=g,t.getRectangleIntersection=v,t.getRectangleIntersections=function(e){return function(t,n){return t.concat(e.filter(h(n)).map(function(e){return v(e,n)}))}},t.mergeManyRectangles=function(e,t){if(!e.length)return e.concat(t);var n=[];return e.forEach(function(e){n.push.apply(n,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(g(t,e)))}),e.concat(n)},t.withoutEmptyRects=function(e){return e.top!==e.bottom&&e.left!==e.right},t.getRelatedTargetOrEquivalent=function(e){return e.explicitOriginalTarget||e.relatedTarget||e.rangeParent||document.activeElement},t.getTranslatedCordinates=function(e){var t=e.pageX,n=e.pageY,o=e.originalPageX,r=e.originalPageY,i=e.viewportHeight,a=e.viewportWidth,s=e.x,l=e.y,u=e.height,c=e.width,p=s+(t-o),f=l+(n-r);return{translateY:f<0?-l:f>i-u?i-u-l:n-r,translateX:p<0?-s:p>a-c?a-c-s:t-o}},t.getCommentCreateButtonVisibility=function(e,t,n,o,r){return"freetext"!==r&&!1===e&&t&&!1===n&&o},t.getCommentLineVisibility=function(e,t,n,o,r,i){return!1===e&&(n||t||o&&(r||i))},t.scrollIntoView=function(e){-1===navigator.appVersion.indexOf("Trident")&&(0,l.default)(e,!0,{easing:"easeIn"})};var i=u(n(733)),a=u(n(521)),s=u(n(519)),l=u(n(560));function u(e){return e&&e.__esModule?e:{default:e}}var c=[];function p(e){return Math.round(100*e)/100}function f(e,t,n){return e-t*n}t.transformAnnotationView=function(e){var t=e.height,n=e.scale;return function(e){var r=(0,i.default)(e);return e.rect&&(r.rect=r.rect.map(function(e){return[e[0]*n,f(t,n,e[1])]})),e.coords&&(r.coords=r.coords.map(function(e){return e.map(function(e){return[e[0]*n,f(t,n,e[1])]})})),e.inklist&&e.inklist.gestures&&(r.inklist.gestures=r.inklist.gestures.map(function(e){return e.map(function(e){return o({},e,{x:e.x*n,y:f(t,n,e.y)})})})),r}};function d(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function h(e){return function(t){return d(e,t)}}function m(e,t){return e.left>=t.left&&e.top>=t.top&&e.right<=t.right&&e.bottom<=t.bottom}function g(e,t){var n=[],o=void 0,r=void 0,i=void 0,a=void 0,s=void 0,l=void 0,u=Math.min(e.top,t.top),c=Math.max(e.bottom,t.bottom);return e.left<t.left?(o=e.left,r=t.left,l=e):(o=t.left,r=e.left,l=t),e.right<t.right?(i=e.right,a=t.right,s=t):(i=t.right,a=e.right,s=e),o!==r&&n.push({left:o,right:r,top:l.top,bottom:l.bottom}),r!==i&&n.push({left:r,right:i,top:u,bottom:c}),i!==a&&n.push({left:i,right:a,top:s.top,bottom:s.bottom}),n}function v(e,t){return{left:Math.max(e.left,t.left),top:Math.max(e.top,t.top),right:Math.min(e.right,t.right),bottom:Math.min(e.bottom,t.bottom)}}},406:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitRootAnnotationsAndReplies=t.isBelowOriginalTop=t.isOriginalTopAbove=t.hasReplyIn=t.sortBy=t.isNot=t.pipe=void 0;var o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.compareRectY=function(e,t){return e.rect[0][1]>t.rect[0][1]?-1:1},t.getMostVisiblePage=function(e){var t="0",n=0;for(var o in e)e.hasOwnProperty(o)&&e[o]>n&&(t=o,n=e[o]);return parseInt(t,10)},t.getPageWidthAfterScaling=function(e,t){return Math.trunc(t)+(e?r.COMMENT_REGION_WIDTH:0)},t.getStringValues=function(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){var o=e[n];t.push(o)}return t};var r=n(138),i=l(n(686)),a=l(n(666)),s=l(n(493));function l(e){return e&&e.__esModule?e:{default:e}}t.pipe=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return(0,a.default)([].concat(n))(e)},t.isNot=function(e){return function(t){return t!==e}},t.sortBy=(0,i.default)(function(e,t){return(0,s.default)(t,e)});t.hasReplyIn=function(e){return function(t){return e.some(function(e){return e.inreplyto===t.id})}},t.isOriginalTopAbove=function(e){return function(t){return parseFloat(t.dataset.originalTop)<e}},t.isBelowOriginalTop=function(e){return function(t){return parseFloat(t.dataset.originalTop)>e}},t.splitRootAnnotationsAndReplies=function(e,t){var n=o(e,2),r=n[0],i=n[1];return t.inreplyto?[r.concat(t),i]:[r,i.concat(t)]}},407:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(637);var r=p(n(51)),i=p(n(47)),a=p(n(405)),s=p(n(635)),l=p(n(633)),u=p(n(631)),c=n(138);function p(e){return e&&e.__esModule?e:{default:e}}var f={point:c.POINT_COLORS,area:c.AREA_COLORS,ink:c.INK_COLORS,strikeout:c.STRIKEOUT_COLORS,highlight:c.HIGHLIGHT_COLORS,freetext:c.FREETEXT_COLORS},d={freetext:c.FREETEXT_BACKGROUND_COLORS},h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.PureComponent),o(t,[{key:"render",value:function(){var e=this,t="freetext"===this.props.controlMode,n="ink"===this.props.controlMode,o=(0,r.default)("Background"),a=(0,r.default)("Size"),p=(0,r.default)("Line"),h=document.querySelector(".Pages"),m=h&&h.offsetWidth-h.clientWidth,g=m>0?m:"10px",v=f[this.props.controlMode]&&Object.values(f[this.props.controlMode]).map(function(t){return i.default.createElement(s.default,{key:t,colorValue:t,isSelected:e.props.currentColor===t,onCurrentColorChange:e.props.onCurrentColorChange,isBackground:!1})}),y=d[this.props.controlMode]&&Object.values(d[this.props.controlMode]).map(function(t){return i.default.createElement(s.default,{key:t,colorValue:t,isSelected:e.props.currentBgColor===t,onCurrentColorChange:e.props.onCurrentBgColorChange,isBackground:!0})}),b=Object.keys(c.FONTS_BY_SIZE).map(function(t){var n=c.FONTS_BY_SIZE[t];return i.default.createElement(l.default,{key:t,sizeValue:t,font:n,isSelected:n===e.props.currentFont,onCurrentTextSizeChange:e.props.onCurrentTextSizeChange})}),w=Object.keys(c.INK_STROKE_WIDTH_OPTIONS).map(function(t){var n=c.INK_STROKE_WIDTH_OPTIONS[t];return i.default.createElement(u.default,{key:t,sizeValue:t,width:n,isSelected:n===e.props.currentInkWidth,onCurrentInkStrokeWidthChange:e.props.onCurrentInkStrokeWidthChange})});return c.ANNOTATION_TYPES.includes(this.props.controlMode)&&v&&v.length&&i.default.createElement("div",{className:"SecondaryControls",style:{right:g}},i.default.createElement("div",{className:"SecondaryControls-buttons"},v),t&&i.default.createElement("div",{className:"SecondaryControls-annotation"},i.default.createElement("div",{className:"SecondaryControls-label"},o),i.default.createElement("div",{className:"SecondaryControls-buttons"},y),i.default.createElement("div",{className:"SecondaryControls-label"},a),i.default.createElement("div",{className:"SecondaryControls-buttons",style:{display:"flex"}},b)),n&&i.default.createElement("div",{className:"SecondaryControls-annotation"},i.default.createElement("div",{className:"SecondaryControls-label"},p),i.default.createElement("div",{className:"SecondaryControls-buttons",style:{display:"flex"}},w)))}}]),t}();t.default=h,h.propTypes={controlMode:a.default.string,currentBgColor:a.default.string,currentColor:a.default.string,currentFont:a.default.string,onCurrentBgColorChange:a.default.func,onCurrentColorChange:a.default.func,onCurrentInkStrokeWidthChange:a.default.func,onCurrentTextSizeChange:a.default.func}},418:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(612);var a=v(n(47)),s=v(n(400)),l=v(n(51)),u=v(n(420)),c=v(n(610)),p=v(n(607)),f=v(n(604)),d=v(n(479)),h=v(n(445)),m=n(403),g=n(138);function v(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.moveDebounced=(0,u.default)(function(){!n.props.onMoveAnnotation||0===n.state.translateX&&0===n.state.translateY||n.props.onMoveAnnotation(n.props.annotation,n.state.translateX,n.state.translateY)},500),n.setSvg=function(e){e instanceof SVGElement&&(n.svg=e)},n.setDivRef=function(e){e instanceof HTMLElement&&(n.div=e)},n.setSvgContainer=function(e){e instanceof HTMLElement&&(n.svgContainer=e)},n.setCommentState=function(e){n.props.onIsCommentingChange({isCommenting:e}),n.setState({isCommenting:e})},n.move=function(e,t){if(!1!==n.props.isMovable){var o=n.props.x+n.state.translateX+e,r=n.props.y+n.state.translateY+t,i=o>=0&&o+n.props.width<n.props.viewportWidth,a=r>=0&&r+n.props.height<n.props.viewportHeight;n.setState({translateX:i?n.state.translateX+e:n.state.translateX,translateY:a?n.state.translateY+t:n.state.translateY}),n.moveDebounced()}},n.handleMouseEnter=function(e){n.props.onHoverAnnotation(n.props.id)},n.handleMouseLeave=function(e){n.props.onHoverAnnotation(null)},n.handleFocusOut=function(e){var t=(0,m.getRelatedTargetOrEquivalent)(e);n.div instanceof HTMLElement&&(n.div.contains(t)||setTimeout(function(){var t=(0,m.getRelatedTargetOrEquivalent)(e),o=n.div instanceof HTMLElement&&n.div.contains(t);if(!o){var r=n.div instanceof HTMLElement&&n.div.contains(document.activeElement);t===n.div||document.activeElement===n.div||o||r||(n.setState({isAnnotationFocused:!1,isCommenting:!1}),n.props.onDeselectAnnotation(n.props.id))}},0))},n.handleClick=function(e){n.setState({isAnnotationFocused:!0}),n.props.onSelectAnnotation(n.props.id)},n.handleAnnotationFocus=function(e){n.setState({isAnnotationFocused:!0}),n.props.onSelectAnnotation(n.props.id),setTimeout(function(){if(n.div instanceof HTMLElement){var e=n.div;setTimeout(function(){var t=e.querySelector(".CommentGroup--active");t instanceof HTMLElement&&(0,m.scrollIntoView)(t)},250)}},5)},n.handleSvgContainerFocus=function(e){n.setState({isSvgContainerFocused:!0})},n.handleSvgContainerBlur=function(e){n.setState({isSvgContainerFocused:!1}),n.props.onTextSelectionEnable()},n.handleCommentsContainerFocus=function(e){n.setState({isCommentsContainerFocused:!0})},n.handleCommentsContainerBlur=function(e){n.setState({isCommentsContainerFocused:!1})},n.handleCheckmarkClick=function(e){n.svgContainer instanceof HTMLElement&&n.svgContainer.focus(),n.handleAnnotationSave(e)},n.handleAnnotationSave=function(e){e instanceof Event&&e.stopPropagation(),"function"==typeof n.props.onMultiStrokeAnnotation&&n.props.onMultiStrokeAnnotation(null),n.props.onCreateAnnotation(n.props.viewportHeight,n.props.viewportScale,n.props.annotation)},n.handleAnnotationDelete=function(){n.props.canEdit&&n.setState({isDeletePopupVisible:!0})},n.handleDeletePopupConfirm=function(e){n.setState({isDeletePopupVisible:!1}),e.preventDefault(),e.stopPropagation(),n.props.canEdit&&(n.props.onMultiStrokeAnnotation&&n.props.onMultiStrokeAnnotation(null),n.props.onTextSelectionEnable(),n.props.onDeleteAnnotation(n.props.pageNumber,n.props.id))},n.handleDeletePopupCancel=function(e){n.setState({isDeletePopupVisible:!1}),n.div instanceof HTMLElement&&(n.div.focus(),n.props.onHoverAnnotation(null))},n.handleCommentDelete=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n.setState(function(e){return{isCommenting:!1}}),n.props.onDeleteAnnotation(n.props.pageNumber,e,t)},n.handleMouseDown=function(e){var t=(0,m.getRelatedTargetOrEquivalent)(e),o=n.div instanceof HTMLElement&&n.div.contains(t),r=n.buttonDiv&&n.buttonDiv.contains(t);!1===n.props.isMovable||o&&r||(n.props.onTextSelectionDisable(),n.originalPageX=e.pageX,n.originalPageY=e.pageY,n.setState({isAnnotationFocused:!0,isMouseDown:!0,isSelected:!0}),document.addEventListener("mouseup",n.handleDocumentMouseUp),document.addEventListener("mousemove",n.handleDocumentMouseMove))},n.handleDocumentMouseMove=function(e){window.cancelAnimationFrame(n.moveRequest),n.moveRequest=window.requestAnimationFrame(n.__handleDocumentMouseMove.bind(n,e))},n.__handleDocumentMouseMove=function(e){if(!1!==n.state.isMouseDown&&!1!==n.props.canEdit){var t=(0,m.getTranslatedCordinates)({pageX:e.pageX,pageY:e.pageY,originalPageX:n.originalPageX,originalPageY:n.originalPageY,viewportHeight:n.props.viewportHeight,viewportWidth:n.props.viewportWidth,x:n.props.x,y:n.props.y,height:n.props.height,width:n.props.width}),o=t.translateX,r=t.translateY;!1===n.state.isDragging&&n.props.onDraggingStart(n.props.id),n.setState({translateX:o,translateY:r,isDragging:!0})}},n.handleDocumentMouseUp=function(){if(document.removeEventListener("mouseup",n.handleDocumentMouseUp),document.removeEventListener("mousemove",n.handleDocumentMouseMove),!1===n.state.isDragging)return n.setState({isMouseDown:!1}),void n.props.onDraggingEnd();n.props.onTextSelectionEnable(),n.state.isDragging&&(n.setState({isDragging:!1,isMouseDown:!1},function(){!n.props.onMoveAnnotation||0===n.state.translateX&&0===n.state.translateY||n.props.onMoveAnnotation(n.props.annotation,n.state.translateX,n.state.translateY)}),n.props.onDraggingEnd())},n.handleKeyDown=function(e){if(n.svg instanceof SVGElement){var t=n.svg;if(n.props.isMovable&&n.props.canEdit)switch(e.key){case"ArrowRight":return n.move(e.shiftKey?1:5,0),void e.preventDefault();case"ArrowLeft":return n.move(e.shiftKey?-1:-5,0),void e.preventDefault();case"ArrowUp":return n.move(0,e.shiftKey?-1:-5),void e.preventDefault();case"ArrowDown":return n.move(0,e.shiftKey?1:5),void e.preventDefault()}switch(e.key){case"Delete":case"Backspace":return void n.handleAnnotationDelete();case"Escape":t.blur()}}},n.stopPropagation=function(e){e.stopPropagation()},n.handleCreateComment=function(){n.props.multiStrokeAnnotationId&&n.handleAnnotationSave(),n.setCommentState(!0)},n.state={hasError:!1,isAnnotationFocused:!1,isCommenting:n.props.isSelected&&g.ANNOTATION_TYPES_WITH_AUTO_EXPANDED_COMMENT.includes(n.props.annotation.type),isCommentsContainerFocused:n.props.isSelected&&g.ANNOTATION_TYPES_WITH_AUTO_EXPANDED_COMMENT.includes(n.props.annotation.type),isDeletePopupVisible:!1,isDragging:!1,isMouseDown:!1,isSelected:!1,isSvgContainerFocused:!1,translateX:0,translateY:0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),i(t,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0},function(){console.error("Error caught in Annotation",{error:e,info:t})})}},{key:"componentDidMount",value:function(){this.div instanceof HTMLElement&&this.div.addEventListener("focusout",this.handleFocusOut,!0)}},{key:"componentWillUnmount",value:function(){this.div instanceof HTMLElement&&this.div.removeEventListener("focusout",this.handleFocusOut,!0)}},{key:"componentWillReceiveProps",value:function(e){this.props.x===e.x&&this.props.y===e.y||this.setState({translateX:0,translateY:0})}},{key:"componentDidUpdate",value:function(e,t){t.isCommenting!==this.state.isCommenting&&!1===this.state.isCommenting&&this.props.onHoverAnnotation(null)}},{key:"render",value:function(){var e=this,t=this.props.annotation,n=(0,s.default)("Annotation-svg",this.props.className,{"Annotation-svg--focused":this.state.isAnnotationFocused,"is-dragging":this.state.isDragging});if(!(t.rect instanceof Array))throw new Error("Annotation is missing rect property");var i=t.rect.map(function(t){var n=r(t,2),o=n[0],i=n[1];return[o+e.state.translateX,i+e.state.translateY]}),u=this.props.x+this.state.translateX-this.props.selectionBoxPadding,g=this.props.y+this.state.translateY-this.props.selectionBoxPadding,v=this.props.width+2*this.props.selectionBoxPadding,y=this.props.height+2*this.props.selectionBoxPadding,b=this.props.commentReplies&&this.props.commentReplies.length>0,w=window.location.hash.includes("rootauthorship")&&b&&t.user_id!==this.props.commentReplies[0].user_id,E=!1===this.state.isCommentsContainerFocused&&(!b||this.props.canEdit||w),C=(0,s.default)("Annotation",{"Annotation--selected":this.props.isSelected,"Annotation--error":this.state.hasError,"Annotation--is-dragging":this.state.isDragging});if(this.state.hasError)return a.default.createElement("div",{className:"Annotation--internal",style:{backgroundColor:"red",color:"white",fontSize:"0.7rem",height:y,left:u,position:"absolute",top:g,width:v}},(0,l.default)("Error rendering annotation"));var _=!!this.props.commentReplies&&"object"==o(this.props.commentReplies)&&this.props.commentReplies.length>0,A=window.location.hash.includes("rootauthorship")&&this.props.isAnnotatable||this.props.canEdit,O=(0,m.getCommentCreateButtonVisibility)(_,A,this.state.isCommenting,this.props.isSelected,t.type),S=(0,m.getCommentLineVisibility)(this.state.isDragging,O,this.state.isCommenting,_,this.props.isHovered,this.props.isSelected),x=this.props.isSelected&&this.props.canEdit&&this.props.secondaryControls,T=!1===O&&"freetext"!==t.type,P=this.props.annotation.contents?(0,l.default)("Are you sure you want to delete this annotation and all its related comments and replies?"):(0,l.default)("Are you sure you want to delete this annotation?");return a.default.createElement("div",{className:C,id:"Annotation-"+this.props.id,onClick:this.handleClick,onFocus:this.handleAnnotationFocus,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,ref:this.setDivRef,tabIndex:-1},this.state.isDeletePopupVisible&&a.default.createElement(h.default,{message:P,onCancel:this.handleDeletePopupCancel,onConfirm:this.handleDeletePopupConfirm,severity:"warning"}),a.default.createElement("div",{className:"Annotation--internal",style:{left:u,top:g,width:v,height:y,position:"absolute"}},a.default.createElement("div",{className:"Annotation-svg-container",onBlur:this.handleSvgContainerBlur,onFocus:this.handleSvgContainerFocus,onKeyDown:this.handleKeyDown,onKeyUp:this.handleDocumentMouseUp,onMouseDown:this.handleMouseDown,ref:this.setSvgContainer,tabIndex:"0"},a.default.createElement("svg",{"aria-selected":this.props.isSelected,"aria-label":this.props.title,className:n,ref:this.setSvg,style:{width:v,height:y}},this.props.render(this.state.isSvgContainerFocused))),this.props.isSelected&&E&&a.default.createElement("div",{className:"AnnotationToolbar-container"},a.default.createElement(d.default,{authorName:t.user_name,canEdit:this.props.canEdit,displayAuthorName:!1===_&&!1===this.props.canEdit||w,displayCreateAnnotation:this.props.multiStrokeAnnotationId===t.id,onCreateAnnotation:this.handleCheckmarkClick,onDeleteAnnotation:this.handleAnnotationDelete}))),S&&a.default.createElement(p.default,{key:t.id,annotationId:t.id,isSelected:this.props.isSelected,onSelectAnnotation:this.props.onSelectAnnotation,rect:t.rect,viewportWidth:this.props.viewportWidth,widthExtension:O?16:24}),a.default.createElement(c.default,{annotationId:t.id,isVisible:O,left:this.props.viewportWidth,top:t.rect[1][1]+this.state.translateY,onCreateComment:this.handleCreateComment}),T&&a.default.createElement(f.default,{annotationId:this.props.id||t.id,annotationType:t.type,canEdit:this.props.canEdit,commentIcon:this.props.commentIcon,commentReplies:this.props.commentReplies,contents:t.contents,isAnnotatable:this.props.isAnnotatable,isCommenting:this.state.isCommenting,isHovered:this.props.isHovered,isSelected:this.props.isSelected,onCommentBlur:this.handleCommentsContainerBlur,onCommentFocus:this.handleCommentsContainerFocus,onCommentSave:this.props.onCommentSave,onDeleteAnnotation:this.handleCommentDelete,onSelectComment:this.setCommentState,pageHeight:this.props.pageHeight,rect:i,sessionUserObject:this.props.sessionUserObject,user_id:t.user_id,user_name:t.user_name,viewportHeight:this.props.viewportHeight,viewportScale:this.props.viewportScale,viewportWidth:this.props.viewportWidth}),x&&this.props.secondaryControls)}}]),t}();t.default=y},419:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.saveComment=function(e){var t=e.annotationId,n=e.annotationPayload,r=e.inreplyto,i=(e.rect,this.props.annotation),a=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.props.commentReplies),[i]).find(function(e){return e.id===t}),s=n.contents;return a?this.props.onUpdateAnnotation(this.props.viewportHeight,this.props.viewportScale,o({},a,n)):this.props.onCreateAnnotation(this.props.viewportHeight,this.props.viewportScale,{id:t,subject:"Comment",type:"commentReply",page:i.page,context:i.context,ctx_and_id:i.ctx_and_id,document_id:i.document_id,user_id:this.props.sessionUserObject.user_id,user_name:this.props.sessionUserObject.user_name,inreplyto:r,contents:s})}},443:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(47),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){var e=this.props.rect.right-this.props.rect.left,t=this.props.rect.bottom-this.props.rect.top;return a.default.createElement("rect",{x:this.props.rect.left,y:this.props.rect.top,width:e,height:t})}}]),t}();t.default=s},444:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(47),a=(o=i)&&o.__esModule?o:{default:o};n(589);var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){var e=this.props.isVisible?"#888":"none",t=window.location.hash.includes("resize")&&this.props.width>20&&this.props.height>20;return a.default.createElement("svg",{"aria-selected":this.props.isSelected,"aria-hidden":!0,className:"SelectionBox",style:{position:"absolute",width:this.props.width,height:this.props.height,zIndex:1}},a.default.createElement("g",null,a.default.createElement("rect",{className:"SelectionBox-rect",x:2,y:2,width:this.props.width-4,height:this.props.height-4,fillOpacity:"0",stroke:this.props.isVisible?"#bbb":"none",strokeDasharray:"3, 3",strokeWidth:1,strokeOpacity:"1"}),t&&a.default.createElement("g",null,a.default.createElement("rect",{className:"SelectionBox-resize SelectionBox-resize-top-left",style:{cursor:"nwse-resize"},x:0,y:0,fill:e,width:4,height:4}),a.default.createElement("rect",{className:"SelectionBox-resize SelectionBox-resize-top-right",style:{cursor:"nesw-resize"},x:this.props.width-4,y:0,fill:e,width:4,height:4}),a.default.createElement("rect",{className:"SelectionBox-resize SelectionBox-resize-bottom-right",style:{cursor:"nwse-resize"},x:this.props.width-4,y:this.props.height-4,fill:e,width:4,height:4}),a.default.createElement("rect",{className:"SelectionBox-resize SelectionBox-resize-bottom-left",style:{cursor:"nesw-resize"},x:0,y:this.props.height-4,fill:e,width:4,height:4}))))}}]),t}();t.default=s},445:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=l(n(47)),i=l(n(143)),a=l(n(51)),s=l(n(400));n(403);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(591);var c=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.handleKeyDown=function(e){"Escape"===e.key&&o.props.onCancel()},o.handleCancelKeyDown=function(e){"Tab"===e.key&&(e.preventDefault(),o.okButton.focus())},o.handleOkKeyDown=function(e){"Tab"===e.key&&(e.preventDefault(),o.cancelButton.focus())},o.setCancelButtonRef=function(e){o.cancelButton=e},o.setOkButtonRef=function(e){o.okButton=e},o.setDivRef=function(e){o.div=e},u(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.PureComponent),o(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.cancelButton.focus()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=(0,s.default)("GenericPopup","GenericPopup-"+this.props.severity),t=document.querySelector("#App");return i.default.createPortal(r.default.createElement("div",null,r.default.createElement("div",{style:{position:"fixed",height:"100%",width:"100%",top:"0"}}),r.default.createElement("div",{className:e,tabIndex:-1,ref:this.setDivRef},r.default.createElement("div",{style:{backgroundColor:"#FC5D13",width:"58px",display:"flex",alignItems:"center",justifyContent:"center"}},r.default.createElement("svg",{viewBox:"0 0 2000 2000",width:"20px",height:"20px",style:{margin:"0 auto"}},r.default.createElement("path",{d:"M960 790.588c-124.574 0-225.882-101.308-225.882-225.882S835.426 338.824 960 338.824s225.882 101.308 225.882 225.882S1084.574 790.588 960 790.588zm-169.412 677.647V903.53h338.824v564.706H790.588zM960 0C430.645 0 0 430.645 0 960s430.645 960 960 960 960-430.645 960-960S1489.355 0 960 0z",fill:"#ffffff",fillRule:"evenodd"}))),r.default.createElement("div",{style:{padding:"5px"}},r.default.createElement("p",{id:"GenericModal-message"},this.props.message),"function"==typeof this.props.onConfirm&&r.default.createElement("div",{style:{display:"flex"}},r.default.createElement("button",{id:"GenericPopup-cancel-button",className:"inst-button GenericPopup-button",onClick:this.props.onCancel,ref:this.setCancelButtonRef,"aria-label":(0,a.default)("Cancel"),"aria-describedby":"GenericModal-message",onKeyDown:this.handleCancelKeyDown},(0,a.default)("Cancel")),r.default.createElement("button",{id:"GenericPopup-confirm-button",className:"inst-button GenericPopup-button GenericPopup-confirm-button",onClick:this.props.onConfirm,ref:this.setOkButtonRef,"aria-label":(0,a.default)("Ok"),"aria-describedby":"GenericModal-message",onKeyDown:this.handleOkKeyDown},(0,a.default)("Ok")))))),t)}}]),t}();t.default=c},447:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(485);var i=s(n(47)),a=s(n(405));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleFocus=function(e){n.setState(function(e){return o({},e,{isFocused:!0})})},n.handleBlur=function(){n.setState(function(e){return o({},e,{isFocused:!1})})},n.handleMouseEnter=function(e){n.setState(function(e){return o({},e,{isHovered:!0})})},n.handleMouseLeave=function(){n.setState(function(e){return o({},e,{isHovered:!1})})},n.handleClick=function(e){n.props.onClick(),n.button instanceof HTMLElement&&n.button.focus()},n.setButtonRef=function(e){e instanceof HTMLElement&&(n.button=e)},n.state={isHovered:!1,isFocused:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.PureComponent),r(t,[{key:"render",value:function(){return i.default.createElement("button",{className:this.props.className,onClick:this.handleClick,onTouchStart:this.handleMouseEnter,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onFocus:this.handleFocus,onBlur:this.handleBlur,"aria-label":this.props.ariaLabel,title:this.props.title,ref:this.setButtonRef},this.props.children(this.state))}}]),t}();t.default=l,l.propTypes={title:a.default.string,ariaLabel:a.default.string,onClick:a.default.func,className:a.default.string}},477:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(47),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){return a.default.createElement("svg",{className:"Point",height:this.props.height,style:{color:"string"==typeof this.props.color?this.props.color:"#EE0612"},viewBox:"0 0 17 24",width:this.props.width,x:this.props.x,xmlns:"http://www.w3.org/2000/svg",y:this.props.y},a.default.createElement("path",{d:"M8.21 0C3.684 0 0 3.683 0 8.21c0 2.258 1.004 4.35 3.068 6.395 2.997 2.975 4.393 5.72 4.393 8.645V24h1.5v-.75c0-2.91 1.38-5.577 4.47-8.643 2.067-2.047 3.07-4.138 3.07-6.396C16.5 3.683 12.816 0 8.21 0",fill:"currentColor",fillRule:"evenodd"}))}}]),t}();t.default=s},478:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(47),s=(o=a)&&o.__esModule?o:{default:o};var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),i(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.rect[0]!==e.rect[0]||this.props.rect[1]!==e.rect[1]||this.props.rect[2]!==e.rect[2]||this.props.rect[3]!==e.rect[3]}},{key:"render",value:function(){var e=r(this.props.rect,4),t=r(e[0],2),n=t[0],o=t[1],i=r(e[1],2),a=i[0],l=i[1],u=r(e[2],2),c=(u[0],u[1]),p=r(e[3],2),f=(p[0],p[1]);return s.default.createElement("line",{x1:n,y1:(o+c)/2,x2:a,y2:(l+f)/2})}}]),t}();t.default=l},479:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=s(n(47)),i=s(n(51)),a=n(480);function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.stopPropagation=function(e){e.stopPropagation()},o.handleAnnotationSave=function(e){e.stopPropagation(),"function"==typeof o.props.onCreateAnnotation&&o.props.onCreateAnnotation(e)},o.handleAnnotationDelete=function(e){o.props.onDeleteAnnotation(e)},l(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.PureComponent),o(t,[{key:"render",value:function(){return r.default.createElement("div",{onTouchStart:this.stopPropagation,onTouchEnd:this.stopPropagation,onMouseDown:this.stopPropagation,onMouseUp:this.stopPropagation},r.default.createElement("div",{className:"AnnotationToolbar"},this.props.displayAuthorName&&r.default.createElement("div",{role:"tooltip",className:"AnnotationTooltip"},this.props.authorName),this.props.canEdit&&r.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",boxSizing:"border-box"}},!0===this.props.displayCreateAnnotation&&this.props.onCreateAnnotation&&r.default.createElement("button",{className:"Annotation-button inst-button--flat","aria-label":(0,i.default)("create annotation"),onClick:this.handleAnnotationSave},r.default.createElement(a.CheckSVG,null)),r.default.createElement("button",{className:"Annotation-button inst-button--flat","aria-label":(0,i.default)("delete annotation"),onClick:this.handleAnnotationDelete},r.default.createElement(a.DeleteSVG,{color:"white"})))))}}]),t}();t.default=u},480:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckSVG=t.DeleteSVG=t.EditSVG=void 0;var o=i(n(47)),r=i(n(51));function i(e){return e&&e.__esModule?e:{default:e}}t.EditSVG=function(){return o.default.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 18 18"},o.default.createElement("title",null,(0,r.default)("Edit icon")),o.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},o.default.createElement("g",{transform:"translate(-933.000000, -534.000000)",fillRule:"nonzero",fill:"#384A58"},o.default.createElement("path",{d:"M936.896694,535.1463 C936.701984,534.951091 936.385916,534.951091 936.190253,535.146753 L934.146253,537.190753 C933.951516,537.385491 933.951516,537.702909 934.146151,537.897544 L935.513597,539.264196 L938.264491,536.513303 L936.896694,535.1463 Z M947.076593,545.3252 L938.9717,537.220307 L935.513803,540.678204 L935.160249,540.324856 L933.439147,538.604753 C932.853884,538.019491 932.853884,537.068909 933.439147,536.483647 L935.483147,534.439647 C936.069484,533.853309 937.019416,533.853309 937.604151,534.439544 L938.443397,535.278303 L938.443653,535.278047 L939.325202,536.159595 L939.67891,536.513097 L949.108684,545.943077 L950.150563,551.150063 L944.943593,550.108187 L936.456568,541.622174 L937.163632,540.915026 L944.325627,548.076166 L947.076593,545.3252 Z M947.7837,546.032307 L945.032776,548.78323 L945.436607,549.187013 L948.875637,549.875137 L948.187516,546.436123 L947.7837,546.032307 Z M938.326647,540.033753 L939.033753,539.326647 L945.217753,545.510647 L944.510647,546.217753 L938.326647,540.033753 Z",id:"edit"}))))},t.DeleteSVG=function(e){var t=e.color,n=o.default.createElement("img",{alt:(0,r.default)("Delete icon"),src:"/images/icons/delete-icon.svg",style:{width:"16px",height:"16px"}}),i=o.default.createElement("img",{alt:(0,r.default)("Delete icon (white)"),src:"/images/icons/delete-icon-white.svg",style:{width:"16px",height:"16px"}});return t?i:n},t.CheckSVG=function(){return o.default.createElement("img",{alt:(0,r.default)("Check icon"),src:"/images/icons/check.svg",style:{width:"16px",height:"16px"}})}},482:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=s(n(47)),i=s(n(613)),a=n(403);function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.PureComponent),o(t,[{key:"render",value:function(){var e=this.props.points,t=this.props.strokeColor||"#000000",n=void 0;return n=e.length>=6?function(e,t,n){for(var o=[],s=(0,a.multiplyPath)((0,a.multiplyPath)(e)),l=0;l<s.length-3;l+=3){var u=s.slice(l,l+4);4===u.length&&o.push(s.slice(l,l+4))}return o.map(function(e,o){var a=e[0].x+" "+e[0].y,s=e[1].x+" "+e[1].y+" "+e[2].x+" "+e[2].y+" "+e[3].x+" "+e[3].y,l="M "+a+" C "+s,u="number"==typeof e[1].width?e[1].width:n,c="number"==typeof e[1].opacity?e[1].opacity:1;return r.default.createElement("g",{key:o},r.default.createElement(i.default,{d:l,strokeColor:t,strokeWidth:u,strokeOpacity:c}),r.default.createElement("path",{className:"hitpath",fill:"none",stroke:t,d:l,strokeWidth:12,strokeLinecap:"round",strokeLinejoin:"round",opacity:.001}))})}(e,t,this.props.strokeWidth):function(e,t,n){return e.reduce(function(e,t){return e.length?e.concat([[e[e.length-1][1],t]]):[[null,t]]},[]).slice(1).map(function(e,o){var a="M "+e[0].x+" "+e[0].y+" L "+e[1].x+" "+e[1].y;return r.default.createElement("g",{key:"g-"+o},r.default.createElement(i.default,{key:"path-"+o,d:a,strokeColor:t,strokeOpacity:"number"==typeof e[1].opacity?e[1].opacity:1,strokeWidth:"number"==typeof e[1].width?e[1].width:n}),r.default.createElement("path",{className:"hitpath",d:a,fill:"none",opacity:.001,stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:12}))})}(e,t,this.props.strokeWidth),r.default.createElement("g",{className:"Shape"},n)}}]),t}();t.default=l},485:function(e,t,n){var o=n(634);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(136)(o,r);o.locals&&(e.exports=o.locals)},486:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(47),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){return a.default.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",style:{color:this.props.color}},a.default.createElement("path",{d:"M15.294 0v1.176H4.706V0H0v4.707h1.176v10.588H0V20h4.706v-1.176h10.588V20H20v-4.705h-1.175V4.707H20V0h-4.706zM2.354 4.707h2.352V2.353h10.588v2.354h2.354v10.588h-2.354v2.352H4.706v-2.352H2.353V4.707z",fill:"currentColor",fillRule:"evenodd"}))}}]),t}();t.default=s},487:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(47),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){return a.default.createElement("svg",{width:"19",height:"18",viewBox:"0 0 19 18",xmlns:"http://www.w3.org/2000/svg",style:{color:this.props.color}},a.default.createElement("path",{d:"M17.907.476c.39.39.56.844.54 1.35-.107 2.512-4.772 7.114-8.33 10.26-.23-.624-.61-1.31-1.203-2.05l-.083-.094c-.77-.77-1.624-1.298-2.522-1.55C9.178 5.14 14.034.104 16.608 0c.53-.012.962.145 1.3.474zM7.86 10.912l.043.047c1.12 1.405 1.436 2.68.94 3.786-1.238 2.76-7.116 3.16-7.783 3.195L0 18l.594-.882c.01-.015 1.01-1.525 1.01-4.105 0-1.362.89-2.686 2.164-3.218C5.09 9.24 6.583 9.65 7.86 10.912z",fill:"currentColor",fillRule:"evenodd"}))}}]),t}();t.default=s},488:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(47),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){return a.default.createElement("svg",{width:"18",height:"17",viewBox:"0 0 18 17",xmlns:"http://www.w3.org/2000/svg",style:{color:this.props.color}},a.default.createElement("path",{d:"M11.5 11.266c.133.394.127.857-.028 1.42-.286 1.02-.832 1.624-1.67 1.846-1.43.375-3.35-.414-4.276-1.332l-.46-.496-1.648 1.534.49.525c1.144 1.136 3.167 2.11 5.128 2.11.455 0 .906-.05 1.34-.166 1.607-.424 2.765-1.638 3.264-3.42.2-.72.24-1.39.152-2.02h-2.29zM18 7.89v2.25H0V7.89h5.266c-1.27-.907-2.125-2.283-1.47-4.49C4.427 1.28 5.867.48 6.965.18c2.323-.625 5.096.454 6.53 1.792l-1.536 1.644c-.986-.92-2.993-1.65-4.405-1.263-.804.218-1.327.77-1.6 1.685-.51 1.718.626 2.362 3.542 3.24.666.2 1.252.38 1.725.61H18z",fill:"currentColor",fillRule:"evenodd"}))}}]),t}();t.default=s},489:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(47),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){return a.default.createElement("svg",{width:"18",height:"20",viewBox:"0 0 18 20",xmlns:"http://www.w3.org/2000/svg",style:{color:this.props.color}},a.default.createElement("path",{d:"M0 20h17.708v-1.18H0V20zm3.83-5.508l1.493.996-.628.97H2.26l1.57-1.966zM2.11 17.64H5.34l1.284-1.988.622-.93c.17-.257.47-.393.757-.337.8.15 1.607-.23 2.007-.92L16 4.052c.42-.726.215-1.652-.47-2.11L13.003.256c-.684-.453-1.618-.29-2.12.37l-6.94 8.766c-.496.654-.534 1.55-.092 2.224.16.247.152.573-.018.83l-.607.91-1.98 2.483c-.27.335-.32.785-.134 1.172.188.386.57.627 1 .627z",fill:"currentColor",fillRule:"evenodd"}))}}]),t}();t.default=s},490:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(47),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){return a.default.createElement("svg",{className:"PointIcon",height:"24",viewBox:"0 0 17 24",width:"17",xmlns:"http://www.w3.org/2000/svg",style:{color:this.props.color}},a.default.createElement("path",{d:"M8.21 0C3.684 0 0 3.683 0 8.21c0 2.258 1.004 4.35 3.068 6.395 2.997 2.975 4.393 5.72 4.393 8.645V24h1.5v-.75c0-2.91 1.38-5.577 4.47-8.643 2.067-2.047 3.07-4.138 3.07-6.396C16.5 3.683 12.816 0 8.21 0",fill:"currentColor",fillRule:"evenodd"}))}}]),t}();t.default=s},491:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(644);var r=a(n(47)),i=a(n(400));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.PureComponent),o(t,[{key:"render",value:function(){var e=(0,i.default)("AnnotationControlButton",{selected:this.props.currentControlMode===this.props.controlMode});return r.default.createElement("button",{key:"point","aria-label":this.props["aria-label"],className:e,onClick:this.props.onClick,title:this.props.tooltip},r.default.createElement("div",{className:"AnnotationControlButton-outer"},r.default.createElement("div",{className:"AnnotationControlButton-inner"},this.props.children)))}}]),t}();t.default=s},492:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(47),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){var e=Object.assign({},this.props.style||{},{width:"2px",height:"26px",color:"#ABB3BA"});return a.default.createElement("svg",{viewBox:"0 0 2 26",style:e},a.default.createElement("line",{stroke:"currentColor",strokeDasharray:"2, 1",strokeWidth:"1",x1:"1",y1:"0",x2:"1",y2:"26"}))}}]),t}();t.default=s},522:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GET_DOCUMENT_PENDING="GET_DOCUMENT_PENDING",t.GET_DOCUMENT_SUCCESS="GET_DOCUMENT_SUCCESS",t.GET_DOCUMENT_ERROR="GET_DOCUMENT_ERROR",t.GET_PAGE_PENDING="GET_PAGE_PENDING",t.GET_PAGE_SUCCESS="GET_PAGE_SUCCESS",t.GET_PAGE_ERROR="GET_PAGE_ERROR",t.GET_TEXT_CONTENT_PENDING="GET_TEXT_CONTENT_PENDING",t.GET_TEXT_CONTENT_SUCCESS="GET_TEXT_CONTENT_SUCCESS",t.GET_TEXT_CONTENT_ERROR="GET_TEXT_CONTENT_ERROR",t.UPDATE_PAGE_NUMBER="UPDATE_PAGE_NUMBER",t.SCALE_PAGE="SCALE_PAGE",t.SET_SCALE="SET_SCALE"},523:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GET_ANNOTATIONS_PENDING="GET_ANNOTATIONS_PENDING",t.GET_ANNOTATIONS_SUCCESSFUL="GET_ANNOTATIONS_SUCCESSFUL",t.GET_ANNOTATIONS_ERROR="GET_ANNOTATIONS_ERROR",t.START_ANNOTATION="START_ANNOTATION",t.STAGE_ANNOTATION="STAGE_ANNOTATION",t.SELECT_ANNOTATION="SELECT_ANNOTATION",t.DESELECT_ANNOTATION="DESELECT_ANNOTATION",t.CREATE_ANNOTATION_PENDING="CREATE_ANNOTATION_PENDING",t.CREATE_ANNOTATION_SUCCESS="CREATE_ANNOTATION_SUCCESS",t.CREATE_ANNOTATION_ERROR="CREATE_ANNOTATION_ERROR",t.UPDATE_ANNOTATION_PENDING="UPDATE_ANNOTATION_PENDING",t.UPDATE_ANNOTATION_SUCCESS="UPDATE_ANNOTATION_SUCCESS",t.UPDATE_ANNOTATION_ERROR="UPDATE_ANNOTATION_ERROR",t.DELETE_ANNOTATION_PENDING="DELETE_ANNOTATION_PENDING",t.DELETE_ANNOTATION_SUCCESS="DELETE_ANNOTATION_SUCCESS",t.DELETE_ANNOTATION_ERROR="DELETE_ANNOTATION_ERROR",t.DELETE_ROOT_COMMENT_SUCCESS="DELETE_ROOT_COMMENT_SUCCESS",t.HOVER_ANNOTATION="HOVER_ANNOTATION",t.GENERATE_MERGED_PDF_PENDING="GENERATE_MERGED_PDF_PENDING",t.GENERATE_MERGED_PDF_SUCCESSFUL="GENERATE_MERGED_PDF_SUCCESSFUL",t.GENERATE_MERGED_PDF_DONE="GENERATE_MERGED_PDF_DONE",t.GENERATE_MERGED_PDF_ERROR="GENERATE_MERGED_PDF_ERROR",t.MERGED_PDF_READY="MERGED_PDF_READY",t.MERGED_PDF_TIMED_OUT="MERGED_PDF_TIMED_OUT"},564:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=s(n(47)),i=s(n(508)),a=s(n(453));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.handleScroll=function(){if(o.pagesContainer instanceof HTMLElement!=!1){var e=o.pagesContainer.getBoundingClientRect(),t=o.props.pageDiv.getBoundingClientRect(),n=t.top-e.top,r=e.bottom-t.bottom,i=n>=0&&n<=o.pagesContainer.clientHeight,a=r>=0&&r<=e.height,s=n<0&&r<0,l=0;i&&a?l=1:i?l=(o.pagesContainer.clientHeight-n)/t.height:a?l=(o.pagesContainer.clientHeight-r)/t.height:s&&(l=o.pagesContainer.clientHeight/t.height),o.props.onVisibilityChange(l)}},l(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"componentWillMount",value:function(){this.handleScrollThrottled=(0,a.default)(this.handleScroll,200,{leading:!0})}},{key:"componentDidMount",value:function(){var e=this,t=document.querySelector(".Pages");this.pagesContainer=t;var n=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;if(window.IntersectionObserver&&!1===n){var o=(0,i.default)(0,1.1,.1).map(function(e){return Math.round(10*e)/10});this.observer=new window.IntersectionObserver(function(t){t.forEach(function(t){e.props.onVisibilityChange(t.intersectionRatio)})},{root:this.pagesContainer,threshold:o}),this.observer.observe(this.props.pageDiv)}else window.addEventListener("resize",this.handleScrollThrottled),t instanceof HTMLElement&&this.pagesContainer.addEventListener("scroll",this.handleScrollThrottled)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleScrollThrottled),this.pagesContainer instanceof HTMLElement&&this.pagesContainer.removeEventListener("scroll",this.handleScrollThrottled),delete this.pagesContainer}},{key:"render",value:function(){return null}}]),t}();t.default=u},565:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.getCursorXOffset=p,t.getCursorYOffset=f,t.getPosition=d,t.flatten=h,t.getPressure=m,t.getTextSelectionRectangles=g,t.returnRectangleRange=b,t.createPointPlacement=w,t.createFreetextPlacement=E,t.isTooSmall=C,t.createAreaAnnotation=function(e,t,n,o){var r=t[0],s=r[r.length-1],u=(0,i.default)([r[0].x,s.x]),c=(0,a.default)([r[0].x,s.x]),p=(0,i.default)([r[0].y,s.y]),f=(0,a.default)([r[0].y,s.y]);return C(u,c,p,f,5)?null:{id:e,type:"square",color:"string"==typeof n?n:l.DEFAULT_AREA_ANNOTATION_COLOR,opacity:1,rect:[[u,f],[c,p]],subject:"Rectangle",width:o}},t.createPointAnnotation=function(e,t,n,o){var r=t[0],i=r[r.length-1];return{id:e,type:"text",rect:w(i,n),subject:"Comment",icon:"Comment",color:"string"==typeof o?o:l.DEFAULT_POINT_ANNOTATION_COLOR}},t.createHighlightAnnotation=function(e,t,n,o,i,a,u){var p=g().map(y(a)).filter(v(t,n)),f=(u||[]).map(y(a)).filter((0,s.intersectsWithSome)(p)),d=p.sort(function(e,t){return e.left<t.left?-1:1}).sort(function(e,t){return e.bottom<t.bottom?-1:1}).reduce((0,s.getRectangleIntersections)(f),c).reduce(s.horizontallyConnectRects,[]).reduce(s.removeNeedlessRectOverlapping,[]).filter(s.withoutEmptyRects);if(!d.length)return null;var h=b(d),m=r(h,4),w=m[0],E=m[1],_=m[2],A=m[3];return C(w,E,_,A,5)?null:{id:e,type:"highlight",rect:[[w,A],[E,_]],coords:d.map(function(e){return[[e.left,e.bottom],[e.right,e.bottom],[e.left,e.top],[e.right,e.top]]}),color:"string"==typeof i?i:l.DEFAULT_HIGHLIGHT_ANNOTATION_COLOR,subject:"Highlight"}},t.createStrikeoutAnnotation=function(e,t,n,o,i,a,u){var p=g().map(y(a)).filter(v(t,n)),f=u.map(y(a)).filter((0,s.intersectsWithSome)(p)),d=p.sort(function(e,t){return e.left<t.left?-1:1}).sort(function(e,t){return e.bottom<t.bottom?-1:1}).reduce((0,s.getRectangleIntersections)(f),c).reduce(s.horizontallyConnectRects,[]).reduce(s.removeNeedlessRectOverlapping,[]).filter(s.withoutEmptyRects);if(!d.length)return null;var h=b(d),m=r(h,4),w=m[0],E=m[1],_=m[2],A=m[3];return C(w,E,_,A,5)?null:{id:e,type:"strikeout",rect:[[w,A],[E,_]],coords:d.map(function(e){return[[e.left,e.bottom],[e.right,e.bottom],[e.left,e.top],[e.right,e.top]]}),color:"string"==typeof i?i:l.DEFAULT_STRIKEOUT_ANNOTATION_COLOR,subject:"Strikeout"}},t.createInkAnnotation=function(e,t,n,o){var r=t.map(function(e){return e.map(function(e){var t={x:e.x,y:e.y};return"number"==typeof e.width&&(t.width=e.width),t})}),s=h(t.map(function(e){return e.map(function(e){return e.x})})),u=h(t.map(function(e){return e.map(function(e){return e.y})})),c=(0,i.default)(s),p=(0,a.default)(s),f=(0,i.default)(u),d=(0,a.default)(u);return C(c,p,f,d,2)?null:{id:e,type:"ink",color:"string"==typeof n?n:l.DEFAULT_INK_ANNOTATION_COLOR,rect:[[c,d],[p,f]],inklist:{gestures:r},subject:"Free Hand",width:o||2}},t.createFreetextAnnotation=function(e){var t=e.id,n=e.paths,o=(e.viewportHeight,e.viewportWidth,e.viewportScale),r=e.color,i=e.bgColor,a=e.font,s=(e.strokeWidth,e.divPosition,e.textLayerDivRects,n[0]),u=s[s.length-1];return{id:t,type:"freetext",color:"string"==typeof r?r:l.DEFAULT_FREETEXT_ANNOTATION_COLOR,bgColor:"string"==typeof i?i:l.DEFAULT_FREETEXT_BACKGROUND_COLOR,rect:E(u,o),subject:"FreeText",font:a||l.DEFAULT_FONT,"text-align":"left"}},t.getPointFromEvent=function(e,t,n,r){var i=d(e),a=void 0,s=void 0;if(null!==t.targetTouches&&"object"===o(t.targetTouches)&&"function"==typeof t.targetTouches.item){var l=t.targetTouches.item(0);if(s=m(l),"number"!=typeof l.clientX||"number"!=typeof l.clientY)return console.warn("clientX or clientY missing from touch"),{x:0,y:0};a={x:l.clientX-i.x,y:l.clientY-i.y}}else{if(s=m(t),"number"!=typeof t.clientX||"number"!=typeof t.clientY)return console.warn("clientX or clientY missing from event"),{x:0,y:0};var u=t.clientX,c=t.clientY;a={x:u-i.x+p(n),y:c-i.y+f(n)}}.5!==s&&(a.width=s*r*2,"number"==typeof t.tiltX&&t.tiltX>0&&(a.width*=1+Math.abs(t.tiltX)/90),"number"==typeof t.tiltY&&t.tiltY>0&&(a.width*=1+Math.abs(t.tiltY)/90));return a};var i=u(n(521)),a=u(n(519)),s=n(403),l=n(138);function u(e){return e&&e.__esModule?e:{default:e}}var c=[];function p(e){return 0}function f(e){switch(e){case"ink":return 15;default:return 0}}function d(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top}}function h(e){return e.reduce(function(e,t){return e.concat(t)},c)}function m(e){if("number"==typeof e.pressure)return 0===e.pressure?.5:e.pressure;if("number"==typeof e.force)return 0===e.pressure?.5:e.force;var t=e.nativeEvent instanceof Event?e.nativeEvent:e;if("number"==typeof t.webkitForce){var n=t.webkitForce>1?Math.sqrt(t.webkitForce-1):t.webkitForce;return 0===n?.5:n}return.5}function g(){var e=window.getSelection();if(!e.rangeCount)return c;var t=e.getRangeAt(0);return Array.from(t.getClientRects())}function v(e,t){return function(n){return n.left>1&&n.right<t-1&&n.bottom-n.top<e&&n.right-n.left<t}}function y(e){return function(t){return{left:t.left-e.x,top:t.top-e.y,right:t.right-e.x,bottom:t.bottom-e.y}}}function b(e){return[(0,i.default)(e.map(function(e){return e.left})),(0,a.default)(e.map(function(e){return e.right})),(0,i.default)(e.map(function(e){return e.top})),(0,a.default)(e.map(function(e){return e.bottom}))]}function w(e,t){var n=4.66666*t,o=6.66666*t;return[[e.x-n,e.y+o],[e.x+n,e.y-o]]}function E(e,t){var n=4.66666*t,o=10.33333*t;return[[e.x-n,e.y+o],[e.x+n,e.y-o]]}function C(e,t,n,o,r){return Math.abs(e-t)<r&&Math.abs(n-o)<r}},566:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(47),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){if(this.props.path.length<2)return null;var e=this.props.path[0],t=this.props.path[this.props.path.length-1],n="M "+e.x+" "+e.y+" L "+t.x+" "+e.y+" L "+t.x+" "+t.y+" L "+e.x+" "+t.y+" z";return a.default.createElement("path",{d:n,fill:"transparent",stroke:this.props.strokeColor||"red",strokeWidth:this.props.strokeWidth||2})}}]),t}();t.default=s},567:function(e,t,n){(e.exports=n(137)(!1)).push([e.i,".Draw{position:absolute;background-color:transparent;left:0;top:0}.Draw--area .Annotation,.Draw--freetext .Annotation,.Draw--ink .Annotation,.Draw--point .Annotation{user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}.Draw--area .textLayer,.Draw--freetext .textLayer,.Draw--ink .textLayer,.Draw--point .textLayer{pointer-events:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}.Draw--area .PageAnnotations,.Draw--area .TextLayer-container{cursor:crosshair}.Draw--freetext .TextLayer-container{cursor:text}.Draw--point .TextLayer-container{cursor:none}.Draw--ink .TextLayer-container,.Draw--is-drawing.Draw--ink .Draw-svg{cursor:url(/images/draw-cursor.svg),auto}.Draw--ink.Draw--is-drawing .Draw-svg{z-index:2}.Draw--highlight .Draw-svg{mix-blend-mode:multiply}.Draw--highlight .textLayer>div::selection,.Draw--strikeout .textLayer>div::selection{background-color:transparent}.Draw--highlight .textLayer>div::-moz-selection,.Draw--strikeout .textLayer>div::-moz-selection{background-color:transparent}.Draw--not-drawing .Draw--highlight-group,.Draw--not-drawing .Draw--strikeout-group{display:none}",""])},568:function(e,t,n){var o=n(567);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(136)(o,r);o.locals&&(e.exports=o.locals)},569:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(568);var s=y(n(47)),l=y(n(482)),u=y(n(566)),c=y(n(478)),p=y(n(443)),f=y(n(477)),d=n(403),h=y(n(446)),m=n(565),g=n(138),v=y(n(400));function y(e){return e&&e.__esModule?e:{default:e}}function b(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var w=["area","freetext","highlight","ink","point","strikeout"],E=["highlight","strikeout"],C={drawings:[],isDrawing:!1,isPointerDown:!1,paths:[],temporaryAnnotationId:""},_=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.componentDidMount=function(){var e=n.div;if(e instanceof HTMLElement!=!1){e.addEventListener("pointerdown",n.handlePointerDown),e.addEventListener("pointermove",n.handlePointerMove),e.addEventListener("pointerleave",n.handlePointerLeave),document.addEventListener("pointerup",n.handlePointerUp),document.addEventListener("pointercancel",n.handlePointerLeave),document.addEventListener("mouseup",n.handleMouseUp),document.addEventListener("keydown",n.handleKeyDown),document.addEventListener("selectionchange",n.handleSelectionChange);var t=document.querySelector(".Pages");t instanceof HTMLElement&&t.addEventListener("scroll",n.handleScroll)}},n.componentWillUnmount=function(){if(n.div instanceof HTMLElement!=!1){var e=n.div;e.removeEventListener("pointerdown",n.handlePointerDown),e.removeEventListener("pointermove",n.handlePointerMove),e.removeEventListener("pointerleave",n.handlePointerLeave),document.removeEventListener("pointercancel",n.handlePointerLeave),document.removeEventListener("pointerup",n.handlePointerUp),document.removeEventListener("mouseup",n.handleMouseUp),document.removeEventListener("keydown",n.handleKeyDown),document.removeEventListener("selectionchange",n.handleSelectionChange);var t=document.querySelector(".Pages");t instanceof HTMLElement&&t.removeEventListener("scroll",n.handleScroll)}},n.handleScroll=function(){if(!1===["highlight","strikeout"].includes(n.props.type))return!1;n.ensureTextLayerDivRects(),n.handleSelectionChange()},n.handleSelectionChange=function(){var e=window.getSelection();if(e instanceof Selection&&e.rangeCount>0&&!1===e.isCollapsed){var t=e.getRangeAt(0);e.rangeCount&&n.div instanceof HTMLElement&&n.div.contains(t.commonAncestorContainer)&&n.forceUpdate()}},n.handleKeyDown=function(e){"Escape"===e.key&&n.state.isDrawing&&(n.props.onMultiStrokeAnnotation(null),n.props.onDrawingEnd(),n.textLayerDivRects=[],n.setState(C))},n.handleMouseDown=function(e){window.PointerEvent||(e.stopPropagation(),n.handlePointerDown(e))},n.ensureTextLayerDivRects=function(){if(n.div instanceof HTMLElement!=!1){var e=n.div.querySelectorAll(".textLayer > div");n.textLayerDivRects=[].concat(b(e)).map(function(e){var t=e.getBoundingClientRect();return{left:t.left,top:t.top+parseFloat(e.style.paddingTop||0),right:t.right,bottom:t.bottom-parseFloat(e.style.paddingBottom||0)}})}},n.handlePointerDown=function(e){if(n.state.isDrawing||!1===w.includes(n.props.type)||n.props.isHoveringOverAnnotation||e.target instanceof HTMLElement&&e.target.closest(".AnnotationToolbar")instanceof HTMLElement)return n.setState({isPointerDown:!0}),!1;if(E.includes(n.props.type)&&n.ensureTextLayerDivRects(),n.div instanceof HTMLElement==!1)throw new Error("div missing in <Draw>");var t=(0,m.getPointFromEvent)(n.div,e,n.props.type,n.props.strokeWidth);if(t.x<0||t.x>n.props.viewportWidth||t.y<0||t.y>n.props.viewportHeight)return console.warn("point out of bounds"),!1;var o="string"==typeof n.props.multiStrokeAnnotationId&&n.state.drawings.length>0?n.state.temporaryAnnotationId:h.default.v4();n.props.onDrawingStart(),n.setState(function(e){return i({},e,{temporaryAnnotationId:o,isDrawing:!0,isPointerDown:!0,paths:[[t]]})},function(){"ink"===n.props.type&&n.props.onMultiStrokeAnnotation(o)})},n.handleMouseMove=function(e){if(window.PointerEvent)return!1;n.handlePointerMove(e)},n.handlePointerMove=function(e){if(["highlight","strikeout"].includes(n.props.type))return!1;if("point"!==n.props.type){if(!1===n.state.isDrawing)return!1;e.preventDefault();var t=(0,m.getPointFromEvent)(n.div,e,n.props.type,n.props.strokeWidth);n.setState(function(e){return i({},e,{paths:[(n.state.paths&&n.state.paths[0]||[]).concat([t])]})})}else{if(n.div instanceof HTMLElement==!1)return void console.warn("<div> unexpectedly missing in <Draw>");e.preventDefault();var o=(0,m.getPointFromEvent)(n.div,e,n.props.type,n.props.strokeWidth);n.setState(function(e){return i({},e,{paths:[[o]]})})}},n.handleMouseUp=function(){return!1===w.includes(n.props.type)?n.setState({isPointerDown:!1}):!window.PointerEvent&&void n.handlePointerUp()},n.handlePointerUp=function(){if(!1===n.state.isDrawing)return n.setState({isPointerDown:!1});if("ink"!==n.props.type){if(!1===w.includes(n.props.type))return!1;n.handleCreateAnnotation(),n.props.onDrawingEnd()}else n.addStrokeToInkAnnotation()},n.addStrokeToInkAnnotation=function(){1===n.state.paths.length&&n.state.paths[0].length>=1&&n.setState(function(e){return i({},e,{drawings:[].concat(b(n.state.drawings),[n.state.paths[0]]),isDrawing:!1,paths:[]})},function(){n.handleCreateAnnotation()})},n.handleCreateAnnotation=function(){if(n.div instanceof HTMLElement!=!1){var e="ink"===n.props.type,t=n.state.paths,o=n.props.currentColor,r=n.props.currentBgColor,a=n.props.currentFont,s=n.props.strokeWidth,l=n.props.viewportHeight,u=n.props.viewportWidth,c=n.props.viewportScale,p=(0,m.getPosition)(n.div),f=n.textLayerDivRects,d=void 0;switch(n.props.type){case"ink":d=(0,m.createInkAnnotation)(h.default.v4(),n.state.drawings,o,s);break;case"point":d=(0,m.createPointAnnotation)(h.default.v4(),t,c,o);break;case"area":d=(0,m.createAreaAnnotation)(h.default.v4(),t,o,s);break;case"strikeout":d=(0,m.createStrikeoutAnnotation)(h.default.v4(),l,u,c,o,p,f);break;case"highlight":d=(0,m.createHighlightAnnotation)(h.default.v4(),l,u,c,o,p,f);break;case"freetext":d=(0,m.createFreetextAnnotation)({id:h.default.v4(),paths:t,viewportHeight:l,viewportWidth:u,viewportScale:c,color:o,bgColor:r,font:a,strokeWidth:s,divPosition:p,textLayerDivRects:f});break;default:throw new Error("invalid annotation type")}null!=d&&(n.props.onChange(i({},d,{id:e&&n.state.temporaryAnnotationId})),n.props.onDrawingEnd()),setTimeout(function(){!1===e&&n.setState(C)},0)}},n.handlePointerLeave=function(){"point"===n.props.type?n.setState(C):E.includes(n.props.type)&&(n.forceUpdate(),setTimeout(function(){n.forceUpdate()},0))},n.handleMouseOut=function(e){window.Pointer||n.handlePointerLeave()},n.setDiv=function(e){e instanceof HTMLElement&&(n.div=e)},n.textLayerDivRects=[],n.state={drawings:[],isDrawing:!1,isPointerDown:!1,paths:[],strokeWidth:e.strokeWidth,temporaryAnnotationId:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),a(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.shouldBeRendered}},{key:"componentWillReceiveProps",value:function(e){this.props.currentColor!==e.currentColor?this.setState(function(t){return i({},t,{color:e.currentColor})}):"string"==typeof this.props.multiStrokeAnnotationId&&this.props.multiStrokeAnnotationId!==e.multiStrokeAnnotationId&&this.setState(C)}},{key:"componentDidUpdate",value:function(e){if("selection"===e.type&&E.includes(this.props.type)){var t=window.getSelection();if(t instanceof Selection&&t.rangeCount&&!1===t.isCollapsed){var n=t.getRangeAt(0),o=this.div.contains(n.commonAncestorContainer)||this.div.contains(n.commonAncestorContainer.parentNode);this.div instanceof HTMLElement&&o&&(this.ensureTextLayerDivRects(),this.handleCreateAnnotation())}}}},{key:"render",value:function(){var e=this,t=[];if("point"===this.props.type&&this.state.paths.length>0){var n=(0,m.createPointAnnotation)(h.default.v4(),this.state.paths,this.props.viewportScale,this.props.currentColor);if(null!==n&&n.rect instanceof Array){var i=r(n.rect,2),a=r(i[0],2),y=a[0],b=a[1],w=r(i[1],2),E=w[0],C=w[1],_=E-y,A=b-C;t=[s.default.createElement("g",{key:"point",role:"presentation",width:_,height:A},s.default.createElement(f.default,{x:y+2,y:C+2,width:_,height:A,color:"string"==typeof this.props.currentColor?this.props.currentColor:n.color}))]}}if("ink"===this.props.type&&this.state.paths.length>0&&(t=this.state.paths.map(function(t,n){return s.default.createElement(l.default,{key:e.state.temporaryAnnotationId+"-"+n,strokeColor:"string"==typeof e.props.currentColor?e.props.currentColor:g.DEFAULT_INK_ANNOTATION_COLOR,strokeWidth:e.props.strokeWidth,points:t})})),"area"===this.props.type&&(t=this.state.paths.map(function(t,n){return s.default.createElement(u.default,{key:e.state.temporaryAnnotationId+"-"+n,strokeColor:"string"==typeof e.props.currentColor?e.props.currentColor:g.DEFAULT_AREA_ANNOTATION_COLOR,strokeWidth:e.props.strokeWidth,path:t})})),"strikeout"===this.props.type&&this.textLayerDivRects.length>0){var O=(0,m.createStrikeoutAnnotation)(h.default.v4(),this.props.viewportHeight,this.props.viewportWidth,this.props.viewportScale,this.props.currentColor,(0,m.getPosition)(this.div),this.textLayerDivRects);null!==O&&(t=O.coords.map(function(t,n){return s.default.createElement("g",{className:"Draw--strikeout-group",key:e.state.temporaryAnnotationId+"-"+n,role:"presentation",fillOpacity:1,stroke:"string"==typeof e.props.currentColor?e.props.currentColor:g.DEFAULT_STRIKEOUT_ANNOTATION_COLOR,strokeWidth:"1.5"},s.default.createElement(c.default,{strokeColor:e.props.currentColor,strokeWidth:e.props.strokeWidth,rect:t}))}))}if("highlight"===this.props.type&&this.textLayerDivRects.length>0){var S=(0,m.createHighlightAnnotation)(h.default.v4(),this.props.viewportHeight,this.props.viewportWidth,this.props.viewportScale,this.props.currentColor,(0,m.getPosition)(this.div),this.textLayerDivRects),x=document.body&&"mix-blend-mode"in document.body.style?1:.25;null!==S&&(t=S.coords.map(d.getRectFromCoords).map(function(t,n){return s.default.createElement("g",{className:"Draw--highlight-group",key:n,role:"presentation",fill:"string"==typeof e.props.currentColor?e.props.currentColor:g.DEFAULT_HIGHLIGHT_ANNOTATION_COLOR,fillOpacity:x},s.default.createElement(p.default,{rect:t}))}))}var T=(0,v.default)("Draw",{"Draw--not-drawing":!1===this.state.isDrawing,"Draw--is-drawing":this.state.isDrawing,"Draw--is-pointer-down":this.state.isPointerDown,"Draw--selection":"selection"===this.props.type,"Draw--freetext":"freetext"===this.props.type,"Draw--highlight":"highlight"===this.props.type,"Draw--strikeout":"strikeout"===this.props.type,"Draw--area":"area"===this.props.type,"Draw--ink":"ink"===this.props.type,"Draw--point":"point"===this.props.type}),P=t.length>0;return s.default.createElement("div",{className:T,onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseOut:this.handleMouseOut,onTouchEnd:this.handlePointerUp,onTouchMove:this.handlePointerMove,onTouchStart:this.handlePointerDown,ref:this.setDiv,style:"object"===o(this.props.style)?this.props.style:{}},P&&s.default.createElement("svg",{className:"Draw-svg",style:{width:this.props.width+"px",height:this.props.height+"px",position:"absolute",left:0,top:0}},t),this.props.children)}}]),t}();t.default=_},570:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=l(n(47)),a=l(n(453)),s=l(n(405));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setDivRef=function(e){e instanceof HTMLElement&&(n.div=e)},n.setTextAreaRef=function(e){e instanceof HTMLElement&&(n.textArea=e)},n.componentDidMount=function(){n.setTextareaWidth(),n.updateTextareaHeight(),n.updateAnnotationDimensionsThrottled=(0,a.default)(n.updateAnnotationDimensions,15),n.div.addEventListener("focusout",n.handleAnnotationSave,!0),n.props.annotationContents||setTimeout(function(){n.setState(function(e){return o({},e,{isFocused:!0})},n.textArea.focus())},0)},n.componentWillUnmount=function(){n.div.removeEventListener("focusout",n.handleAnnotationSave,!0)},n.updateAnnotationDimensions=function(){n.setTextareaWidth(),n.updateTextareaHeight()},n.handleAnnotationSave=function(e){if(e&&n.props.onParentBlur(e))n.setState(function(e){return o({},e,{isFocused:!1})});else{var t=n.textArea.value;(n.state.isEditing||n.state.isNewAnnotation)&&n.setState(function(e){return o({},e,{isEditing:!1,isFocused:!1})},function(){n.state.isNewAnnotation&&!t.length?n.props.onDeleteAnnotation(n.props.annotationPage,n.props.annotationID):n.props.canEdit&&n.props.annotationContents!==t&&t?n.props.onAnnotationSave(t,{clientHeight:n.textArea.clientHeight,clientWidth:n.textArea.clientWidth}):n.textArea.value=n.props.annotationContents})}},n.handleMouseDown=function(e){n.props.canEdit&&n.setState(function(e){return o({},e,{isEditing:!0})}),setTimeout(function(){n.textArea.focus(),n.setState(function(e){return o({},e,{isFocused:!0})})},0)},n.handleKeyDown=function(e){if(!e.shiftKey&&"Enter"===e.key){e.preventDefault(),n.handleAnnotationSave();var t=n.div.closest(".FreetextGroup");t instanceof HTMLElement&&t&&t.focus()}},n.handleChange=function(){n.setState(function(e){return o({},e,{isEditing:!0})})},n.handleMouseEnter=function(){n.props.onTextareaMouseEnter(!0)},n.handleMouseLeave=function(){n.props.onTextareaMouseEnter(!1)},n.setTextareaWidth=function(){var e=n.props.x,t=n.props.viewportWidth-e-15;n.textArea instanceof HTMLElement&&(n.textArea.style.width="",n.textArea.style.whiteSpace="",n.textArea.style.wordWrap="normal",n.textArea.style.width=Math.min(t,n.textArea.scrollWidth)+"px",n.textArea.style.wordWrap="break-word",n.textArea.style.whiteSpace=n.textArea.scrollWidth>t?"pre-line":"pre")},n.updateTextareaHeight=function(){var e=n.props.y,t=n.props.viewportHeight-e-15;n.textArea.style.height="",n.textArea.style.height=Math.min(t,n.textArea.scrollHeight),n.textArea.style["overflow-y"]="auto"},n.updateTextareaDimension=function(e){e.preventDefault(),n.setTextareaWidth(),n.updateTextareaHeight()},n.state={isNewAnnotation:"string"!=typeof e.annotationContents||e.annotationContents.length<1,isEditing:!1,isFocused:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.PureComponent),r(t,[{key:"componentWillReceiveProps",value:function(e){this.updateAnnotationDimensionsThrottled(),e.annotationContents&&this.state.isNewAnnotation?this.setState(function(e){return o({},e,{isNewAnnotation:!1})}):!e.isSelected&&this.props.isSelected&&this.handleAnnotationSave()}},{key:"render",value:function(){var e=this.props.annotationFontSize*this.props.scaleModifier+"pt";return i.default.createElement("div",{className:"Freetext-content",ref:this.setDivRef},i.default.createElement("textarea",{rows:"1",cols:"1","aria-label":this.props.annotationUserName,disabled:!this.props.canEdit||this.props.isDragging,spellCheck:this.state.isEditing,className:"Freetext-textarea",style:{fontSize:e,color:this.props.annotationColor,backgroundColor:this.props.annotationFillColor,border:!this.state.isFocused&&this.props.isSelected&&"1px solid rgba(0, 0, 0, 0.25)"},ref:this.setTextAreaRef,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseDown:this.handleMouseDown,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onInput:this.updateTextareaDimension,defaultValue:this.props.annotationContents}))}}]),t}();t.default=u,u.propTypes={annotationColor:s.default.string,annotationContents:s.default.string,annotationFillColor:s.default.string,annotationFont:s.default.string,annotationID:s.default.string,annotationPage:s.default.number,annotationUserName:s.default.string,canEdit:s.default.bool,isDragging:s.default.bool,isSelected:s.default.bool,onAnnotationSave:s.default.func,onDeleteAnnotation:s.default.func,onParentBlur:s.default.func,onSelectAnnotation:s.default.func,onTextareaMouseEnter:s.default.func,viewportHeight:s.default.number,viewportWidth:s.default.number,x:s.default.number,y:s.default.number}},571:function(e,t,n){(e.exports=n(137)(!1)).push([e.i,".FreetextGroup{pointer-events:all;border:1px solid transparent;font-size:.9rem;position:absolute;will-change:auto;display:inline-block;-webkit-box-sizing:content-box;box-sizing:content-box}.FreetextGroup:focus{border:1px solid #31a4e7}.FreetextGroup--active,.FreetextGroup:focus{outline:1px dashed #bbb}.Page.is-multistroke-drawing .FreetextGroup{pointer-events:none}.FreetextTooltip-container{position:absolute;cursor:default;bottom:calc(100% + 2px)}.FreetextTooltip{position:relative;left:-2px}.Freetext-title{font-weight:700;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:5px}.Freetext-content{margin:4px;-webkit-box-sizing:content-box;box-sizing:content-box;cursor:text}.Freetext-entry{padding:10px;display:inline-block}.Freetext-textarea:focus{border:1px solid #38a7e8}.Freetext-textarea,.Freetext-textarea[disabled]{-webkit-opacity:1;-webkit-box-sizing:content-box;box-sizing:content-box;cursor:text;border:1px solid transparent;font-family:Lato,Helvetica,Arial;white-space:pre;overflow:hidden;resize:none;padding:0 2px;word-wrap:break-word}.TextSizeButton{outline:none;color:#556572;border:2px solid #fff;border-radius:5px;background-color:#fff}.TextSizeButton.selected{background-color:#556572;color:#fff}.TextSizeButton:hover{border-color:#dbdbdb}.TextSizeButton:focus{border-color:#38a7e8}.TextSizeButton-outer{display:-webkit-box;display:-ms-flexbox;display:flex;width:18px;height:19px;padding:2px 0;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}",""])},572:function(e,t,n){var o=n(571);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(136)(o,r);o.locals&&(e.exports=o.locals)},573:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(572);var a=m(n(47)),s=m(n(400)),l=m(n(51)),u=m(n(570)),c=m(n(407)),p=m(n(479)),f=m(n(445)),d=n(138),h=n(403);function m(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setDivRef=function(e){n.div=e},n.scaleFreetext=function(e){var t=n.div.clientWidth*e/d.DEFAULT_SCALE/n.div.clientWidth;n.setState(function(e){return r({},e,{scaleModifier:t})})},n.handleFocusOut=function(e){var t=(0,h.getRelatedTargetOrEquivalent)(e);return n.div&&n.div.contains(t)},n.handleFreetextGroupBlur=function(e){n.handleFocusOut(e)||setTimeout(function(){n.handleFocusOut(e)||(0,h.getRelatedTargetOrEquivalent)(e).className.includes("GenericPopup")||n.props.onDeselectAnnotation(n.props.annotation.id)},0)},n.handleKeyDown=function(e){if(document.activeElement.className.includes("FreetextGroup")&&n.props.canEdit)switch(e.key){case"Delete":case"Backspace":return void n.handleDelete();case"Escape":n.div.blur();break;case"ArrowRight":return n.handleKeyPressMove(e.shiftKey?1:5,0),void e.preventDefault();case"ArrowLeft":return n.handleKeyPressMove(e.shiftKey?-1:-5,0),void e.preventDefault();case"ArrowUp":return n.handleKeyPressMove(0,e.shiftKey?-1:-5),void e.preventDefault();case"ArrowDown":return n.handleKeyPressMove(0,e.shiftKey?1:5),void e.preventDefault()}},n.handleKeyPressMove=function(e,t){n.moveAnnotation(n.state.translateX+e,n.state.translateY+t)},n.handleMouseDown=function(e){!n.state.isMouseInTextarea&&n.props.canEdit&&n.div.contains(e.target)&&(n.props.onTextSelectionDisable(),n.originalPageX=e.pageX,n.originalPageY=e.clientY,n.originalTranslateX=n.state.translateX,n.originalTranslateY=n.state.translateY,n.setState(function(e){return r({},e,{isDragging:!0,isSelected:!0})}),n.props.onDraggingStart(n.props.annotation.id),document.addEventListener("mouseup",n.handleDocumentMouseUp),document.addEventListener("mousemove",n.handleDocumentMouseMove))},n.handleOnClick=function(e){n.props.isSelected||n.props.onSelectAnnotation(n.props.annotation.id)},n.handleDocumentMouseMove=function(e){if(n.state.isDragging&&n.props.annotation.contents){e.preventDefault();var t=(0,h.getTranslatedCordinates)({pageX:e.pageX,pageY:e.pageY,originalPageX:n.originalPageX,originalPageY:n.originalPageY,viewportHeight:n.props.viewportHeight,viewportWidth:n.props.viewportWidth,x:n.props.x,y:n.props.y}),o=t.translateX,r=t.translateY;n.moveAnnotation(o,r)}},n.moveAnnotation=function(e,t){var o=n.props.annotation.rect[0][0]+e,i=n.props.annotation.rect[0][1]+t,a=n.props.annotation.rect[1][1]+t,s=o+40*n.props.viewportScale<n.props.viewportWidth&&o>0?e:n.state.translateX,l=i+10<n.props.viewportHeight&&a>0?t:n.state.translateY;n.setState(function(e){return r({},e,{translateX:s,translateY:l,isDragging:!0})})},n.handleDocumentMouseUp=function(){n.state.isDragging&&(n.props.onTextSelectionEnable(),n.state.isDragging&&(n.setState(function(e){return r({},e,{isDragging:!1})},function(){0===n.state.translateX&&0===n.state.translateY||(n.props.onMoveAnnotation(n.props.annotation,n.state.translateX,n.state.translateY),n.setState(function(e){return r({},e,{translateX:0,translateY:0})}))}),n.props.onDraggingEnd()),document.removeEventListener("mouseup",n.handleDocumentMouseUp),document.removeEventListener("mousemove",n.handleDocumentMouseMove))},n.handleAnnotationSave=function(e,t){var r=t.clientHeight,i=t.clientWidth,a=n.props.annotation,s=o(a.rect,2),l=o(s[0],2),u=l[0],c=(l[1],o(s[1],2)),p=(c[0],c[1]);n.handleCommentSave(n.props.annotation.id,e,[[u,p+r],[u+i,p]])},n.handleCommentSave=function(e,t,o){var i=n.props.annotation,a=[].concat([],[i]).find(function(t){return t.id===e});t&&t.trim().length&&("string"==typeof i.created_at?n.props.onUpdateAnnotation(n.props.viewportHeight,n.props.viewportScale,r({},a,{contents:t,rect:o})):n.props.onCreateAnnotation(n.props.viewportHeight,n.props.viewportScale,r({},i,{contents:t,rect:o})))},n.handleDelete=function(){n.setState(function(e){return r({},e,{isDeletePopupVisible:!0})})},n.handleDeletePopupConfirm=function(){n.setState(function(e){return r({},e,{isDeletePopupVisible:!1})});var e=n.props.annotation;n.props.canEdit&&n.props.onDeleteAnnotation(e.page,e.id)},n.handleDeletePopupCancel=function(){n.setState(function(e){return r({},e,{isDeletePopupVisible:!1})}),n.div.focus(),n.props.onHoverAnnotation(null)},n.handleisMouseInTextarea=function(e){n.setState(function(t){return r({},t,{isMouseInTextarea:e})})},n.handleMouseEnter=function(e){n.setState(function(e){return r({},e,{isHovered:!0})}),n.props.onHoverAnnotation(n.props.annotation.id)},n.handleMouseLeave=function(e){n.setState(function(e){return r({},e,{isHovered:!1})}),n.props.onHoverAnnotation(null)},n.updateColor=function(e){n.props.onUpdateAnnotation(n.props.viewportHeight,n.props.viewportScale,r({},n.props.annotation,{color:e})),n.props.onCurrentColorChange(e,"freetext")},n.updateBgColor=function(e){n.props.onUpdateAnnotation(n.props.viewportHeight,n.props.viewportScale,r({},n.props.annotation,{bgColor:e})),n.props.onCurrentBgColorChange(e,"freetext")},n.updateTextSize=function(e){n.props.onUpdateAnnotation(n.props.viewportHeight,n.props.viewportScale,r({},n.props.annotation,{font:e})),n.props.onCurrentTextSizeChange(e,"freetext")},n.state={isHovered:!1,isDeletePopupVisible:!1,isDragging:!1,isMouseInTextarea:!1,translateX:0,translateY:0,scaleModifier:1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),i(t,[{key:"componentDidMount",value:function(){this.scaleFreetext(this.props.viewportScale),this.div.addEventListener("focusout",this.handleFreetextGroupBlur,!0)}},{key:"componentWillUnmount",value:function(){this.div.removeEventListener("focusout",this.handleFreetextGroupBlur,!0)}},{key:"componentWillReceiveProps",value:function(e){e.viewportScale!==this.props.viewportScale&&this.scaleFreetext(e.viewportScale)}},{key:"render",value:function(){var e=this.props.annotation,t=o(this.props.annotation.rect,2),n=o(t[0],2),r=n[0],i=(n[1],o(t[1],2)),d=i[0],h=i[1],m=this.props.isSelected||this.state.isDragging,g=(0,s.default)("FreetextGroup",{"FreetextGroup--active":m,"FreetextGroup--editable":this.props.canEdit}),v=e.font&&e.font.split(" ")[0].replace(/\D/g,"")||"10",y=r+this.state.translateX,b=h+this.state.translateY;if(this.state.hasError)return a.default.createElement("div",{style:{left:y,top:b}},"Error");var w=this.props.isSelected&&this.props.canEdit,E=(0,l.default)("Are you sure you want to delete this annotation?");return a.default.createElement("div",{key:this.props.annotation.id+"-container",tabIndex:-1,onClick:this.handleOnClick,onKeyDown:this.handleKeyDown,onKeyUp:this.handleDocumentMouseUp,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,ref:this.setDivRef},a.default.createElement("div",{key:this.props.annotation.id,id:"Annotation-"+this.props.annotation.id,className:g,onMouseDown:this.handleMouseDown,style:{left:y,top:b,backgroundColor:this.props.annotation.bgColor,border:"transparent",cursor:"string"==typeof this.props.annotation.contents&&this.props.annotation.contents.length>0?"move":"auto"},tabIndex:-1},a.default.createElement(u.default,{annotationContents:e.contents,annotationPage:e.page,annotationID:e.id,annotationFontSize:v,annotationColor:e.color,annotationFillColor:e.bgColor,annotationUserName:e.user_name,annotationWidth:d-r,isSelected:this.props.isSelected,isDragging:this.state.isDragging,canEdit:this.props.canEdit,x:y,y:b,scaleModifier:this.state.scaleModifier,viewportWidth:this.props.viewportWidth,viewportHeight:this.props.viewportHeight,onParentBlur:this.handleFocusOut,onSelectAnnotation:this.props.onSelectAnnotation,onDeleteAnnotation:this.props.onDeleteAnnotation,onAnnotationSave:this.handleAnnotationSave,onTextareaMouseEnter:this.handleisMouseInTextarea}),a.default.createElement("div",{className:"FreetextTooltip-container"},m&&a.default.createElement("div",{className:"FreetextTooltip"},a.default.createElement(p.default,{canEdit:this.props.canEdit,displayAuthorName:!this.props.canEdit,onDeleteAnnotation:this.handleDelete,authorName:this.props.annotation.user_name})))),this.state.isDeletePopupVisible&&a.default.createElement(f.default,{message:E,onCancel:this.handleDeletePopupCancel,onConfirm:this.handleDeletePopupConfirm,severity:"warning"}),w&&a.default.createElement(c.default,{controlMode:"freetext",currentBgColor:e.bgColor,currentColor:e.color,currentFont:e.font,onCurrentBgColorChange:this.updateBgColor,onCurrentColorChange:this.updateColor,onCurrentTextSizeChange:this.updateTextSize}))}}]),t}();t.default=g},574:function(e,t,n){(e.exports=n(137)(!1)).push([e.i,".PointAnnotation{pointer-events:none}.Draw--not-drawing .PointAnnotation path{pointer-events:visiblePainted}.Draw--not-drawing .PointAnnotation--editable path{cursor:move}.Draw--is-pointer-down .PointAnnotation path{pointer-events:none}",""])},575:function(e,t,n){var o=n(574);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(136)(o,r);o.locals&&(e.exports=o.locals)},576:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=m(n(47)),s=m(n(400)),l=m(n(51)),u=m(n(477)),c=m(n(418)),p=n(419),f=m(n(407)),d=m(n(444)),h=m(n(490));n(406);function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(575);var v=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=o=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.handleCommentSave=p.saveComment.bind(o),o.updateColor=function(e){o.props.onUpdateAnnotation(o.props.viewportHeight,o.props.viewportScale,r({},o.props.annotation,{color:e})),o.props.onCurrentColorChange(e,"point")},g(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),i(t,[{key:"render",value:function(){var e=this,t=this.props.selectionBoxPadding,n=this.props.annotation,r=o(this.props.annotation.rect,2),i=o(r[0],2),p=i[0],m=i[1],g=o(r[1],2),v=g[0],y=g[1],b=v-p,w=m-y,E=a.default.createElement(f.default,{controlMode:"point",currentColor:n.color,onCurrentColorChange:this.updateColor}),C=this.props.isHovered||this.props.isSelected,_=(0,s.default)("PointAnnotation",{"PointAnnotation--editable":this.props.canEdit});return a.default.createElement(c.default,{annotation:this.props.annotation,canEdit:this.props.canEdit,className:_,commentIcon:a.default.createElement(h.default,{color:n.color}),commentReplies:this.props.commentReplies,height:w,id:n.id,isAnnotatable:this.props.isAnnotatable,isHovered:this.props.isHovered,isMovable:!0,isSelected:this.props.isSelected,onCommentSave:this.handleCommentSave,onCreateAnnotation:this.props.onCreateAnnotation,onDeleteAnnotation:this.props.onDeleteAnnotation,onDeselectAnnotation:this.props.onDeselectAnnotation,onDraggingEnd:this.props.onDraggingEnd,onDraggingStart:this.props.onDraggingStart,onHoverAnnotation:this.props.onHoverAnnotation,onIsCommentingChange:this.props.onIsCommentingChange,onMoveAnnotation:this.props.onMoveAnnotation,onSelectAnnotation:this.props.onSelectAnnotation,onTextSelectionDisable:this.props.onTextSelectionDisable,onTextSelectionEnable:this.props.onTextSelectionEnable,pageHeight:this.props.pageHeight,pageNumber:this.props.pageNumber,selectionBoxPadding:t,sessionUserObject:this.props.sessionUserObject,title:(0,l.default)("Point annotation"),viewportHeight:this.props.viewportHeight,viewportScale:this.props.viewportScale,viewportWidth:this.props.viewportWidth,width:b,x:p,y:y,render:function(o){return[a.default.createElement(d.default,{height:w+2*t,isSelected:e.props.isSelected,isSvgContainerFocused:o,isVisible:C,key:"selectionbox",width:b+2*t}),"string"==typeof n.icon&&a.default.createElement(u.default,{color:n.color,height:w,key:"pointIcon",width:b,x:t,y:t})]},secondaryControls:E})}}]),t}();t.default=v},577:function(e,t,n){(e.exports=n(137)(!1)).push([e.i,".StrikeoutAnnotation{pointer-events:none}.Draw--not-drawing .StrikeoutAnnotation rect{pointer-events:visiblePainted;cursor:default}.Draw--is-pointer-down .StrikeoutAnnotation rect{pointer-events:none}.Annotation--selected .Annotation-svg-container:not(:focus) .StrikeoutAnnotation rect{stroke:#bbb;stroke-dasharray:3}.Annotation-svg-container:focus .StrikeoutAnnotation rect{stroke:#38a7e8}.Annotation:hover:not(.Annotation--selected) .StrikeoutAnnotation rect{stroke:#bbb;stroke-dasharray:3}",""])},578:function(e,t,n){var o=n(577);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(136)(o,r);o.locals&&(e.exports=o.locals)},579:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=m(n(47)),s=m(n(51)),l=m(n(478)),u=m(n(443)),c=m(n(418)),p=n(419),f=m(n(407)),d=(n(406),n(403)),h=m(n(488));function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(578);var v=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=o=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.handleCommentSave=p.saveComment.bind(o),o.updateColor=function(e){o.props.onUpdateAnnotation(o.props.viewportHeight,o.props.viewportScale,r({},o.props.annotation,{color:e})),o.props.onCurrentColorChange(e,"strikeout")},g(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),i(t,[{key:"render",value:function(){var e=this,t=this.props.annotation,n=o(this.props.annotation.rect,2),r=o(n[0],2),i=r[0],p=r[1],m=o(n[1],2),g=m[0],v=m[1],y=g-i,b=p-v,w=a.default.createElement(f.default,{controlMode:"strikeout",currentColor:this.props.annotation.color,onCurrentColorChange:this.updateColor});if(!(this.props.annotation.coords instanceof Array))throw new Error("coords missing on strikeout annotation");var E=this.props.annotation.coords.map(function(t,n){var o=t.map(function(t){return[t[0]-i+e.props.selectionBoxPadding,t[1]-v+e.props.selectionBoxPadding]});return a.default.createElement(l.default,{key:n,rect:o,viewportHeight:e.props.viewportHeight})}),C=this.props.annotation.coords.map(d.getRectFromCoords).filter(function(e){return e.top!==e.bottom&&e.left!==e.right}).map(function(t,n){var o={left:t.left-i+e.props.selectionBoxPadding,top:t.top-v+e.props.selectionBoxPadding,right:t.right-i+e.props.selectionBoxPadding,bottom:t.bottom-v+e.props.selectionBoxPadding};return a.default.createElement(u.default,{key:n,rect:o})});return a.default.createElement(c.default,{annotation:t,canEdit:this.props.canEdit,className:"StrikeoutAnnotation",commentIcon:a.default.createElement(h.default,{color:t.color}),commentReplies:this.props.commentReplies,height:b,id:t.id,isAnnotatable:this.props.isAnnotatable,isHovered:this.props.isHovered,isMovable:!1,isSelected:this.props.isSelected,pageHeight:this.props.pageHeight,onCommentSave:this.handleCommentSave,onCreateAnnotation:this.props.onCreateAnnotation,onDeleteAnnotation:this.props.onDeleteAnnotation,onDeselectAnnotation:this.props.onDeselectAnnotation,onDraggingEnd:this.props.onDraggingEnd,onDraggingStart:this.props.onDraggingStart,onHoverAnnotation:this.props.onHoverAnnotation,onIsCommentingChange:this.props.onIsCommentingChange,onSelectAnnotation:this.props.onSelectAnnotation,onTextSelectionDisable:this.props.onTextSelectionDisable,onTextSelectionEnable:this.props.onTextSelectionEnable,pageNumber:this.props.pageNumber,render:function(e){return[a.default.createElement("g",{key:"hitpath",role:"presentation",fillOpacity:.001},C),a.default.createElement("g",{key:"lines",role:"presentation",stroke:"string"==typeof t.color?t.color:"#EE0612",fillOpacity:"number"==typeof t.opacity?t.opacity:1,strokeWidth:"1.5"},E)]},secondaryControls:w,selectionBoxPadding:this.props.selectionBoxPadding,sessionUserObject:this.props.sessionUserObject,title:(0,s.default)("Strikeout annotation"),viewportHeight:this.props.viewportHeight,viewportScale:this.props.viewportScale,viewportWidth:this.props.viewportWidth,width:y,x:i,y:v})}}]),t}();t.default=v},580:function(e,t,n){(e.exports=n(137)(!1)).push([e.i,".HighlightAnnotation{mix-blend-mode:multiply;pointer-events:none}.Draw--not-drawing .HighlightAnnotation rect{pointer-events:visible;cursor:default}.Draw--is-pointer-down .HighlightAnnotation rect{pointer-events:none}.Annotation--selected .Annotation-svg-container:not(:focus) .HighlightAnnotation rect{stroke:#bbb;stroke-dasharray:3}.Annotation-svg-container:focus .HighlightAnnotation rect{stroke:#38a7e8}.Annotation:hover:not(.Annotation--selected) .HighlightAnnotation rect{stroke:#bbb;stroke-dasharray:3}",""])},581:function(e,t,n){var o=n(580);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(136)(o,r);o.locals&&(e.exports=o.locals)},582:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=h(n(47)),s=h(n(51)),l=h(n(443)),u=h(n(418)),c=(n(406),n(403)),p=n(419),f=h(n(407)),d=h(n(489));function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(581);var g=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=o=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.handleCommentSave=p.saveComment.bind(o),o.updateColor=function(e){o.props.onUpdateAnnotation(o.props.viewportHeight,o.props.viewportScale,r({},o.props.annotation,{color:e})),o.props.onCurrentColorChange(e,"highlight")},m(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),i(t,[{key:"render",value:function(){var e=this,t=this.props.annotation,n=o(this.props.annotation.rect,2),r=o(n[0],2),i=r[0],p=r[1],h=o(n[1],2),m=h[0],g=h[1],v=m-i,y=p-g;if(!(this.props.annotation.coords instanceof Array))throw new Error("coords missing on strikeout annotation");var b=this.props.annotation.coords.map(c.getRectFromCoords).filter(function(e){return e.top!==e.bottom&&e.left!==e.right}).map(function(t,n){var o={left:t.left-i+e.props.selectionBoxPadding,top:t.top-g+e.props.selectionBoxPadding,right:t.right-i+e.props.selectionBoxPadding,bottom:t.bottom-g+e.props.selectionBoxPadding};return a.default.createElement(l.default,{key:n,isHovered:e.props.isHovered,isSelected:e.props.isSelected,rect:o,viewportHeight:e.props.viewportHeight})}),w=.25;document.body instanceof HTMLElement&&"mix-blend-mode"in document.body.style&&(w=1);var E=a.default.createElement(f.default,{controlMode:"highlight",currentColor:t.color,onCurrentColorChange:this.updateColor});return a.default.createElement(u.default,{annotation:this.props.annotation,canEdit:this.props.canEdit,className:"HighlightAnnotation",commentIcon:a.default.createElement(d.default,{color:t.color}),commentReplies:this.props.commentReplies,height:y,id:t.id,isAnnotatable:this.props.isAnnotatable,isDragging:this.props.isDragging,isHovered:this.props.isHovered,isMovable:!1,isSelected:this.props.isSelected,onCommentSave:this.handleCommentSave,onCreateAnnotation:this.props.onCreateAnnotation,onDeleteAnnotation:this.props.onDeleteAnnotation,onDeselectAnnotation:this.props.onDeselectAnnotation,onDraggingEnd:this.props.onDraggingEnd,onDraggingStart:this.props.onDraggingStart,onHoverAnnotation:this.props.onHoverAnnotation,onIsCommentingChange:this.props.onIsCommentingChange,onSelectAnnotation:this.props.onSelectAnnotation,onTextSelectionDisable:this.props.onTextSelectionDisable,onTextSelectionEnable:this.props.onTextSelectionEnable,onUpdateAnnotation:this.props.onUpdateAnnotation,pageHeight:this.props.pageHeight,pageNumber:this.props.pageNumber,rect:this.props.annotation.rect,render:function(e){return a.default.createElement("g",{role:"presentation",fill:"string"==typeof t.color?t.color:"#FFF794",fillOpacity:w},b)},secondaryControls:E,selectionBoxPadding:this.props.selectionBoxPadding,sessionUserObject:this.props.sessionUserObject,title:(0,s.default)("Highlight annotation"),user_name:this.props.annotation.user_name,viewportHeight:this.props.viewportHeight,viewportScale:this.props.viewportScale,viewportWidth:this.props.viewportWidth,width:v,x:i,y:g})}}]),t}();t.default=g},583:function(e,t,n){(e.exports=n(137)(!1)).push([e.i,".SquareAnnotation{pointer-events:none}.Draw--not-drawing .SquareAnnotation-presentation-rect,.Draw--not-drawing .SquareAnnotation-presentation-rect-hitpath{pointer-events:visiblePainted}.Draw--not-drawing .SquareAnnotation--editable .SquareAnnotation-presentation-rect,.Draw--not-drawing .SquareAnnotation--editable .SquareAnnotation-presentation-rect-hitpath{cursor:move}.Draw--is-pointer-down .SquareAnnotation-presentation-rect,.Draw--is-pointer-down .SquareAnnotation-presentation-rect-hitpath{pointer-events:none}",""])},584:function(e,t,n){var o=n(583);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(136)(o,r);o.locals&&(e.exports=o.locals)},585:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=h(n(47)),s=h(n(400)),l=h(n(51)),u=h(n(418)),c=n(419),p=h(n(407)),f=(n(406),h(n(444))),d=h(n(486));function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(584);var g=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=o=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.handleCommentSave=c.saveComment.bind(o),o.updateColor=function(e){o.props.onUpdateAnnotation(o.props.viewportHeight,o.props.viewportScale,r({},o.props.annotation,{color:e})),o.props.onCurrentColorChange(e,"area")},m(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),i(t,[{key:"render",value:function(){var e=this,t=this.props.selectionBoxPadding+4,n=this.props.annotation,r=o(this.props.annotation.rect,2),i=o(r[0],2),c=i[0],h=i[1],m=o(r[1],2),g=m[0],v=m[1],y=g-c,b=h-v,w=a.default.createElement(p.default,{controlMode:"area",currentColor:this.props.annotation.color,onCurrentColorChange:this.updateColor}),E=this.props.isHovered||this.props.isSelected,C=(0,s.default)("SquareAnnotation",{"SquareAnnotation--editable":this.props.canEdit});return a.default.createElement(u.default,{annotation:this.props.annotation,canEdit:this.props.canEdit,className:C,commentIcon:a.default.createElement(d.default,{color:n.color}),commentReplies:this.props.commentReplies,height:b,id:n.id,isAnnotatable:this.props.isAnnotatable,isHovered:this.props.isHovered,isMovable:!0,isSelected:this.props.isSelected,onCommentSave:this.handleCommentSave,onCreateAnnotation:this.props.onCreateAnnotation,onDeleteAnnotation:this.props.onDeleteAnnotation,onDeselectAnnotation:this.props.onDeselectAnnotation,onDraggingEnd:this.props.onDraggingEnd,onDraggingStart:this.props.onDraggingStart,onHoverAnnotation:this.props.onHoverAnnotation,onIsCommentingChange:this.props.onIsCommentingChange,onMoveAnnotation:this.props.onMoveAnnotation,onSelectAnnotation:this.props.onSelectAnnotation,onTextSelectionDisable:this.props.onTextSelectionDisable,onTextSelectionEnable:this.props.onTextSelectionEnable,pageHeight:this.props.pageHeight,pageNumber:this.props.pageNumber,render:function(o){return[a.default.createElement(f.default,{height:b+2*t,isSelected:e.props.isSelected,isSvgContainerFocused:o,isVisible:E,key:"selectionbox",width:y+2*t}),a.default.createElement("rect",{className:"SquareAnnotation-presentation-rect",fill:"none",height:b,key:"rect",opacity:"number"==typeof n.opacity?n.opacity:1,role:"presentation",stroke:"string"==typeof n.color?n.color:"red",strokeWidth:"number"==typeof n.width?n.width:2,width:y,x:t,y:t}),a.default.createElement("rect",{className:"SquareAnnotation-presentation-rect-hitpath",fill:"none",height:b,key:"hitpath",opacity:.001,role:"presentation",stroke:"string"==typeof n.color?n.color:"red",strokeWidth:"number"==typeof n.width?n.width+8:10,width:y,x:t,y:t})]},secondaryControls:w,selectionBoxPadding:t,sessionUserObject:this.props.sessionUserObject,title:(0,l.default)("Area annotation"),viewportHeight:this.props.viewportHeight,viewportScale:this.props.viewportScale,viewportWidth:this.props.viewportWidth,width:y,x:c,y:v})}}]),t}();t.default=g},586:function(e,t,n){(e.exports=n(137)(!1)).push([e.i,".InkAnnotation{pointer-events:none}.Draw--not-drawing .InkAnnotation--saved line,.Draw--not-drawing .InkAnnotation--saved path{pointer-events:visiblePainted}.Draw--not-drawing .InkAnnotation--editable.InkAnnotation--saved line,.Draw--not-drawing .InkAnnotation--editable.InkAnnotation--saved path{cursor:move}.InkStrokeWidthButton{outline:none;color:#556572;border:3px solid #fff;border-radius:21px;background-color:#fff;padding:3px}.InkStrokeWidthButton.selected{border-color:#72818c}.InkStrokeWidthButton:hover{border-color:#dbdbdb}.InkStrokeWidthButton:focus{border-color:#72818c}.InkStrokeWidthButton-outer{display:-webkit-box;display:-ms-flexbox;display:flex;width:21px;height:21px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}",""])},587:function(e,t,n){var o=n(586);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(136)(o,r);o.locals&&(e.exports=o.locals)},588:function(e,t,n){(e.exports=n(137)(!1)).push([e.i,".SelectionBox{pointer-events:none;-webkit-animation-name:fadeIn;animation-name:fadeIn;-webkit-animation-duration:.3s;animation-duration:.3s}.Annotation-svg-container:focus .SelectionBox-rect{stroke:#38a7e8;stroke-dasharray:0}.PageAnnotations.is-dragging .SelectionBox{display:none}",""])},589:function(e,t,n){var o=n(588);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(136)(o,r);o.locals&&(e.exports=o.locals)},590:function(e,t,n){(e.exports=n(137)(!1)).push([e.i,".GenericPopup{position:fixed;margin:0 auto;margin-left:50px;margin-top:-25px;background-color:#fff;border-radius:4px;display:-webkit-box;display:-ms-flexbox;display:flex;pointer-events:visible;width:600px;left:50%;margin-left:-300px}.GenericPopup:focus{outline:none}@media (min-width:881px){.GenericPopup{top:120px}}@media (max-width:880px){.GenericPopup{top:170px}}.GenericPopup-warning{border:2px solid #fc5d13}.GenericPopup-button{font-family:inherit;font-size:inherit;margin:2px;padding:10px 20px 5px}.GenericPopup-confirm-button{background-color:#0291e0;border:2px solid #017bc3;color:#fff}.GenericPopup-confirm-button:hover{background-color:#017bc3;border:2px solid #017bc3}",""])},591:function(e,t,n){var o=n(590);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(136)(o,r);o.locals&&(e.exports=o.locals)},592:function(e,t,n){(e.exports=n(137)(!1)).push([e.i,".ExpandableIcon{background-color:#fff;bottom:9px;color:#3a8fdd;cursor:pointer;padding-left:10px;padding:6px;position:absolute;right:6px}",""])},593:function(e,t,n){var o=n(592);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(136)(o,r);o.locals&&(e.exports=o.locals)},594:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(47),a=(o=i)&&o.__esModule?o:{default:o};n(593);var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),r(t,[{key:"render",value:function(){return a.default.createElement("div",{"aria-hidden":!0,className:"ExpandableIcon"},"[...]")}}]),t}();t.default=s},595:function(e,t,n){(e.exports=n(137)(!1)).push([e.i,".CommentReplyForm{text-align:right}.Comment-reply-button{margin:6px}.Comment-reply-button::-moz-focus-inner{border:0}.CommentReplyForm-inner.hidden{display:none}.Comment:not(:first-of-type),.CommentReplyForm .CommentReplyForm-inner{border-top:1px solid #b9c0c6}.selection-disabled .CommentGroup{-webkit-transition:top .5s;transition:top .5s}.Annotation--is-dragging .CommentGroup{-webkit-transition:none;transition:none}.Comment-title{font-weight:700;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.Comment-title-username{margin:12px;margin-bottom:6px;-webkit-box-flex:1;-ms-flex:1;flex:1}.Comment-edit-buttons{margin-top:4px;margin-right:4px}.Comment-icon{margin-top:10px;margin-left:10px}.Comment-icon svg{width:20px}.Comment-title svg{height:20px;width:16px}.Comment-title-usernameExtraMargin{margin-left:38px}",""])},596:function(e,t,n){var o=n(595);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(136)(o,r);o.locals&&(e.exports=o.locals)},597:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(596);var r=c(n(47)),i=c(n(400)),a=c(n(51)),s=n(480),l=c(n(594)),u=c(n(445));function c(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=200,d=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.state={isEditing:!1,isDeletePopupVisible:!1,isShowMoreButtonVisible:!1},o.updateShowMoreButtonVisibility=function(){var e=!1===o.props.isSelected&&o.textarea instanceof HTMLElement&&o.textarea.scrollHeight>o.textarea.offsetHeight;e!==o.state.isShowMoreButtonVisible&&o.setState({isShowMoreButtonVisible:e})},o.handleDeleteComment=function(){o.setState({isDeletePopupVisible:!0})},o.handleDeletePopupConfirm=function(){o.setState({isDeletePopupVisible:!1}),o.props.onDeleteAnnotation(o.props.annotationId,o.props.root)},o.handleDeletePopupCancel=function(){o.setState({isDeletePopupVisible:!1}),o.div.focus()},o.setDivRef=function(e){e instanceof HTMLElement&&(o.div=e)},o.handleEditClick=function(){o.setState({isEditing:!0},function(){o.textarea&&o.textarea.focus()})},o.handleTextareaFocus=function(){o.setState({isEditing:!0})},o.handleTextareaBlur=function(){var e=o.props.contents!==o.textarea.value&&o.lastSavedValue!==o.textarea.value;o.textarea.value&&e?(o.props.onCommentSave({contents:o.textarea.value||"",annotationId:o.props.annotationId}),o.lastSavedValue=o.textarea.value||""):o.textarea.value.trim()||(o.textarea.value=o.props.contents||""),o.updateShowMoreButtonVisibility()},o.onCommentBlur=function(){o.setState({isDeletePopupVisible:!1})},o.handleKeyDown=function(e){if(!e.shiftKey&&"Enter"===e.key){e.preventDefault();var t=o.div.closest(".CommentGroup");if(!(t instanceof HTMLElement))return;if(t.focus(),""===o.textarea.value.trim())return;var n=t.querySelector(".Comment-reply-button");if(n)return void setTimeout(function(){n&&n.focus()},0)}},o.updateTextareaHeight=function(){if(o.textarea instanceof HTMLElement)if(o.textarea.style.height="",o.props.isSelected){var e=Math.min(o.textarea.scrollHeight,f)+"px";o.textarea.style.height=e}else o.textarea.scrollTop=0},o.setTextareaRef=function(e){e instanceof HTMLTextAreaElement&&(o.textarea=e)},p(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.PureComponent),o(t,[{key:"componentDidMount",value:function(){var e=this;this.updateTextareaHeight(),"string"!=typeof this.props.contents||0===this.props.contents.length?setTimeout(function(){e.textarea instanceof HTMLElement&&e.textarea.focus()},0):this.updateShowMoreButtonVisibility()}},{key:"componentWillReceiveProps",value:function(e){e.contents!==this.props.contents&&(this.textarea.value=e.contents)}},{key:"componentDidUpdate",value:function(){this.updateTextareaHeight(),this.updateShowMoreButtonVisibility()}},{key:"componentWillUnmount",value:function(){this.handleTextareaBlur()}},{key:"render",value:function(){var e=this.props.root?(0,a.default)("Are you sure you want to delete this comment and all its replies?"):(0,a.default)("Are you sure you want to delete this comment?"),t=(0,i.default)("CommentGroup-textarea"),n=(0,i.default)("Comment-title-username",{"Comment-title-usernameExtraMargin":!this.props.isFirst});return r.default.createElement("div",{className:"Comment",ref:this.setDivRef},r.default.createElement("div",{className:"Comment-title"},this.props.isFirst&&r.default.createElement("div",{className:"Comment-icon",role:"presentation"},this.props.commentIcon),r.default.createElement("div",{className:n},this.props.user_name),this.props.isSelected&&r.default.createElement("div",{className:"Comment-edit-buttons"},!1,this.props.canEdit&&r.default.createElement("button",{"aria-label":(0,a.default)("delete comment entry"),className:"Comment-button inst-button inst-button--flat",onClick:this.handleDeleteComment},r.default.createElement(s.DeleteSVG,null)))),r.default.createElement("div",{className:"Comment-content"},r.default.createElement("textarea",{className:t,defaultValue:this.props.contents,disabled:!this.props.canEdit,onBlur:this.handleTextareaBlur,onFocus:this.handleTextareaFocus,onInput:this.updateTextareaHeight,onKeyDown:this.handleKeyDown,placeholder:this.props.placeholder,ref:this.setTextareaRef,rows:"1",spellCheck:this.props.isSelected&&this.state.isEditing,style:{overflow:this.props.isSelected?"inherit":"hidden"},tabIndex:this.props.canEdit?0:-1}),this.state.isShowMoreButtonVisible&&r.default.createElement(l.default,null)),this.state.isDeletePopupVisible&&r.default.createElement(u.default,{message:e,onCancel:this.handleDeletePopupCancel,onConfirm:this.handleDeletePopupConfirm,severity:"warning"}))}}]),t}();t.default=d},599:function(e,t,n){(e.exports=n(137)(!1)).push([e.i,".CommentGroup{border:2px solid #c6ccd0;border-radius:6px;pointer-events:all;background-color:#fff;margin-bottom:12px;font-size:.9rem;position:absolute;width:290px;-webkit-box-sizing:content-box;box-sizing:content-box;left:34px;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-transition:top .3s ease-out;transition:top .3s ease-out}.Page:not(.Page--manycomments) .CommentGroup{margin-top:-6px}.Page--manycomments .CommentGroup{margin-top:0}.Page.selection-disabled .CommentGroup{user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}.CommentGroup:focus{border-color:#38a7e8;outline:none}.CommentGroup--active{-webkit-box-shadow:0 0 10px 0 rgba(0,0,0,.14);box-shadow:0 0 10px 0 rgba(0,0,0,.14)}.Comment-content{padding:6px;position:relative}.CommentGroup-textarea,.CommentGroup-textarea[disabled]{-webkit-opacity:1;-webkit-text-fill-color:#000;color:#000;background-color:#fff;border:1px solid transparent;width:235px;height:16px;margin:2px 6px 6px 29px;font-size:.9rem;resize:none;-webkit-box-sizing:content-box;box-sizing:content-box}.CommentGroup-textarea:focus{border:1px solid #31a4e7;outline:none;-webkit-transition:border .3s;transition:border .3s}.CommentGroup-hr{background-color:#b9c0c6;margin:10px 0;height:1px;border:0 none}",""])},600:function(e,t,n){var o=n(599);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(136)(o,r);o.locals&&(e.exports=o.locals)},601:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(600);var i=p(n(481)),a=p(n(47)),s=p(n(400)),l=p(n(51)),u=p(n(446)),c=p(n(597));function p(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleTextareaClick=function(e){e.stopPropagation()},n.setDivRef=function(e){e instanceof HTMLElement&&(n.div=e)},n.handleReplyButtonClick=function(){n.setState(function(e){return o({},e,{isReplying:!0})})},n.handleCancelReply=function(){n.setState(function(e){return o({},e,{isReplying:!1})})},n.handleReplySave=function(e){var t=e.contents,r=e.annotationId;n.props.onCommentSave({annotationPayload:{contents:t},inreplyto:n.props.annotationId,annotationId:r}).catch(function(e){console.error(e),n.props.onSelectComment(!1)}),n.setState(function(e){return o({},e,{isReplying:!1})})},n.state={isReplying:e.isCommenting,editingAnnotationId:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"componentDidUpdate",value:function(e,t){e.isSelected&&!this.props.isSelected&&this.setState(function(e){return o({},e,{isReplying:!1})})}},{key:"componentDidMount",value:function(){this.div instanceof HTMLElement&&(this.div.style.top=this.props.top+"px")}},{key:"render",value:function(){var e=this,t=this.props.commentReplies.sort(d),n=t.map(function(n){var o=t[0].id===n.id;return a.default.createElement(c.default,{annotationId:n.id,canEdit:e.props.isAnnotatable&&e.props.sessionUserObject.user_id===n.user_id,commentIcon:e.props.commentIcon,contents:n.contents,isFirst:o,isSelected:e.props.isSelected,key:n.id,onCommentSave:e.handleReplySave,onDeleteAnnotation:e.props.onDeleteAnnotation,placeholder:o?(0,l.default)("Leave a comment"):(0,l.default)("Leave a reply"),root:o,user_name:n.user_name})}),o=n.length>0&&this.props.isSelected&&!this.state.isReplying&&this.props.isAnnotatable;return a.default.createElement("div",{className:(0,s.default)("CommentGroup",{"CommentGroup--active":this.props.isSelected}),"data-original-top":(0,i.default)(this.props.top,2),"data-annotation-id":this.props.annotationId,id:"CommentGroup-"+this.props.annotationId,ref:this.setDivRef,tabIndex:-1},n,this.props.isSelected&&this.state.isReplying&&a.default.createElement(c.default,{annotationId:u.default.v4(),canEdit:this.props.isAnnotatable,commentIcon:this.props.commentIcon,contents:"",isFirst:0===t.length,isSelected:this.props.isSelected,key:"new",onCommentSave:this.handleReplySave,onDeleteAnnotation:this.handleCancelReply,placeholder:n.length<=0?(0,l.default)("Leave a comment"):(0,l.default)("Leave a reply"),root:!1,user_name:this.props.sessionUserObject.user_name}),a.default.createElement("div",{className:"CommentReplyForm"},a.default.createElement("div",{className:"CommentReplyForm-inner "+(o?"visible":"hidden")},a.default.createElement("button",{className:"Comment-reply-button inst-button","aria-label":(0,l.default)("Reply"),onClick:this.handleReplyButtonClick},(0,l.default)("Reply")))))}}]),t}();function d(e,t){return new Date(e.created_at).getTime()-new Date(t.created_at).getTime()}t.default=f},602:function(e,t,n){(e.exports=n(137)(!1)).push([e.i,".CommentsContainer-inside{position:absolute;width:100%}.Page--manycomments .CommentsContainer-inside{overflow:hidden}",""])},603:function(e,t,n){var o=n(602);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(136)(o,r);o.locals&&(e.exports=o.locals)},604:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(603);var r=a(n(47)),i=a(n(601));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.handleCreateComment=function(){o.props.onSelectComment(!0)},o.setDivRef=function(e){e instanceof HTMLElement&&(o.div=e)},s(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.PureComponent),o(t,[{key:"componentWillUnmount",value:function(){this.props.onCommentBlur()}},{key:"render",value:function(){var e=this.props.commentReplies&&this.props.commentReplies.length>0,t=this.props.canEdit&&this.props.isSelected,n=e||this.props.isCommenting||t;return r.default.createElement("div",{className:"CommentsContainer",onBlur:this.props.onCommentBlur,onFocus:this.props.onCommentFocus,ref:this.setDivRef},r.default.createElement("div",{className:"CommentsContainer-inside",style:{left:this.props.viewportWidth+"px",height:this.props.pageHeight+"px"}},n&&r.default.createElement(i.default,{annotationId:this.props.annotationId,canEdit:this.props.canEdit,commentIcon:this.props.commentIcon,commentReplies:this.props.commentReplies,contents:this.props.contents,isAnnotatable:this.props.isAnnotatable,isCommenting:this.props.isCommenting,isSelected:this.props.isSelected,key:this.props.annotationId,onCommentSave:this.props.onCommentSave,onDeleteAnnotation:this.props.onDeleteAnnotation,onSelectComment:this.props.onSelectComment,sessionUserObject:this.props.sessionUserObject,top:this.props.rect[1][1],user_id:this.props.user_id,user_name:this.props.user_name})))}}]),t}();t.default=l},605:function(e,t,n){(e.exports=n(137)(!1)).push([e.i,".Annotation .CommentLine{position:absolute;pointer-events:all}.Annotation .CommentLine-container{opacity:0;-webkit-transition:opacity .2s;transition:opacity .2s}.Annotation.Annotation--selected .CommentLine-container,.Annotation:hover .CommentLine-container{opacity:1;-webkit-transition:opacity .2s;transition:opacity .2s}",""])},606:function(e,t,n){var o=n(605);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(136)(o,r);o.locals&&(e.exports=o.locals)},607:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(606);var i,a=n(47),s=(i=a)&&i.__esModule?i:{default:i};var l=1,u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.updateHeight=function(){var e=document.getElementById("CommentGroup-"+n.props.annotationId);if(e instanceof HTMLElement){var t=e.style.top;if("string"==typeof t){var o=n.props.rect[1][1],r=parseFloat(t)-o,i=r>l?r:l;n.setState({height:i})}}},n.state={height:l},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.PureComponent),r(t,[{key:"componentDidMount",value:function(){this.updateHeight(),this.timeout1=setTimeout(this.updateHeight,10),this.timeout2=setTimeout(this.updateHeight,300)}},{key:"componentWillReceiveProps",value:function(){clearTimeout(this.timeout1),clearTimeout(this.timeout2),this.updateHeight(),this.timeout1=setTimeout(this.updateHeight,50),this.timeout2=setTimeout(this.updateHeight,300)}},{key:"componentDidUpdate",value:function(){clearTimeout(this.timeout1),clearTimeout(this.timeout2),this.updateHeight(),this.timeout1=setTimeout(this.updateHeight,50),this.timeout2=setTimeout(this.updateHeight,300)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout1),clearTimeout(this.timeout2)}},{key:"render",value:function(){var e=o(this.props.rect,2),t=o(e[0],1)[0],n=o(e[1],2),r=n[0],i=n[1],a=r-t,u=this.props.viewportWidth-t-a+this.props.widthExtension,c="M "+u+", "+(this.state.height-1)+" C "+(u-.5*u)+", "+(this.state.height-1)+", "+.5*u+", 1, 0, 1";return this.state.height<=0?null:s.default.createElement("div",{className:"CommentLine-container",id:"CommentLine-container-"+this.props.annotationId},s.default.createElement("svg",{className:"CommentLine",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+u+" "+this.state.height,strokeWidth:this.props.isSelected?2:l,style:{left:t+a+6+"px",top:i+6+"px",width:u+"px",height:(this.props.isSelected?Math.max(this.state.height,2):Math.max(this.state.height,l+1))+"px"}},s.default.createElement("path",{d:c,stroke:"#aaaaaa",strokeDasharray:"5, 5",fill:"none"})))}}]),t}();t.default=u},608:function(e,t,n){(e.exports=n(137)(!1)).push([e.i,".Comment-create{border-radius:50px;background-color:#fff;border:2px solid #b9c0c6;width:50px;height:50px;left:-24px;position:absolute;right:0;pointer-events:all;cursor:pointer}.Comment-create:focus{outline:none;border-color:#38a7e8}.Comment-create::-moz-focus-inner{border:0}",""])},609:function(e,t,n){var o=n(608);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(136)(o,r);o.locals&&(e.exports=o.locals)},610:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(609);var r=s(n(47)),i=s(n(51)),a=s(n(400));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.setButtonRef=function(e){e instanceof HTMLElement&&(o.button=e)},o.handleClick=function(){o.props.onCreateComment()},o.stopPropagation=function(e){e.stopPropagation()},l(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.PureComponent),o(t,[{key:"render",value:function(){var e=(0,a.default)("Comment-create",{"Comment-create--visible":this.props.isVisible});return r.default.createElement("button",{"aria-label":(0,i.default)("Create comment"),"aria-hidden":!this.props.isVisible,className:e,"data-original-top":this.props.top,onClick:this.handleClick,onTouchStart:this.stopPropagation,style:{top:this.props.top-10+"px",left:this.props.left-24+"px",position:this.props.isVisible?"absolute":"fixed",visibility:this.props.isVisible?"visible":"hidden"},id:this.props.annotationId+"-comment-create-button",ref:this.setButtonRef,tabIndex:this.props.isVisible?0:-1},r.default.createElement("img",{src:"/images/icons/create-comment-icon.svg",style:{width:"24px",height:"24px"},alt:(0,i.default)("Create comment icon")}))}}]),t}();t.default=u},611:function(e,t,n){(e.exports=n(137)(!1)).push([e.i,".Annotation{outline:none}.Annotation,.Page.is-multistroke-drawing .Annotation{pointer-events:none}.Annotation--selected{-ms-touch-action:none;touch-action:none}.AnnotationToolbar-container{position:absolute;bottom:calc(100% - 1px);left:2px}.AnnotationToolbar{pointer-events:all;display:inline-block;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:4px 6px;background-color:#556572;color:#fff}.AnnotationTooltip{margin-left:2px;margin-right:2px;font-size:10pt;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-sizing:content-box;box-sizing:content-box;text-align:left;cursor:text}.Annotation-button{cursor:pointer;color:#394b58;border-radius:3px;border:1px solid transparent;padding:2px}.Annotation-button:focus,.Annotation-button:hover{border-color:#dbdbdb}.Annotation-svg{position:absolute}.Annotation-svg.is-dragging{pointer-events:all}.Annotation-svg-container{outline:none;position:absolute}",""])},612:function(e,t,n){var o=n(611);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(136)(o,r);o.locals&&(e.exports=o.locals)},613:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(47),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){return a.default.createElement("path",{className:"Path",fill:"none",stroke:this.props.strokeColor||"red",d:this.props.d,strokeWidth:this.props.strokeWidth||"1px",strokeOpacity:this.props.strokeOpacity||1,strokeLinecap:"round",strokeLinejoin:"round"})}}]),t}();t.default=s},614:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=v(n(47)),l=v(n(400)),u=v(n(51)),c=n(403),p=v(n(482)),f=n(419),d=v(n(418)),h=v(n(407)),m=v(n(444)),g=(n(406),v(n(487)));function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(587);var b=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.handleCommentSave=f.saveComment.bind(o),o.updateColor=function(e){o.props.onUpdateAnnotation(o.props.viewportHeight,o.props.viewportScale,i({},o.props.annotation,{color:e}),o.props.multiStrokeAnnotationId===o.props.annotation.id),o.props.onCurrentColorChange(e,"ink")},o.scaleInklist=function(e){if(1===e||!o.props.annotation.inklist.gestures[0][0].width)return o.props.annotation.inklist;var t=o.props.annotation.inklist.gestures.map(function(t){return t.map(function(t){return i({},t,{width:t.width*e})})});return i({},o.props.annotation.inklist,{gestures:t})},o.updateInkStrokeWidth=function(e){var t=e/o.props.annotation.width,n=o.scaleInklist(t);o.props.onUpdateAnnotation(o.props.viewportHeight,o.props.viewportScale,i({},o.props.annotation,{width:e,inklist:n})),o.props.onCurrentInkStrokeWidthChange(e,"ink")},y(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.PureComponent),a(t,[{key:"componentWillReceiveProps",value:function(e){"ink"===this.props.controlMode&&"ink"!==e.controlMode&&this.props.multiStrokeAnnotationId===this.props.annotation.id&&(this.props.onMultiStrokeAnnotation(null),this.props.onDeleteAnnotation(this.props.pageNumber,this.props.annotation.id))}},{key:"render",value:function(){var e=this,t=r(this.props.annotation.rect,2),n=r(t[0],2),i=n[0],a=n[1],f=r(t[1],2),v=f[0],y=f[1],b=v-i,w=a-y,E="string"==typeof this.props.annotation.created_at,C=s.default.createElement(h.default,{controlMode:"ink",currentColor:this.props.annotation.color,currentInkWidth:this.props.annotation.width,onCurrentColorChange:this.updateColor,onCurrentInkStrokeWidthChange:this.updateInkStrokeWidth}),_=this.props.selectionBoxPadding;if("object"!==o(this.props.annotation.inklist))throw new Error("inklist missing on InkAnnotation");if(!(this.props.annotation.inklist.gestures instanceof Array))throw new Error("inklist.gestures missing on InkAnnotation");var A=this.props.annotation.inklist.gestures.map(function(e){return e.map((0,c.applyTranslatePoint)(-i+_,-y+_))}).map(function(t,n){return s.default.createElement(p.default,{annotatation:e.props.annotation,key:n,points:t,isTransparent:!1,selectionBoxPadding:_,strokeColor:e.props.annotation.color||"black",strokeWidth:e.props.annotation.width||2,viewportHeight:e.props.viewportHeight,viewportScale:e.props.viewportScale,viewportWidth:e.props.viewportWidth})}),O=this.props.isHovered||this.props.isSelected,S=(0,l.default)("InkAnnotation",{"InkAnnotation--editable":this.props.canEdit,"InkAnnotation--saved":E});return s.default.createElement(d.default,{annotation:this.props.annotation,canEdit:this.props.canEdit,className:S,commentIcon:s.default.createElement(g.default,{color:this.props.annotation.color}),commentReplies:this.props.commentReplies,contents:this.props.annotation.contents,height:w,id:this.props.annotation.id,isAnnotatable:this.props.isAnnotatable,isHovered:this.props.isHovered,isMovable:!0,isSelected:this.props.isSelected,multiStrokeAnnotationId:this.props.multiStrokeAnnotationId,onCommentSave:this.handleCommentSave,onCreateAnnotation:this.props.onCreateAnnotation,onDeleteAnnotation:this.props.onDeleteAnnotation,onDeselectAnnotation:this.props.onDeselectAnnotation,onDraggingEnd:this.props.onDraggingEnd,onDraggingStart:this.props.onDraggingStart,onHoverAnnotation:this.props.onHoverAnnotation,onIsCommentingChange:this.props.onIsCommentingChange,onMoveAnnotation:this.props.onMoveAnnotation,onMultiStrokeAnnotation:this.props.onMultiStrokeAnnotation,onSelectAnnotation:this.props.onSelectAnnotation,onTextSelectionDisable:this.props.onTextSelectionDisable,onTextSelectionEnable:this.props.onTextSelectionEnable,onUpdateAnnotation:this.props.onUpdateAnnotation,pageHeight:this.props.pageHeight,pageNumber:this.props.pageNumber,rect:this.props.annotation.rect,render:function(t){return[s.default.createElement(m.default,{key:"selectionBox",height:w+2*e.props.selectionBoxPadding,isSelected:e.props.isSelected,isVisible:O,width:b+2*e.props.selectionBoxPadding}),A]},secondaryControls:C,selectionBoxPadding:_,sessionUserObject:this.props.sessionUserObject,title:(0,u.default)("Free draw annotation"),user_name:this.props.annotation.user_name,viewportHeight:this.props.viewportHeight,viewportScale:this.props.viewportScale,viewportWidth:this.props.viewportWidth,width:b,x:i,y:y})}}]),t}();t.default=b},615:function(e,t,n){(e.exports=n(137)(!1)).push([e.i,".PageAnnotations{position:absolute;top:0;left:0;right:0;bottom:0}.PageAnnotations,.PageAnnotations.is-dragging,.PageAnnotations.is-dragging .Annotation--selected,.PageAnnotations.is-dragging path,.PageAnnotations.is-dragging rect{pointer-events:none}.PageAnnotations.is-dragging .Annotation:not(.Annotation--selected),.PageAnnotations.is-dragging .FreetextGroup:not(.FreetextGroup--active){pointer-events:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}.PageAnnotations.is-dragging,.PageAnnotations.is-dragging .Annotation,.PageAnnotations.is-dragging .FreetextGroup--active{cursor:move!important}.PageAnnotations.is-drawing .Annotation,.PageAnnotations.is-drawing .Annotation-svg,.PageAnnotations.is-drawing .FreetextGroup{pointer-events:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}@-webkit-keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.PageAnnotations .AnnotationToolbar{-webkit-animation-name:fadeIn;animation-name:fadeIn;-webkit-animation-duration:.3s;animation-duration:.3s}.PageAnnotations.is-drawing .AnnotationToolbar{display:none}.PageAnnotations.is-drawing,.PageAnnotations.is-drawing .FreetextGroup{pointer-events:none}",""])},616:function(e,t,n){var o=n(615);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(136)(o,r);o.locals&&(e.exports=o.locals)},617:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(616);var a=y(n(47)),s=y(n(51)),l=y(n(400)),u=y(n(614)),c=y(n(585)),p=y(n(582)),f=y(n(579)),d=y(n(576)),h=y(n(573)),m=n(138),g=n(403),v=n(406);function y(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleDraggingStart=function(e){n.setState(function(t){return r({},t,{draggingAnnotationId:e})})},n.handleDraggingEnd=function(){n.setState(function(e){return r({},e,{draggingAnnotationId:""})})},n.handleMoveAnnotation=function(e,t,o){var r=(0,g.translateAnnotation)(e,t,o);n.props.onUpdateAnnotation(n.props.viewportHeight,n.props.viewportScale,r,n.props.multiStrokeAnnotationId===e.id)},n.setDivRef=function(e){e instanceof HTMLElement&&(n.div=e)},n.state={isDrawing:!1,hasError:!1,draggingAnnotationId:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),i(t,[{key:"componentDidCatch",value:function(e,t){this.setState(function(e){return r({},e,{hasError:!0})},function(){console.error("Error caught in PageAnnotations",{error:e,info:t})})}},{key:"render",value:function(){var e=this,t=(0,g.transformAnnotationView)({height:this.props.viewportHeight,scale:this.props.viewportScale}),n=this.props.annotations.map(t).reduce(v.splitRootAnnotationsAndReplies,[[],[]]),i=o(n,2),y=i[0],b=i[1],w={isAnnotatable:this.props.isAnnotatable,multiStrokeAnnotationId:this.props.multiStrokeAnnotationId,onCreateAnnotation:this.props.onCreateAnnotation,onCurrentBgColorChange:this.props.onCurrentBgColorChange,onCurrentColorChange:this.props.onCurrentColorChange,onCurrentInkStrokeWidthChange:this.props.onCurrentInkStrokeWidthChange,onCurrentTextSizeChange:this.props.onCurrentTextSizeChange,onDeleteAnnotation:this.props.onDeleteAnnotation,onDeselectAnnotation:this.props.onDeselectAnnotation,onDraggingEnd:this.handleDraggingEnd,onDraggingStart:this.handleDraggingStart,onHoverAnnotation:this.props.onHoverAnnotation,onIsCommentingChange:this.props.onIsCommentingChange,onSelectAnnotation:this.props.onSelectAnnotation,onTextSelectionDisable:this.props.onDisableTextSelection,onTextSelectionEnable:this.props.onEnableTextSelection,onUpdateAnnotation:this.props.onUpdateAnnotation,pageNumber:this.props.pageNumber,selectionBoxPadding:m.SELECTION_BOX_PADDING,sessionUserObject:this.props.sessionUserObject,viewportHeight:this.props.viewportHeight,viewportScale:this.props.viewportScale,viewportWidth:this.props.viewportWidth},E=b.map(function(t){var n=t.id,o=y.filter(function(e){return t.id===e.inreplyto}),i={annotation:t,canEdit:e.props.sessionUserObject.user_id===t.user_id&&e.props.isAnnotatable,commentReplies:o,isHovered:!1===e.props.isDrawing&&e.props.hoveredAnnotationId===n,isSelected:e.props.selectedAnnotationId===n,key:t.id},s=r({},w,i,{pageHeight:e.props.pageHeight});switch(t.type){case"square":return a.default.createElement(c.default,r({},s,{onMoveAnnotation:e.handleMoveAnnotation}));case"highlight":return a.default.createElement(p.default,s);case"strikeout":return a.default.createElement(f.default,s);case"text":return a.default.createElement(d.default,r({},s,{onMoveAnnotation:e.handleMoveAnnotation}));case"freetext":return a.default.createElement(h.default,r({},s,{onMoveAnnotation:e.handleMoveAnnotation}));case"ink":return a.default.createElement(u.default,r({},s,{controlMode:e.props.controlMode,onMoveAnnotation:e.handleMoveAnnotation,onMultiStrokeAnnotation:e.props.onMultiStrokeAnnotation}));default:return""}}),C=(0,l.default)("PageAnnotations",{"is-drawing":this.props.isDrawing,"is-dragging":this.state.draggingAnnotationId});return a.default.createElement("div",{className:C,ref:this.setDivRef},this.state.hasError&&a.default.createElement("div",{style:{padding:"8px 12px",backgroundColor:"red",color:"white"}},(0,s.default)("There was an error rendering annotations")),!this.state.hasError&&E)}}]),t}();t.default=b},618:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=l(n(47)),a=l(n(420)),s=n(433);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.state={hasError:!1},o.handleMutations=function(e){window.requestAnimationFrame(function(){setTimeout(function(){for(var e=o.div.getElementsByTagName("a"),t=0;t<e.length;t++)e[t].setAttribute("target","_blank")},1)})},o.renderPDFAnnotationLayer=function(){o.div instanceof HTMLElement?(!function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(o.div),new s.PDFJS.AnnotationLayerBuilder({pageDiv:o.div,pdfPage:o.props.pdfPage,renderInteractiveForms:!1}).render(o.props.viewport)):console.warn("<div> was not ready in PDFAnnotationLayer")},o.setDiv=function(e){e instanceof HTMLElement&&(o.div=e)},u(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.pdfPage!==e.pdfPage||this.props.viewportHeight!==e.viewportHeight||this.props.viewportWidth!==e.viewportWidth}},{key:"componentDidCatch",value:function(e,t){this.setState(function(e){return o({},e,{hasError:!0})},function(){console.error("Error caught in PDFAnnotationLayer",{error:e,info:t})})}},{key:"componentDidUpdate",value:function(){this.renderPDFAnnotationLayerDebounced()}},{key:"componentWillMount",value:function(){var e=this;this.renderPDFAnnotationLayerDebounced=(0,a.default)(function(){e.renderPDFAnnotationLayerRequest=window.requestAnimationFrame(e.renderPDFAnnotationLayer)},200)}},{key:"componentWillUnmount",value:function(){this.mutationObserver.disconnect(),window.cancelAnimationFrame(this.renderPDFAnnotationLayerRequest)}},{key:"componentDidMount",value:function(){this.mutationObserver=new window.MutationObserver(this.handleMutations),this.div instanceof HTMLElement&&this.mutationObserver.observe(this.div,{childList:!0,subtree:!0}),this.renderPDFAnnotationLayerRequest=window.requestAnimationFrame(this.renderPDFAnnotationLayer)}},{key:"render",value:function(){return i.default.createElement("div",{className:"PDFAnnotationLayer-container",style:{position:"absolute",left:0,top:0},ref:this.setDiv})}}]),t}();t.default=c},620:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=s(n(47)),i=s(n(420)),a=n(619);function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.renderTextLayer=function(){!function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(n.div);var e=new a.PDFJS.TextLayerBuilder({textLayerDiv:n.div,pageIndex:n.props.pageNumber,viewport:n.props.viewport,enhanceTextSelection:n.state.isEnhancedTextSelectionEnabled});e.setTextContent(n.props.textContent),e.eventBus.on("textlayerrendered",function(){Array.from(n.div.children).forEach(function(e,t){n.state.isMSEdgeOrIE?(e.style.marginLeft=e.style.left,e.style.marginTop=e.style.top,e.style.float="left",e.style.marginBottom="-100%",e.style.marginRight="-100%"):e.classList.add("textLayer--absolute")})}),e.render(200)},n.setDiv=function(e){e instanceof HTMLElement&&(n.div=e)};var o=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,r=Boolean(window.MSInputMethodContext),i=!1===o&&!1===r;return n.state={isEnhancedTextSelectionEnabled:i,isMSEdgeOrIE:r},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"componentWillMount",value:function(){var e=this;this.renderTextLayerDebounced=(0,i.default)(function(){e.renderTextLayerRequest=window.requestAnimationFrame(e.renderTextLayer)},200)}},{key:"componentWillUnmount",value:function(){window.cancelAnimationFrame(this.renderTextLayerRequest)}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.viewportHeight!==e.viewportHeight||this.props.viewportWidth!==e.viewportWidth||this.props.pageNumber!==e.pageNumber||this.props.textContent!==e.textContent}},{key:"componentDidUpdate",value:function(){this.renderTextLayerDebounced()}},{key:"componentDidMount",value:function(){this.renderTextLayerRequest=window.requestAnimationFrame(this.renderTextLayer)}},{key:"render",value:function(){return r.default.createElement("div",{className:"TextLayer-container",style:{height:this.props.viewportHeight+"px",width:this.props.viewportWidth+"px",position:"absolute",left:0,top:0}},r.default.createElement("div",{className:"textLayer",ref:this.setDiv}))}}]),t}();t.default=l},621:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=s(n(47)),a=s(n(433));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,s=Array(i),u=0;u<i;u++)s[u]=arguments[u];return n=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.setContainer=function(e){r.container=e},r.renderPage=function(){if(!1!==r.props.shouldBeRendered){var e=r.props.page,t=r.container;return t.style.width=r.props.viewportWidth+"px",t.style.height=r.props.viewportHeight+"px",e.getOperatorList().then(function(t){return new a.default.SVGGraphics(e.commonObjs,e.objs).getSVG(t,r.props.viewport).then(function(e){r.setState(function(t){return o({},t,{svg:e})}),r.container.insertBefore(e,r.container.firstChild),r.container.childNodes.length>1&&r.container.removeChild(r.container.lastChild),r.props.onRendered&&r.props.onRendered()})})}},l(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.page!==e.page||this.props.viewportHeight!==e.viewportHeight||this.props.viewportWidth!==e.viewportWidth||this.props.shouldBeRendered!==e.shouldBeRendered&&!1===this.props.shouldBeRendered}},{key:"componentWillUnmount",value:function(){this.props.page.cleanup()}},{key:"componentDidMount",value:function(){this.renderPage()}},{key:"componentDidUpdate",value:function(){this.renderPage()}},{key:"render",value:function(){return i.default.createElement("div",{className:"Page-svg-container"},i.default.createElement("div",{className:"pageContainer",style:{boxSizing:"content-box",border:"1px solid #B9C0C6",backgroundColor:"white",height:this.props.viewportHeight,width:this.props.viewportWidth},ref:this.setContainer}))}}]),t}();t.default=u},622:function(e,t,n){(e.exports=n(137)(!1)).push([e.i,".Page-canvas-container{-webkit-box-sizing:border-box;box-sizing:border-box;border:1px solid #babfc6;overflow:hidden}",""])},623:function(e,t,n){var o=n(622);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(136)(o,r);o.locals&&(e.exports=o.locals)},624:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(623);var i=l(n(47)),a=l(n(420)),s=n(138);function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderPage=function(){[].concat(u(n.div.childNodes)).forEach(function(e){e.style.width=n.props.viewportWidth+"px",e.style.height=n.props.viewportHeight+"px"}),[].concat(u(n.div.childNodes)).slice(0,-1).forEach(function(e){e.parentNode.removeChild(e)}),n.finishRenderDebounced()},n.finishRender=function(){if(n.div instanceof HTMLElement&&!1!==n.props.shouldBeRendered){n.canvas=document.createElement("canvas"),n.canvas.className="pageContainer";var e,t,o,r=n.canvas.getContext("2d",{alpha:!1}),i=n.props.page,a=n.props.viewport.clone({scale:n.props.viewport.scale*(e=n.canvas,t=window.devicePixelRatio||1,o=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,t/o)});!function(e,t,n){e.dataset.originalHeight=t,e.dataset.originalWidth=n,e.height=t,e.width=n}(n.canvas,a.height,a.width),i.render({canvasContext:r,viewport:a}).then(function(){n.div instanceof HTMLElement&&(n.div.insertBefore(n.canvas,n.div.firstChild),n.div.childNodes.length>1&&n.div.removeChild(n.div.lastChild)),"function"==typeof n.props.onRendered&&n.props.onRendered()})}},n.setDiv=function(e){e instanceof HTMLElement&&(n.div=e)},n.state={maxViewportHeight:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"componentWillMount",value:function(){this.finishRenderDebounced=(0,a.default)(this.finishRender,275)}},{key:"componentWillUnmount",value:function(){this.props.page.cleanup()}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.viewportHeight>this.state.maxViewportHeight&&this.setState(function(e){return o({},e,{maxViewportHeight:t.props.viewportHeight})})}},{key:"shouldComponentUpdate",value:function(e){return this.props.page!==e.page||this.props.viewportHeight!==e.viewportHeight||this.props.viewportWidth!==e.viewportWidth||this.props.shouldBeRendered!==e.shouldBeRendered&&!1===this.props.shouldBeRendered}},{key:"componentDidMount",value:function(){this.renderPage()}},{key:"componentDidUpdate",value:function(){this.renderPage()}},{key:"render",value:function(){return i.default.createElement("div",{className:"Page-canvas-container",ref:this.setDiv,style:{height:this.props.viewportHeight+2*s.PAGE_BORDER_WIDTH,width:this.props.viewportWidth+2*s.PAGE_BORDER_WIDTH}})}}]),t}();t.default=c},627:function(e,t,n){(e.exports=n(137)(!1)).push([e.i,".page-number{margin-top:10px}.Page{margin:16px auto;position:relative;-webkit-box-sizing:content-box;box-sizing:content-box}.Page:focus{outline:none}.Page:focus .pageContainer{border-color:#7fbaf7}.pageContainer{width:100%;height:100%}.PDFAnnotationLayer-container .textWidgetAnnotation{font-family:auto;font-size:small}.Draw--highlight .PDFAnnotationLayer-container,.Draw--strikeout .PDFAnnotationLayer-container{pointer-events:none}.Page-inner{margin:auto;position:absolute}.Page-show-previous-comments-button{padding:0;margin:0;position:absolute;right:0;top:0;width:334px;background-color:#f2f2f2;color:#3e8bdc;height:32px;border:0 none;border-bottom:1px solid #a7aeb4;text-align:center;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;font-size:.9rem;cursor:pointer}",""])},628:function(e,t,n){var o=n(627);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(136)(o,r);o.locals&&(e.exports=o.locals)},629:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(628);var s=E(n(47)),l=E(n(400)),u=E(n(446)),c=E(n(624)),p=E(n(621)),f=E(n(620)),d=E(n(618)),h=E(n(617)),m=E(n(569)),g=E(n(564)),v=n(138),y=n(406),b=n(142),w=E(n(51));function E(e){return e&&e.__esModule?e:{default:e}}var C=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.updateVisuallyAnchoredAnnotation=function(){n.props.selectedAnnotationId&&n.props.annotations.find(function(e){return e.id===n.props.selectedAnnotationId})?n.setState({visuallyAnchoredAnnotationId:n.props.selectedAnnotationId}):null===n.state.visuallyAnchoredAnnotationId&&n.props.annotations.length>0&&n.setState({visuallyAnchoredAnnotationId:n.props.annotations[0].id})},n.scheduleRepositionCommentGroups=function(){!1!==n.state.manycommentsFeature&&(window.cancelAnimationFrame(n.repositionCommentGroupsRequest),n.repositionCommentGroupsRequest=window.requestAnimationFrame(n.repositionCommentGroups))},n.repositionCommentGroups=function(){var e=(0,y.pipe)([].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n.pageDiv.querySelectorAll(".CommentGroup"))),(0,y.sortBy)(function(e){return parseFloat(e.dataset.originalTop)})),t=document.querySelector("#Annotation-"+n.state.visuallyAnchoredAnnotationId+" .CommentGroup"),o=t?parseFloat(t.dataset.originalTop):-1*v.MARGIN_BETWEEN_COMMENT_GROUPS,r=t?parseFloat(t.clientHeight):0,i=(0,y.isNot)(t),a=(0,y.isOriginalTopAbove)(o),s=(0,y.isBelowOriginalTop)(o),l=e.filter(i),u=l.filter(a),c=l.filter(s),p=!1,f=null;if(null!=t){var d=parseFloat(t.dataset.originalTop);o=Math.max(d,n.state.someCommentsAboveThreshhold?v.MORE_COMMENTS_BUTTON_HEIGHT:0),t.style.top=o+"px"}var h=o+r,m=!0,g=!1,b=void 0;try{for(var w,E=c[Symbol.iterator]();!(m=(w=E.next()).done);m=!0){var C=w.value,_=parseFloat(C.dataset.originalTop)<=h+v.MARGIN_BETWEEN_COMMENT_GROUPS?h+v.MARGIN_BETWEEN_COMMENT_GROUPS:parseFloat(C.dataset.originalTop);C.style.top=_+"px",h=_+C.clientHeight}}catch(e){g=!0,b=e}finally{try{!m&&E.return&&E.return()}finally{if(g)throw b}}var A=0,O=!0,S=!1,x=void 0;try{for(var T,P=u[Symbol.iterator]();!(O=(T=P.next()).done);O=!0){var k=T.value,D=parseFloat(k.dataset.originalTop)<A+v.MARGIN_BETWEEN_COMMENT_GROUPS?A+v.MARGIN_BETWEEN_COMMENT_GROUPS:parseFloat(k.dataset.originalTop);k.dataset.tentativeTop=D,A=D+k.clientHeight}}catch(e){S=!0,x=e}finally{try{!O&&P.return&&P.return()}finally{if(S)throw x}}var N=o,M=!0,R=!1,j=void 0;try{for(var I,L=u.slice().reverse()[Symbol.iterator]();!(M=(I=L.next()).done);M=!0){var F=I.value,B=parseFloat(F.dataset.tentativeTop),H=F.clientHeight,G=void 0;(G=B+H+v.MARGIN_BETWEEN_COMMENT_GROUPS<=N?B:N-H-v.MARGIN_BETWEEN_COMMENT_GROUPS)<6&&(p=!0,f=f||F.dataset.annotationId),F.style.top=G+"px",N=G}}catch(e){R=!0,j=e}finally{try{!M&&L.return&&L.return()}finally{if(R)throw j}}n.state.someCommentsAboveThreshhold!==p&&n.setState({someCommentsAboveThreshhold:p}),n.state.lowestCommentAboveThreshhold!==f&&n.setState({lowestCommentAboveThreshhold:f})},n.updateRenderOutput=function(){n.setState(function(e){return i({},e,{renderMethod:window.location.hash.includes("svg")?"svg":"canvas",manycommentsFeature:window.location.hash.includes("manycomments")})})},n.enableTextSelection=function(){n.setState(function(e){return i({},e,{isTextSelectionEnabled:!0})})},n.disableTextSelection=function(){n.setState(function(e){return i({},e,{isTextSelectionEnabled:!1})})},n.handleMultiStrokeAnnotation=function(e){n.setState(function(t){return i({},t,{multiStrokeAnnotationId:e})})},n.handleDrawingStart=function(){n.props.onSelectAnnotation(null),n.props.onHoverAnnotation(null),n.setState(function(e){return i({},e,{isDrawing:!0})})},n.handleCreateAnnotation=function(e){var t=i({},e,{id:"string"==typeof e.id?e.id:u.default.v4(),page:n.props.pageNumber}),o=n.state.pageViewport?n.state.pageViewport.height:n.props.viewportHeight;"ink"===t.type&&t.inklist&&t.inklist.gestures&&t.inklist.gestures.length>1?n.props.onUpdateAnnotation(o,n.props.viewportScale,i({},t,{user_name:n.props.sessionUserObject.user_name,user_id:n.props.sessionUserObject.user_id}),Boolean(n.state.multiStrokeAnnotationId)):n.props.onCreateAnnotation(o,n.props.viewportScale,i({},t,{user_name:n.props.sessionUserObject.user_name,user_id:n.props.sessionUserObject.user_id}),Boolean(n.state.multiStrokeAnnotationId)),window.getSelection().removeAllRanges()},n.handleDrawingEnd=function(){n.setState(function(e){return i({},e,{isDrawing:!1})})},n.ensurePdfPageLoaded=function(){!n.state.pdfPage&&n.props.pdfDocument&&n.props.pdfDocument.getPage(n.props.pageNumber+1).then(function(e){var t=e.getViewport(n.props.viewportScale);n.setState(function(n){return i({},n,{pdfPage:e,pageViewport:t})},function(){n.loadTextLayer()})}).catch(function(e){console.log("GET_PAGE_ERROR",e)})},n.handleVisiblityChange=function(e){if(n.lastIntersectionRatio!==e){var t=Boolean(e),o=n.state.wasVisibleSinceLastScale||t;n.setState({isVisible:t,wasVisibleSinceLastScale:o},function(){n.props.onVisibilityChange(n.props.pageNumber,e),n.lastIntersectionRatio=e})}},n.loadTextLayer=function(){n.state.pdfPage&&n.state.pdfPage.getTextContent({normalizeWhitespace:!0}).then(function(e){n.setState(function(t){return i({},t,{textContent:e})})}).catch(function(e){console.error("GET_TEXT_CONTENT_ERROR",e)})},n.handleRendered=function(){0===n.props.pageNumber&&window.DocViewer&&!1===n.state.isCanvasRendered&&(0,b.sendMetric)("first_page_rendered",Date.now()-window.DocViewer.start,n.props.sessionId),n.setState(function(e){return i({},e,{isCanvasRendered:!0})})},n.handlePreviousCommentButtonClick=function(e){e.preventDefault();var t=n.props.annotations.reduce(y.splitRootAnnotationsAndReplies,[[],[]]),o=r(t,2),i=o[0],a=o[1],s=(0,y.hasReplyIn)(i);a.filter(s).sort(y.compareRectY).map(function(e){return e.id}).indexOf(n.state.visuallyAnchoredAnnotationId);n.state.lowestCommentAboveThreshhold&&n.setState({visuallyAnchoredAnnotationId:n.state.lowestCommentAboveThreshhold},function(){return n.props.onSelectAnnotation(n.state.lowestCommentAboveThreshhold)})},n.setDiv=function(e){n.pageDiv=e,n.setState({pageDiv:e})},n.state={draggingAnnotationId:null,isCanvasRendered:!1,isDrawing:!1,isTextSelectionEnabled:!0,isVisible:0===n.props.pageNumber,lowestCommentAboveThreshhold:null,manycommentsFeature:window.location.hash.includes("manycomments"),multiStrokeAnnotationId:null,pageDiv:null,pageViewport:null,pdfPage:null,renderMethod:window.location.hash.includes("svg")?"svg":"canvas",textContent:null,visuallyAnchoredAnnotationId:null,wasVisibleSinceLastScale:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.PureComponent),a(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,n=e.viewportHeight!==this.props.viewportHeight,r=e.viewportWidth!==this.props.viewportWidth;if(this.state.wasVisibleSinceLastScale&&(n||r)&&this.setState(function(e){return i({},e,{wasVisibleSinceLastScale:!1})}),"object"===o(this.state.pdfPage)&&e.viewportScale!==this.props.viewportScale){if(void 0===this.state.pdfPage)return;this.setState(function(n){return i({},n,{pageViewport:null!==n.pdfPage&&"object"===o(n.pdfPage)?n.pdfPage.getViewport(e.viewportScale):t.state.pageViewport})})}e.selectedAnnotationId!==this.props.selectedAnnotationId&&this.props.annotations.length>0&&setTimeout(function(){return t.updateVisuallyAnchoredAnnotation()},50)}},{key:"componentWillMount",value:function(){var e=0===this.props.pageNumber;this.lastIntersectionRatio=e?.9:0}},{key:"componentDidMount",value:function(){this.ensurePdfPageLoaded(),this.props.currentPageNum===this.props.pageNumber+1&&this.props.onPageResize(),window.addEventListener("hashchange",this.updateRenderOutput)}},{key:"componentDidUpdate",value:function(){!0===this.state.manycommentsFeature&&(this.repositionCommentGroups(),setTimeout(this.repositionCommentGroups,50),setTimeout(this.repositionCommentGroups,200),setTimeout(this.repositionCommentGroups,500))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("hashchange",this.updateRenderOutput)}},{key:"render",value:function(){var e=this.state.pageViewport?this.state.pageViewport.width:0,t=this.state.pageViewport?this.state.pageViewport.height:0,n=this.props.currentPageNum-2===this.props.pageNumber,o=this.props.currentPageNum===this.props.pageNumber,r=this.state.isVisible||this.state.wasVisibleSinceLastScale||o||n,i=(0,y.getPageWidthAfterScaling)(this.props.displayCommentRegion,e);return s.default.createElement("div",{className:(0,l.default)("Page","PageComponent",{"Page--not-rendered":!1===this.state.isCanvasRendered,"Page--manycomments":this.state.manycommentsFeature,"selection-disabled":!1===this.state.isTextSelectionEnabled,"is-multistroke-drawing":Boolean(this.state.multiStrokeAnnotationId)}),id:"page-"+this.props.pageNumber,ref:this.setDiv,style:{height:t+2*v.PAGE_BORDER_WIDTH+"px",width:i+2*v.PAGE_BORDER_WIDTH+"px"},tabIndex:"-1"},this.state.pageDiv instanceof HTMLElement&&s.default.createElement(g.default,{onVisibilityChange:this.handleVisiblityChange,pageDiv:this.state.pageDiv,pageNumber:this.props.pageNumber}),this.state.pdfPage&&"svg"===this.state.renderMethod&&s.default.createElement(p.default,{shouldBeRendered:r,page:this.state.pdfPage,viewport:this.state.pageViewport,viewportHeight:t,viewportWidth:e,viewportScale:this.props.viewportScale,onRendered:this.handleRendered}),this.state.pdfPage&&"canvas"===this.state.renderMethod&&s.default.createElement(c.default,{shouldBeRendered:r,page:this.state.pdfPage,viewport:this.state.pageViewport,viewportHeight:t,viewportWidth:e,viewportScale:this.props.viewportScale,onRendered:this.handleRendered}),this.state.pdfPage&&this.state.textContent&&s.default.createElement(m.default,{currentBgColor:this.props.currentBgColor,currentColor:this.props.currentColor,currentFont:this.props.currentFont,height:t,isHoveringOverAnnotation:Boolean(this.props.hoveredAnnotationId),multiStrokeAnnotationId:this.state.multiStrokeAnnotationId,onChange:this.handleCreateAnnotation,onDrawingEnd:this.handleDrawingEnd,onDrawingStart:this.handleDrawingStart,onMultiStrokeAnnotation:this.handleMultiStrokeAnnotation,shouldBeRendered:r,strokeWidth:this.props.strokeWidth,style:{position:"absolute",height:t+"px",width:e+"px"},type:this.props.controlMode,viewportHeight:t,viewportScale:this.props.viewportScale,viewportWidth:e,width:e},s.default.createElement(f.default,{pageNumber:this.props.pageNumber,textContent:this.state.textContent,viewport:this.state.pageViewport,viewportHeight:t,viewportWidth:e,viewportScale:this.props.viewportScale}),r&&this.state.isCanvasRendered&&null!==this.state.pdfPage&&s.default.createElement(d.default,{pdfPage:this.state.pdfPage,viewport:this.state.pageViewport,viewportHeight:t,viewportWidth:e,viewportScale:this.props.viewportScale}),r&&this.state.isCanvasRendered&&s.default.createElement(h.default,{annotations:this.props.annotations,controlMode:this.props.controlMode,hoveredAnnotationId:this.props.hoveredAnnotationId,isAnnotatable:this.props.isAnnotatable,isDrawing:this.state.isDrawing,multiStrokeAnnotationId:this.state.multiStrokeAnnotationId,onCreateAnnotation:this.props.onCreateAnnotation,onCurrentBgColorChange:this.props.onCurrentBgColorChange,onCurrentColorChange:this.props.onCurrentColorChange,onCurrentInkStrokeWidthChange:this.props.onCurrentInkStrokeWidthChange,onCurrentTextSizeChange:this.props.onCurrentTextSizeChange,onDeleteAnnotation:this.props.onDeleteAnnotation,onDeselectAnnotation:this.props.onDeselectAnnotation,onDisableTextSelection:this.disableTextSelection,onEnableTextSelection:this.enableTextSelection,onHoverAnnotation:this.props.onHoverAnnotation,onIsCommentingChange:this.props.onIsCommentingChange,onMultiStrokeAnnotation:this.handleMultiStrokeAnnotation,onSelectAnnotation:this.props.onSelectAnnotation,onUpdateAnnotation:this.props.onUpdateAnnotation,pageHeight:t,pageNumber:this.props.pageNumber,selectedAnnotationId:this.props.selectedAnnotationId,sessionUserObject:this.props.sessionUserObject,viewportScale:this.props.viewportScale,viewportHeight:t,viewportWidth:e})),this.state.manycommentsFeature&&this.state.someCommentsAboveThreshhold&&s.default.createElement("button",{className:"Page-show-previous-comments-button",onClick:this.handlePreviousCommentButtonClick},(0,w.default)("See previous comments for page {pageNumber}",{pageNumber:this.props.pageNumber+1})))}}]),t}();t.default=C},631:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(47)),i=u(n(51)),a=u(n(400)),s=u(n(405)),l=u(n(447));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p={Small:r.default.createElement("svg",{width:18,height:18},r.default.createElement("path",{d:"M2.207 17.207L.793 15.793 16.639-.054l1.415 1.415z",fill:"#384A58",fillRule:"nonzero"})),Medium:r.default.createElement("svg",{width:19,height:19},r.default.createElement("path",{d:"M2.914 18.914L.086 16.086 15.932.239l2.829 2.829z",fill:"#384A58",fillRule:"nonzero"})),Large:r.default.createElement("svg",{width:21,height:21},r.default.createElement("path",{d:"M4.975 20.975l-4.95-4.95L15.872.18l4.95 4.95z",fill:"#384A58",fillRule:"nonzero"}))},f=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.handleClick=function(e){o.props.isSelected||o.props.onCurrentInkStrokeWidthChange(o.props.width)},c(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.PureComponent),o(t,[{key:"render",value:function(){var e=this.props.sizeValue?(0,i.default)(this.props.sizeValue):void 0,t=(0,i.default)("Annotation stroke width {strokeWidth}",{strokeWidth:e}),n=(0,a.default)("InkStrokeWidthButton",{selected:this.props.isSelected});return r.default.createElement(l.default,{title:e,ariaLabel:t,onClick:this.handleClick,className:n},function(t){return r.default.createElement("div",{className:"InkStrokeWidthButton-outer"},p[e])})}}]),t}();t.default=f,f.propTypes={width:s.default.number,sizeValue:s.default.string,isSelected:s.default.bool,onCurrentInkStrokeWidthChange:s.default.func}},632:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(47),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){var e=this.props.height,t=this.props.width;return a.default.createElement("svg",{width:t,height:e,viewBox:"0 0 19 18",version:"1.1",preserveAspectRatio:"xMidYMin"},a.default.createElement("g",{id:"Free-Text-02",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",transform:"translate(-619.000000, -114.000000)"},a.default.createElement("g",{id:"Color-Details",transform:"translate(0.000000, 98.000000)",fill:"currentColor"},a.default.createElement("g",{id:"Sizing",transform:"translate(519.000000, 13.000000)"},a.default.createElement("path",{d:"M105.392613,15.0779754 L104.666211,17.24487 C104.600547,17.4500694 104.532832,17.6901491 104.463064,17.9651163 C104.393297,18.2400835 104.358413,18.4801631 104.358413,18.6853625 C104.358413,18.849522 104.391245,18.9931594 104.456908,19.1162791 C104.522572,19.2393987 104.608755,19.3399449 104.715458,19.4179207 C104.822162,19.4958964 104.943228,19.5554034 105.078659,19.5964432 C105.214091,19.6374831 105.355676,19.6580027 105.50342,19.6580027 L106.562244,19.6580027 L106.562244,21 L100,21 L100,19.6580027 L100.307798,19.6580027 C100.529413,19.6580027 100.732557,19.6333792 100.917237,19.5841313 C101.101916,19.5348835 101.274281,19.4425451 101.434337,19.3071135 C101.594392,19.1716819 101.746237,18.9849533 101.889877,18.746922 C102.033516,18.5088907 102.179206,18.2010963 102.326949,17.8235294 L107.793434,3 L111.253078,3 L116.522572,17.8481532 C116.645691,18.2010962 116.774965,18.4945269 116.910397,18.7284542 C117.045828,18.9623815 117.19357,19.1470581 117.353625,19.2824897 C117.513681,19.4179213 117.683994,19.5143636 117.864569,19.5718194 C118.045145,19.6292753 118.233925,19.6580027 118.430917,19.6580027 L118.886457,19.6580027 L118.886457,21 L110.563611,21 L110.563611,19.6580027 L111.548564,19.6580027 C111.671683,19.6580027 111.798905,19.6395351 111.930233,19.6025992 C112.06156,19.5656633 112.178522,19.5082083 112.281122,19.4302326 C112.383721,19.3522568 112.467852,19.2517106 112.533516,19.128591 C112.59918,19.0054713 112.632011,18.85773 112.632011,18.6853625 C112.632011,18.4801631 112.607387,18.2831747 112.55814,18.0943912 C112.508892,17.9056078 112.459645,17.7414508 112.410397,17.6019152 L111.52394,15.0779754 L105.392613,15.0779754 Z M109.689466,9.40218878 C109.599179,9.11490964 109.50684,8.81327107 109.412449,8.49726402 C109.318057,8.18125697 109.223667,7.85909877 109.129275,7.53077975 C109.034883,7.20246074 108.944597,6.87619861 108.858413,6.55198358 C108.772229,6.22776856 108.696307,5.91792213 108.630643,5.62243502 C108.556771,5.87688226 108.470589,6.15594923 108.372093,6.45964432 C108.273597,6.76333941 108.168947,7.0752378 108.05814,7.39534884 L107.725718,8.35567715 C107.614911,8.67578819 107.51026,8.98358265 107.411765,9.27906977 L105.922025,13.5389877 L111.019152,13.5389877 L109.689466,9.40218878 Z",id:"A"})))))}}]),t}();t.default=s},633:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=c(n(47)),i=c(n(51)),a=c(n(400)),s=c(n(405)),l=c(n(447)),u=c(n(632));function c(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f={Small:10,Medium:15,Large:18},d=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.handleClick=function(e){o.props.isSelected||o.props.onCurrentTextSizeChange(o.props.font)},p(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.PureComponent),o(t,[{key:"render",value:function(){var e=this.props.sizeValue?(0,i.default)(this.props.sizeValue):void 0,t=(0,i.default)("Annotation markup text size {textSize}",{textSize:e}),n=(0,a.default)("TextSizeButton",{selected:this.props.isSelected}),o=f[this.props.sizeValue];return r.default.createElement(l.default,{title:e,ariaLabel:t,onClick:this.handleClick,className:n},function(e){return r.default.createElement("div",{className:"TextSizeButton-outer"},r.default.createElement(u.default,{height:o,width:o}))})}}]),t}();t.default=d,d.propTypes={font:s.default.string,sizeValue:s.default.string,isSelected:s.default.bool,onCurrentTextSizeChange:s.default.func}},634:function(e,t,n){(e.exports=n(137)(!1)).push([e.i,".ColorButton{border:0 none;background-color:#fff;padding-left:0;padding-right:0;-webkit-touch-callout:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.ColorButton-inner{display:inline-block;padding:0 2px;margin:8px 0}.ColorButton-selection-circle{r:10.5}.ColorButton:active .ColorButton-selection-circle{r:11}.ColorButton:focus .ColorButton-selection-circle{stroke:#38a7e8}.ColorButton-main-circle{r:8.5}.ColorButton:active .ColorButton-main-circle{r:9.25}.ColorButton:focus{outline:none}.ColorButton:-moz-focusring{outline:none}.ColorButton::-moz-focus-inner{border:0}",""])},635:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(485);var r=l(n(47)),i=l(n(51)),a=n(138),s=l(n(447));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.handleClick=function(e){o.props.onCurrentColorChange(o.props.colorValue)},u(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.PureComponent),o(t,[{key:"render",value:function(){var e=this,t=a.FRIENDLY_COLORS[this.props.colorValue]?(0,i.default)(a.FRIENDLY_COLORS[this.props.colorValue]):void 0,n=r.default.createElement("circle",{className:"ColorButton-main-circle",cx:"12.5",cy:"12.5",r:"8.5",fill:this.props.colorValue});"transparent"===this.props.colorValue&&(n=r.default.createElement("g",{stroke:"red",strokeWidth:"1.5"},r.default.createElement("circle",{cx:"12.5",cy:"12.5",r:"7",stroke:"red",strokeWidth:"1.5",fill:"white"}),r.default.createElement("line",{x1:"7",y1:"7",x2:"18",y2:"18"}))),"#FFFFFF"===this.props.colorValue&&(n=r.default.createElement("circle",{className:"ColorButton-main-circle",cx:"12.5",cy:"12.5",r:"7",stroke:"#595959",fill:"#FFFFFF"}));var o=this.props.isBackground?(0,i.default)("Annotation markup background color {colorName}",{colorName:t}):(0,i.default)("Annotation markup color {colorName}",{colorName:t});return r.default.createElement(s.default,{title:t,ariaLabel:o,onClick:this.handleClick,className:"ColorButton"},function(t){return r.default.createElement("div",{className:"ColorButton-inner"},r.default.createElement("svg",{style:{width:"25px",height:"25px"}},(e.props.isSelected||t.isHovered||t.isFocused)&&r.default.createElement("circle",{className:"ColorButton-selection-circle",cx:"12.5",cy:"12.5",r:"10.5",stroke:t.isHovered?"#aaa":"#717F8A",strokeWidth:"2.5",fill:"none"}),n))})}}]),t}();t.default=c},636:function(e,t,n){(e.exports=n(137)(!1)).push([e.i,".SecondaryControls{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#fff;border-bottom:1px solid #d2d1d1;position:fixed;left:0;right:0;pointer-events:all;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;z-index:10;cursor:auto;-ms-touch-action:none;touch-action:none;overflow-x:auto}.SecondaryControls-label{margin-left:30px;color:#556572;font-size:14px}.SecondaryControls-buttons{margin-left:8px;-ms-flex-negative:0;flex-shrink:0}.SecondaryControls-annotation,.SecondaryControls-buttons{display:-webkit-box;display:-ms-flexbox;display:flex;cursor:default;-webkit-box-align:center;-ms-flex-align:center;align-items:center}",""])},637:function(e,t,n){var o=n(636);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(136)(o,r);o.locals&&(e.exports=o.locals)},638:function(e,t,n){(e.exports=n(137)(!1)).push([e.i,".DocumentControls{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}",""])},639:function(e,t,n){var o=n(638);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(136)(o,r);o.locals&&(e.exports=o.locals)},640:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(639);var r=u(n(51)),i=u(n(47)),a=n(138),s=u(n(559)),l=u(n(492));u(n(491));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=!!window.MSInputMethodContext&&!!document.documentMode,f=s.default.enabled&&!1===p,d=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=o=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.scaleUp=function(){o.props.onPageScale(a.SCALE_MODIFIER)},o.scaleDown=function(){o.props.onPageScale(-a.SCALE_MODIFIER)},o.toggleFullscreen=function(){o.props.toggleFullscreen()},c(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.PureComponent),o(t,[{key:"render",value:function(){var e=this.props.currentPageScale<=a.MIN_SCALE+a.SCALE_MODIFIER,t=this.props.currentPageScale>=a.MAX_SCALE-a.SCALE_MODIFIER,n=this.props.isFullscreen?(0,r.default)("Exit Full Screen"):(0,r.default)("Enter Full Screen");return i.default.createElement("nav",{className:"DocumentControls",style:{marginRight:"12px"}},i.default.createElement("div",{style:{display:"inline-flex",alignItems:"center",userSelect:"none"}},i.default.createElement("button",{className:"AnnotationControlButton","aria-label":(0,r.default)("Zoom Out"),title:(0,r.default)("Zoom Out"),disabled:e,"aria-disabled":e,onClick:this.scaleDown},i.default.createElement("div",{className:"AnnotationControlButton-outer"},i.default.createElement("div",{className:"AnnotationControlButton-inner"},i.default.createElement("svg",{width:"14",height:"2",viewBox:"0 0 14 2"},i.default.createElement("path",{d:"M0 0h14v2H0z",fill:"#F5F5F5",fillRule:"evenodd"}))))),i.default.createElement("span",{style:{textTransform:"uppercase",fontSize:"0.75rem",color:"#EEEEEF",marginLeft:"4px",marginRight:"4px"},"aria-hidden":"true"},(0,r.default)("Zoom")),i.default.createElement("button",{className:"AnnotationControlButton","aria-label":(0,r.default)("Zoom In"),title:(0,r.default)("Zoom In"),disabled:t,"aria-disabled":t,onClick:this.scaleUp},i.default.createElement("div",{className:"AnnotationControlButton-outer"},i.default.createElement("div",{className:"AnnotationControlButton-inner"},i.default.createElement("svg",{width:"14",height:"14",viewBox:"0 0 14 14"},i.default.createElement("path",{d:"M8 6V0H6v6H0v2h6v6h2V8h6V6H8z",fill:"#F5F5F5"})))))),i.default.createElement(l.default,{style:{marginLeft:"8px",marginRight:"4px"}}),f&&i.default.createElement("div",{className:"ViewerControls--page-controls"},i.default.createElement("button",{"aria-label":n,className:"AnnotationControlButton",onClick:this.toggleFullscreen,title:n},i.default.createElement("div",{className:"AnnotationControlButton-outer"},i.default.createElement("div",{className:"AnnotationControlButton-inner"},this.props.isFullscreen?i.default.createElement("svg",{width:"17px",height:"17px",viewBox:"0 0 17 17"},i.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},i.default.createElement("g",{transform:"translate(-698.000000, -930.000000)",fill:"#2B3B46"},i.default.createElement("path",{d:"M713.690612,930 L715.000371,931.309759 L710.33285,935.977279 L713.335847,935.977279 L713.335847,937.830763 L707.169607,937.830763 L707.169607,931.663597 L709.023092,931.663597 L709.023092,934.66752 L713.690612,930 Z M699.663597,939.170163 L705.829837,939.170163 L705.829837,945.335476 L703.978205,945.335476 L703.978205,942.33248 L699.309759,947 L698,945.690241 L702.668447,941.022721 L699.663597,941.022721 L699.663597,939.170163 Z",fill:"#F5F5F5"})))):i.default.createElement("svg",{width:"17px",height:"17px",viewBox:"0 0 17 17"},i.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},i.default.createElement("polygon",{points:"10.1523248 -0.000102881281 10.1523248 2.05752274 13.4887648 2.05752274 2.05762562 13.4876331 2.05762562 10.1522219 0 10.1522219 0 17 6.84983569 17 6.84983569 14.9423744 3.51236694 14.9423744 14.9435061 3.51226405 14.9435061 6.848704 17.0001029 6.848704 17.0001029 -0.000102881281",fill:"#F5F5F5"})))))),i.default.createElement(l.default,{style:{marginLeft:"8px",marginRight:"4px"}})))}}]),t}();t.default=d},641:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(47),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){return a.default.createElement("svg",{width:"13px",height:"17px",viewBox:"0 0 13 17",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},a.default.createElement("g",{stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.default.createElement("g",{transform:"translate(-18.000000, -16.000000)",fill:"currentColor"},a.default.createElement("polygon",{points:"18 16 30.6285714 16 30.6285714 20.4442857 28.8314286 20.4442857 28.8314286 17.7971429 25.31 17.7971429 25.31 31.2028571 27.9814286 31.2028571 27.9814286 33 20.6228571 33 20.6228571 31.2028571 23.2942857 31.2028571 23.2942857 17.7971429 19.7971429 17.7971429 19.7971429 20.4442857 18 20.4442857"}))))}}]),t}();t.default=s},642:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(47),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){return a.default.createElement("svg",{width:"12",height:"21",viewBox:"0 0 12 21",xmlns:"http://www.w3.org/2000/svg"},a.default.createElement("path",{d:"M0 0v15.89l3.604-3.477L6.97 20.42l2.62-1.098-3.237-7.697H11.6",fill:"currentColor",fillRule:"evenodd"}))}}]),t}();t.default=s},643:function(e,t,n){(e.exports=n(137)(!1)).push([e.i,".AnnotationControlButton{width:48px;padding:0;border:0 none;color:#fff;background-color:#556572;margin-top:0;margin-bottom:0;cursor:pointer;-webkit-box-sizing:content-box;box-sizing:content-box;-webkit-touch-callout:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.AnnotationControlButton:disabled{opacity:.4}.AnnotationControlButton-outer{width:44px;margin:1px;border:1px solid #556572}.AnnotationControlButton-inner,.AnnotationControlButton-outer{-webkit-box-sizing:content-box;box-sizing:content-box;display:-webkit-box;display:-ms-flexbox;display:flex}.AnnotationControlButton-inner{margin:0;height:44px;width:48px;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.AnnotationControlButton-inner img,.AnnotationControlButton-inner svg{fill:red}.AnnotationControlButton:hover:enabled{background-color:#5f707b}.AnnotationControlButton.selected:hover:enabled{background-color:#f5f5f5;border-color:#f5f5f5}.AnnotationControlButton:hover:enabled .AnnotationControlButton-outer{border-color:#5f707b}.AnnotationControlButton:focus{border-color:#b5bcc2;outline:none}.AnnotationControlButton:focus .AnnotationControlButton-outer{border-color:#38a7e8}.AnnotationControlButton:active .AnnotationControlButton-outer{-webkit-box-shadow:inset 0 0 2px #000;box-shadow:inset 0 0 2px #000}.AnnotationControlButton.selected{outline:none;background-color:#fff}.AnnotationControlButton.selected .AnnotationControlButton-outer{border-color:#fff;border:1px solid #fff;color:#556572}.AnnotationControlButton.selected:focus .AnnotationControlButton-outer{border:1px solid #38a7e8}",""])},644:function(e,t,n){var o=n(643);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(136)(o,r);o.locals&&(e.exports=o.locals)},645:function(e,t,n){(e.exports=n(137)(!1)).push([e.i,".AnnotationControls{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}",""])},646:function(e,t,n){var o=n(645);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(136)(o,r);o.locals&&(e.exports=o.locals)},647:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(646);var r=h(n(51)),i=h(n(47)),a=h(n(491)),s=h(n(642)),l=h(n(490)),u=h(n(489)),c=h(n(488)),p=h(n(487)),f=h(n(486)),d=h(n(641));function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.toggleAnnotationType=function(e,t){t.stopPropagation(),o.props.onChange(e)},m(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.PureComponent),o(t,[{key:"render",value:function(){return i.default.createElement("nav",{className:"AnnotationControls",style:{marginRight:"12px"}},this.props.isAnnotatable&&[i.default.createElement(a.default,{key:"select","aria-label":(0,r.default)("Enter selection mode"),tooltip:(0,r.default)("Selection"),controlMode:"selection",currentControlMode:this.props.controlMode,onClick:this.toggleAnnotationType.bind(this,"selection")},i.default.createElement(s.default,null)),i.default.createElement(a.default,{key:"point","aria-label":(0,r.default)("Enter point annotation mode"),tooltip:(0,r.default)("Point annotation"),controlMode:"point",currentControlMode:this.props.controlMode,onClick:this.toggleAnnotationType.bind(this,"point")},i.default.createElement(l.default,null)),i.default.createElement(a.default,{key:"highlight","aria-label":(0,r.default)("Enter highlight annotation mode"),tooltip:(0,r.default)("Highlight annotation"),controlMode:"highlight",currentControlMode:this.props.controlMode,onClick:this.toggleAnnotationType.bind(this,"highlight")},i.default.createElement(u.default,null)),i.default.createElement(a.default,{key:"freetext","aria-label":(0,r.default)("Enter freetext annotation mode"),tooltip:(0,r.default)("Freetext annotation"),controlMode:"freetext",currentControlMode:this.props.controlMode,onClick:this.toggleAnnotationType.bind(this,"freetext")},i.default.createElement(d.default,null)),i.default.createElement(a.default,{key:"strikeout","aria-label":(0,r.default)("Enter strikeout annotation mode"),tooltip:(0,r.default)("Strikeout annotation"),controlMode:"strikeout",currentControlMode:this.props.controlMode,onClick:this.toggleAnnotationType.bind(this,"strikeout")},i.default.createElement(c.default,null)),i.default.createElement(a.default,{key:"draw","aria-label":(0,r.default)("Enter free draw annotation mode"),tooltip:(0,r.default)("Free draw annotation"),controlMode:"ink",currentControlMode:this.props.controlMode,onClick:this.toggleAnnotationType.bind(this,"ink")},i.default.createElement(p.default,null)),i.default.createElement(a.default,{key:"area","aria-label":(0,r.default)("Enter area annotation mode"),tooltip:(0,r.default)("Area annotation"),controlMode:"area",currentControlMode:this.props.controlMode,onClick:this.toggleAnnotationType.bind(this,"area")},i.default.createElement(f.default,null))])}}]),t}();t.default=g},648:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(47),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){var e="string"==typeof this.props.color?this.props.color:"#FFFFFF";return a.default.createElement("svg",{width:"18px",height:"17px",viewBox:"0 0 18 17",xmlns:"http://www.w3.org/2000/svg"},a.default.createElement("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},a.default.createElement("g",{id:"More",transform:"translate(-16.000000, -16.000000)",fillRule:"nonzero",fill:e},a.default.createElement("path",{d:"M23.7071,24.6555864 L23.7071,16 L25.7071,16 L25.7071,24.6155864 L27.9799932,22.3426932 L29.3942068,23.7569068 L24.6871,28.4640136 L19.9799932,23.7569068 L21.3942068,22.3426932 L23.7071,24.6555864 Z M20.1213136,31 L29.2928864,31 L31.9999932,28.2928932 L33.4142068,29.7071068 L30.1213136,33 L19.2928864,33 L15.9999932,29.7071068 L17.4142068,28.2928932 L20.1213136,31 Z",id:"download"}))))}}]),t}();t.default=s},649:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=s(n(51)),i=s(n(47)),a=s(n(648));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.clickHandler=function(e){return function(t){t.preventDefault(),e()}},l(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),o(t,[{key:"render",value:function(){var e=(0,r.default)("Download with Annotations & Comments");return i.default.createElement("div",null,i.default.createElement("button",{className:"download-button--button",onClick:this.clickHandler(this.props.generateMergedPdf),title:this.props.text||e,"aria-label":this.props.text||e},i.default.createElement(a.default,{color:this.props.color||"#ffffff"})))}}]),t}();t.default=u},650:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.statuses=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=s(n(51)),i=s(n(47)),a=s(n(649));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.statuses=["None","Waiting","Done","Error"];var u=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=o=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),o.renderWaiting=function(){return i.default.createElement("div",null,(0,r.default)("Please wait..."))},o.renderError=function(){return i.default.createElement(a.default,{generateMergedPdf:o.props.generateMergedPdf,text:(0,r.default)("Download annotated PDF")})},l(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),o(t,[{key:"renderNone",value:function(){return i.default.createElement(a.default,{generateMergedPdf:this.props.generateMergedPdf,text:(0,r.default)("Download annotated PDF")})}},{key:"render",value:function(){switch(this.props.mergedPdfStatus){case"None":return this.renderNone();case"Waiting":return this.renderWaiting();case"Error":return this.renderError();case"Done":return this.renderNone();default:return i.default.createElement("span",null)}}}]),t}();t.default=u},651:function(e,t,n){(e.exports=n(137)(!1)).push([e.i,".download-button--icon{color:inherit;display:inline-block;font-size:24px;margin-right:12px;vertical-align:top}.download-button--content{padding:24px}.download-button--list{list-style:none;margin:0;padding:0}.download-button--item{font-size:13px;color:#394b58}.download-button--item+.download-button--item{border-top:1px solid #b9c0c6;margin-top:12px;padding-top:12px}.download-button--button{background-color:transparent;font-size:16px;border:none;height:48px;width:48px}.download-button--button:hover{background-color:#5f707b}",""])},652:function(e,t,n){var o=n(651);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(136)(o,r);o.locals&&(e.exports=o.locals)},653:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(652);var r=a(n(47)),i=a(n(650));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){return r.default.createElement("div",{style:{minWidth:"50px",paddingLeft:"10px",paddingRight:"10px",textAlign:"center"}},r.default.createElement(i.default,{generateMergedPdf:this.props.generateMergedPdf,annotatedPdfUrl:this.props.annotatedPdfUrl,mergedPdfStatus:this.props.mergedPdfStatus,mergedPdfError:this.props.mergedPdfError}))}}]),t}();t.default=s},654:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(47),a=(o=i)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),r(t,[{key:"render",value:function(){var e={},t=[];a.default.Children.forEach(this.props.children,function(n){if("string"==typeof n)t.push(n);else{if(!n.key)throw new Error("ComplexMessage children must have a key, or be a formatted message string with placeholders.");e[n.key]=n}});var n=t.reduce(function(t,n){return t.concat(n.split("\0||\0").map(function(t,n){return n%2==1?e[t]:t}))},[]);return a.default.createElement.apply(a.default,["span",this.props].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n)))}}],[{key:"placeholder",value:function(e){return"\0||\0"+e+"\0||\0"}}]),t}();t.default=s},655:function(e,t,n){(e.exports=n(137)(!1)).push([e.i,".ViewerControls{background-color:#556572;color:#fff;font-size:14px;line-height:24px;overflow-x:auto}@media (min-width:881px){.ViewerControls--with-annotations{height:48px}.SecondaryControls{top:48px}}@media (max-width:880px){.ViewerControls--with-annotations{height:98px}.SecondaryControls{top:98px}}.ViewerControls-primary{-ms-touch-action:none;touch-action:none;pointer-events:all;display:-webkit-box;display:-ms-flexbox;display:flex}.ViewerControls--download,.ViewerControls--title{-webkit-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;white-space:nowrap}.ViewerControls--current-page{-moz-appearance:textfield;margin-top:10px;border-radius:3px;border:0;height:28px;width:36px;background-color:#fff;color:#596c79;font-size:14px;text-align:center;vertical-align:top}.ViewerControls--current-page::-webkit-inner-spin-button,.ViewerControls--current-page::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.ViewerControls--page-controls{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;white-space:nowrap}",""])},656:function(e,t,n){var o=n(655);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(136)(o,r);o.locals&&(e.exports=o.locals)},657:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(656);var i=m(n(654)),a=m(n(400)),s=m(n(653)),l=m(n(51)),u=m(n(47)),c=m(n(492)),p=m(n(647)),f=m(n(640)),d=m(n(407)),h=m(n(630));n(406);function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t){return e>0&&e<=t}var v=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onPageChange=function(e){g(e,n.props.numPages)?(n.setState(function(t){return o({},t,{pageNumInputValue:e})}),n.props.onPageChange(e-1)):n.setState(function(e){return o({},e,{pageNumInputValue:n.props.currentPageNum})})},n.onInputChange=function(e){var t=e.target&&"string"==typeof e.target.value?parseInt(e.target.value,10):n.state.pageNumInputValue;n.setState(function(e){return o({},e,{pageNumInputValue:t})})},n.resetInputIfInvalid=function(){var e=n.props,t=e.currentPageNum,r=e.numPages;g(n.state.pageNumInputValue,r)||n.setState(function(e){return o({},e,{pageNumInputValue:t})})},n.onKeyPress=function(e){if("Enter"===e.key){var t=n.state.pageNumInputValue;n.onPageChange(t)}},n.nextPage=function(){var e=n.props.currentPageNum;n.onPageChange(e+1)},n.previousPage=function(){var e=n.props.currentPageNum;n.onPageChange(e-1)},n.state={pageNumInputValue:n.props.currentPageNum},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.PureComponent),r(t,[{key:"componentWillReceiveProps",value:function(e){e.currentPageNum!==this.state.pageNumInputValue&&this.setState(function(t){return o({},t,{pageNumInputValue:parseInt(e.currentPageNum,10)})})}},{key:"render",value:function(){var e=this.props,t=e.numPages,n=e.annotatedPdfUrl,o=e.generateMergedPdf,r=e.mergedPdfStatus,m=e.mergedPdfError,g=(e.isAnnotatable,(0,a.default)("ViewerControls",{"ViewerControls--with-annotations":this.props.isAnnotatable}));return u.default.createElement("nav",{className:g},u.default.createElement("div",{className:"ViewerControls-primary"},n?u.default.createElement("div",{className:"ViewerControls--download"},u.default.createElement(s.default,{annotatedPdfUrl:n,generateMergedPdf:o,mergedPdfStatus:r,mergedPdfError:m}),u.default.createElement(c.default,{style:{marginRight:"18px"}})):"",u.default.createElement("div",{className:"ViewerControls--title"}),t>1&&u.default.createElement("div",{className:"ViewerControls--page-controls"},u.default.createElement(i.default,{className:"ViewerControls--page-number",style:{display:"flex",alignItems:"center"}},(0,l.default)("Page {pageInput} of {totalPages, number}",{pageInput:i.default.placeholder("pageInput"),totalPages:t}),u.default.createElement("div",{key:"pageInput"},u.default.createElement("button",{disabled:1===this.props.currentPageNum,className:"AnnotationControlButton","aria-label":(0,l.default)("Previous Page"),title:(0,l.default)("Previous Page"),onClick:this.previousPage},u.default.createElement("div",{className:"AnnotationControlButton-outer"},u.default.createElement("div",{className:"AnnotationControlButton-inner"},u.default.createElement("svg",{viewBox:"0 0 2000 2000",height:"16",width:"16"},u.default.createElement("path",{d:"M1352.005.012l176.13 176.13L744.27 960.131l783.864 783.74L1352.005 1920 391.887 960.13z",fill:"#F5F5F5",fillRule:"evenodd"}))))),u.default.createElement("input",{"aria-label":(0,l.default)("Current Page Number"),className:"ViewerControls--current-page",value:this.state.pageNumInputValue,onBlur:this.resetInputIfInvalid,onChange:this.onInputChange,onKeyPress:this.onKeyPress,type:"number",min:"1",max:t,step:"1",disabled:1===t}),u.default.createElement("button",{disabled:this.props.currentPageNum===this.props.numPages,className:"AnnotationControlButton","aria-label":(0,l.default)("Next Page"),title:(0,l.default)("Next Page"),onClick:this.nextPage},u.default.createElement("div",{className:"AnnotationControlButton-outer"},u.default.createElement("div",{className:"AnnotationControlButton-inner"},u.default.createElement("svg",{viewBox:"0 0 2000 2000",height:"16",width:"16"},u.default.createElement("path",{d:"M568.13.012L392 176.142l783.864 783.989L392 1743.87 568.13 1920l960.118-959.87z",fill:"#F5F5F5",fillRule:"evenodd"}))))))),u.default.createElement(c.default,{style:{marginLeft:"16px",marginRight:"10px"}})),u.default.createElement(f.default,{currentPageScale:this.props.currentPageScale,isFullscreen:this.props.isFullscreen,onPageScale:this.props.onPageScale,toggleFullscreen:this.props.toggleFullscreen}),u.default.createElement(h.default,{query:"(min-width: 881px)"},u.default.createElement(p.default,{isAnnotatable:this.props.isAnnotatable,controlMode:this.props.controlMode,onChange:this.props.onControlModeChange}))),u.default.createElement(h.default,{query:"(max-width: 880px)"},this.props.isAnnotatable&&u.default.createElement("div",null,u.default.createElement("hr",{style:{margin:0},"aria-hidden":!0}),u.default.createElement("div",{className:"ViewerControls-primary-overflow",style:{float:"right"}},u.default.createElement(p.default,{isAnnotatable:this.props.isAnnotatable,controlMode:this.props.controlMode,onChange:this.props.onControlModeChange})))),!this.props.selectedAnnotationId&&u.default.createElement(d.default,{controlMode:this.props.controlMode,currentColor:this.props.currentColor,currentBgColor:this.props.currentBgColor,currentInkWidth:this.props.currentInkWidth,currentFont:this.props.currentFont,onCurrentColorChange:this.props.onCurrentColorChange,onCurrentBgColorChange:this.props.onCurrentBgColorChange,onCurrentInkStrokeWidthChange:this.props.onCurrentInkStrokeWidthChange,onCurrentTextSizeChange:this.props.onCurrentTextSizeChange}))}}]),t}();t.default=v},658:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=s(n(47)),i=s(n(51)),a=n(138);function s(e){return e&&e.__esModule?e:{default:e}}var l={freetext:(0,i.default)("free text"),highlight:(0,i.default)("highlight"),ink:(0,i.default)("drawing"),square:(0,i.default)("area"),strikeout:(0,i.default)("strikeout"),text:(0,i.default)("point")};function u(e){return e.created_at}function c(e){return!e.inreplyto}function p(e){return e.inreplyto}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.PureComponent),o(t,[{key:"render",value:function(){var e=this,t=Object.keys(this.props.annotationsByPage).map(function(t){var n=e.props.annotationsByPage[t].filter(u).filter(c).map(function(n){var o=function(e){return a.FRIENDLY_COLORS[e]?(0,i.default)(a.FRIENDLY_COLORS[e]):void 0}(n.color),s=e.props.annotationsByPage[t].filter(u).filter(p).filter(function(e){return n.id===e.inreplyto}).map(function(e){return r.default.createElement("li",{key:e.id},r.default.createElement("div",{className:"ScreenreaderAnnotation-author"},(0,i.default)("Author")," :",e.user_name),r.default.createElement("div",{className:"ScreenreaderAnnotation-createdat"},(0,i.default)("Created at { createdAt, time, short }",{createdAt:new Date(e.created_at)})),e.contents&&r.default.createElement("div",{className:"ScreenreaderAnnotation-root-comment"},(0,i.default)("Comment Reply")," :",e.contents))});return r.default.createElement("li",{key:n.id,className:"ScreenreaderAnnotation"},r.default.createElement("h4",null,(0,i.default)("Annotation of type { type }",{type:l[n.type]||n.type})),r.default.createElement("div",{className:"ScreenreaderAnnotation-author"},(0,i.default)("Author")," :",n.user_name),o&&r.default.createElement("div",{className:"ScreenreaderAnnotation-color"},(0,i.default)("Color")," :",o),r.default.createElement("div",{className:"ScreenreaderAnnotation-createdat"},(0,i.default)("Created at { createdAt, time, short }",{createdAt:new Date(n.created_at)})),n.contents&&r.default.createElement("div",{className:"ScreenreaderAnnotation-root-comment"},(0,i.default)("Comment")," :",n.contents),Boolean(s.length)&&r.default.createElement("div",{className:"ScreenreaderAnnotation-replies"},r.default.createElement("h5",null,(0,i.default)("Replies")),r.default.createElement("ol",null,s)))});return r.default.createElement("div",{key:t,className:"ScreenreaderAnnotations-page"},r.default.createElement("h3",null,(0,i.default)("Page { pageNumber, number }",{pageNumber:parseInt(t,10)+1})),r.default.createElement("ol",null,n))});return r.default.createElement("div",{className:"ScreenreaderAnnotations screenreader-only"},r.default.createElement("h2",null,(0,i.default)("Annotations")),t)}}]),t}();t.default=f},692:function(e,t,n){(t=e.exports=n(137)(!1)).push([e.i,"@import url(https://fonts.googleapis.com/css?family=Lato:400,\n  100,\n  100italic,\n  300,\n  300italic,\n  400italic,\n  700,\n  700italic,\n  900,\n  900italic);",""]),t.push([e.i,"body{background-color:#f2f2f2}button{border-radius:0}body,textarea{font-family:Lato,sans-serif}h1{font-size:inherit;font-weight:400}a{color:#008ee2;cursor:pointer;text-decoration:none}a:hover{text-decoration:underline}.selection-disabled{user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}#App{position:absolute;top:0;left:0;right:0;bottom:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.Pages{padding:32px;padding-top:48px;-webkit-box-flex:1;-ms-flex:1;flex:1;background-color:#f2f2f2;overflow:auto}.Page--not-rendered .textLayer div{background-color:#ccc}.inst-button{background-color:#f5f5f5;border-radius:3px;border:1px solid #dbdbdb;padding:6px;cursor:pointer;color:#394b58}.inst-button--flat{background-color:transparent;border-color:transparent}.inst-button:hover{background-color:#dbdbdb;border-color:#dbdbdb}.inst-button--flat:hover{background-color:transparent}.inst-button:focus{border-color:#38a7e8;outline:none}.inst-button:active{-webkit-box-shadow:inset 0 0 2px #000;box-shadow:inset 0 0 2px #000}.screenreader-only{position:absolute!important;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);width:1px;overflow:hidden;height:0}.DocViewer--error{border:1px solid red;background-color:#ffe4e1}",""])},693:function(e,t,n){var o=n(692);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(136)(o,r);o.locals&&(e.exports=o.locals)},694:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(693);var i=w(n(47)),a=w(n(691)),s=w(n(400)),l=w(n(508)),u=w(n(453)),c=w(n(51)),p=n(406),f=n(138),d=w(n(148)),h=w(n(658)),m=w(n(657)),g=w(n(629)),v=w(n(493)),y=w(n(481)),b=n(142);function w(e){return e&&e.__esModule?e:{default:e}}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var _=[],A=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.scheduleRepositionCommentGroups=function(){window.cancelAnimationFrame(n.repositionCommentGroupsRequest),n.repositionCommentGroupsRequest=window.requestAnimationFrame(n.repositionCommentGroups)},n.repositionCommentGroups=function(){if(!0!==window.location.hash.includes("manycomments"))if(n.div instanceof HTMLElement){var e=n.div,t=n.div.querySelector(".Annotation--selected .CommentGroup"),o=[].concat(C(e.querySelectorAll(".PageComponent"))).reduce(function(e,t){var n=[].concat(C(t.querySelectorAll(".CommentGroup")));if(0===n.length)return e;var o=t.getBoundingClientRect(),r=o.top,i=o.bottom;return e.concat(n.map(function(e){return{pageTop:r,pageBottom:i,div:e}}))},[]),r=o.filter(function(e){return e.div!==t}),i=o.find(function(e){return e.div===t})||null,a=(0,v.default)(r,[function(e){var t=e.pageTop;e.div;return t},function(e){e.pageTop;var t=e.div;return parseFloat(t.dataset.originalTop)}]);t instanceof HTMLElement&&null!==i&&(t.style.top=t.dataset.originalTop+"px"),a.reduce(function(e,n){var o=null===e,r=n.div,a=n.pageTop,s=a+parseFloat(r.dataset.originalTop);if(!1===o){var l=parseFloat(e.dataset.cumulativeOffsetBottom);l+f.MARGIN_BETWEEN_COMMENT_GROUPS>s&&(s=l+f.MARGIN_BETWEEN_COMMENT_GROUPS)}if(t instanceof HTMLElement&&null!=i){var u=i.pageTop+parseFloat(t.dataset.originalTop),c=u+t.clientHeight+f.MARGIN_BETWEEN_COMMENT_GROUPS,p=s+r.clientHeight+f.MARGIN_BETWEEN_COMMENT_GROUPS;(p>u&&p<c||s>=u&&s<=c||s<=u&&p>=c)&&(s=c+f.MARGIN_BETWEEN_COMMENT_GROUPS)}var d=s-a;return r.style.top=d+"px",r.dataset.cumulativeOffsetBottom=String((0,y.default)(s+r.clientHeight,2)),r},null)}else console.warn("<div> is not mounted in <PDFjsViewer>")},n.listenForFirstInteraction=function(){document.addEventListener("mousedown",n.handleFirstInteraction),document.addEventListener("keydown",n.handleFirstInteraction),document.addEventListener("touchstart",n.handleFirstInteraction),document.addEventListener("pointerdown",n.handleFirstInteraction);var e=document.querySelector(".Pages");null!=e&&e.addEventListener("scroll",n.handleFirstInteraction)},n.stopListeningToFirstInteraction=function(){document.removeEventListener("mousedown",n.handleFirstInteraction),document.removeEventListener("keydown",n.handleFirstInteraction),document.removeEventListener("touchstart",n.handleFirstInteraction),document.removeEventListener("pointerdown",n.handleFirstInteraction),document.querySelector(".Pages").removeEventListener("scroll",n.handleFirstInteraction)},n.handleFirstInteraction=function(){n.stopListeningToFirstInteraction(),window.DocViewer&&(0,b.sendMetric)(n.props.session.isAnnotatable?"annotatable_first_interaction":"readonly_first_interaction",Date.now()-window.DocViewer.start,n.props.sessionId),setTimeout(function(){n.scheduleRepositionCommentGroups()},2e3)},n.handleScaledPosition=function(e,t){if(n.pagesDiv instanceof HTMLElement){var o=e/t*n.pagesDiv.scrollTop;n.pagesDiv.scrollTop=o,setTimeout(function(){(o<n.pagesDiv.scrollTop-50||o>n.pagesDiv.scrollTop+50)&&(n.pagesDiv.scrollTop=o)},0)}},n.handleIsCommenting=function(e){var t=e.isCommenting;n.setState(function(e){return o({},e,{isCommenting:t})})},n.handleAnnotationCommentPresence=function(e,t){var r=e.data?e.data.filter(function(e){return e.contents&&"freetext"!==e.type}):_;n.setState(function(e){return o({},e,{displayCommentRegion:r.length>0||Boolean(t)})})},n.handleControlModeChange=function(e){n.state.controlMode!==e&&"selection"===e&&n.props.selectAnnotation(null),n.setState(function(t){return o({},t,{controlMode:e})})},n.handleCurrentColorChange=function(e,t){var r=o({},n.state.colors,E({},n.state.controlMode,e));n.setState({colors:r},function(){try{n.props.localStorage.setItem((t||n.state.controlMode)+"Color",e)}catch(e){console.info(e)}})},n.handleCurrentBgColorChange=function(e,t){var r=o({},n.state.bgColors,E({},t||n.state.controlMode,e));n.setState({bgColors:r},function(){try{n.props.localStorage.setItem((t||n.state.controlMode)+"BgColor",e)}catch(e){console.info(e)}})},n.handleCurrentTextSizeChange=function(e,t){n.setState({freetextFont:e},function(){try{n.props.localStorage.setItem((t||n.state.controlMode)+"Font",e)}catch(e){console.info(e)}})},n.handleCurrentInkStrokeWidthChange=function(e,t){n.setState({inkStrokeWidth:e},function(){try{n.props.localStorage.setItem((t||n.state.controlMode)+"StrokeWidth",e)}catch(e){console.info(e)}})},n.handleVisibilityChange=function(e,t){var r=Object.assign({},n.state.visiblePages,E({},String(e),t));n.setState(function(e){return o({},e,{visiblePages:r,currentPageNum:(0,p.getMostVisiblePage)(r)})})},n.handleWindowResize=function(e){if(n.props.isFullscreen||!1===n.isItSafeToHandleWindowResize)n.isItSafeToHandleWindowResize=!0;else{var t=n.props.document.viewport?n.props.document.viewport.width:0,o=(0,p.getPageWidthAfterScaling)(n.state.displayCommentRegion,t);if(document.body instanceof HTMLElement){var r=70+(window.innerWidth-document.body.offsetWidth),i=document.querySelector("#App");n.prevScrolltop=i.scrollTop,n.prevScale=n.props.currentPageScale,n.props.scalePageByRatio(window.innerWidth-r,o)}}},n.updateViewerPage=function(e){n.setState({currentPageNum:e},function(){return n.focusAndScrollToPage(e)})},n.focusAndScrollToPage=function(e){var t=document.querySelector("#page-"+e);if(t instanceof HTMLElement!=!1){var o=document.querySelector(".ViewerControls");if(o instanceof HTMLElement){var r=o.getBoundingClientRect().height;n.pagesDiv instanceof HTMLElement&&(n.pagesDiv.scrollTop=t.offsetTop-r-f.MARGIN_BETWEEN_PAGES)}}},n.setDivRef=function(e){e instanceof HTMLElement&&(n.div=e)},n.lastWindowInnerWidth=window.innerWidth,n.isItSafeToHandleWindowResize=!0,n.state={controlMode:"selection",colors:{point:n.props.localStorage.pointColor||f.DEFAULT_POINT_ANNOTATION_COLOR,highlight:n.props.localStorage.highlightColor||f.DEFAULT_HIGHLIGHT_ANNOTATION_COLOR,strikeout:n.props.localStorage.strikeoutColor||f.DEFAULT_STRIKEOUT_ANNOTATION_COLOR,ink:n.props.localStorage.inkColor||f.DEFAULT_INK_ANNOTATION_COLOR,area:n.props.localStorage.areaColor||f.DEFAULT_AREA_ANNOTATION_COLOR,freetext:n.props.localStorage.freetextColor||f.DEFAULT_FREETEXT_ANNOTATION_COLOR},bgColors:{freetext:n.props.localStorage.freetextBgColor||f.DEFAULT_FREETEXT_BACKGROUND_COLOR},freetextFont:n.props.localStorage.freetextFont||f.DEFAULT_FONT,currentPageNum:0,hasError:!1,isCommenting:!1,displayCommentRegion:!1,visiblePages:{},hasAnyPageLoadedSuccessfully:!1,inkStrokeWidth:parseInt(n.props.localStorage.inkStrokeWidth)||f.DEFAULT_INK_STROKE_WIDTH},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"componentDidCatch",value:function(e,t){this.setState(function(e){return o({},e,{hasError:!0})},function(){console.error("Error caught in PDFjsViewer",{error:e,info:t})})}},{key:"shouldComponentUpdate",value:function(e,t){return!1!==this.state.hasAnyPageLoadedSuccessfully||!1!==this.props.document.wasPageLoadedSuccessfully}},{key:"componentDidMount",value:function(){var e=this,t=document.querySelector(".Pages");t instanceof HTMLElement&&(this.pagesDiv=t),this.props.loadDocument(this.props.session.data.url),this.props.session.showAnnotations&&this.props.loadAnnotations(this.props.session.data.url),this.handleWindowResizeThrottled=(0,u.default)(this.handleWindowResize,100,{leading:!1}),this.handleAnnotationCommentPresence(this.props.annotations,this.state.isCommenting),window.addEventListener("resize",this.handleWindowResizeThrottled),setTimeout(function(){return e.scheduleRepositionCommentGroups()},200),setTimeout(function(){e.scheduleRepositionCommentGroups()},1e3),setTimeout(function(){e.scheduleRepositionCommentGroups()},2e3),this.listenForFirstInteraction()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWindowResizeThrottled)}},{key:"componentDidUpdate",value:function(e,t){var n=this;!this.state.hasAnyPageLoadedSuccessfully||t.displayCommentRegion===this.state.displayCommentRegion&&t.isCommenting===this.state.isCommenting||(this.handleAnnotationCommentPresence(this.props.annotations,this.state.isCommenting),this.handleWindowResizeThrottled());var o=this.props.document&&this.props.document.scale!==e.document.scale,r=this.props.isFullscreen!==e.isFullscreen;r&&!1===this.props.isFullscreen&&(this.isItSafeToHandleWindowResize=!1),(o||r)&&this.handleScaledPosition(this.props.document.scale,e.document.scale),o&&!1===r&&(this.isItSafeToHandleWindowResize=!1),setTimeout(function(){return n.scheduleRepositionCommentGroups()},5),setTimeout(function(){return n.scheduleRepositionCommentGroups()},3e3)}},{key:"componentWillReceiveProps",value:function(e){!this.state.hasAnyPageLoadedSuccessfully&&this.props.document.wasPageLoadedSuccessfully&&this.setState(function(e){return o({},e,{hasAnyPageLoadedSuccessfully:!0})}),this.handleAnnotationCommentPresence(e.annotations,this.state.isCommenting)}},{key:"render",value:function(){var e=this,t=this.props.document,n=t.documentLoadError,o=t.pageLoadError,r="selection"!==this.state.controlMode?this.state.colors[this.state.controlMode]:null,u=this.state.bgColors[this.state.controlMode],p=this.props.session.showAnnotations||this.props.session.isAnnotatable?{user_id:this.props.session&&this.props.session.userId,user_name:this.props.session&&this.props.session.session&&this.props.session.session.annotations&&this.props.session.session.annotations.user_name}:{},f=void 0,v=(0,l.default)(0,this.props.document.numPages);this.state.hasAnyPageLoadedSuccessfully&&(f=v.map(function(t){var n=e.props.annotations.stagedByPage[t]||_,o=Math.trunc(e.props.document.viewport.height),a=Math.trunc(e.props.document.viewport.width);return i.default.createElement(g.default,{annotations:n,controlMode:e.state.controlMode,currentBgColor:u,currentColor:r,currentFont:e.state.freetextFont,currentPageNum:e.state.currentPageNum+1,displayCommentRegion:e.state.displayCommentRegion,hoveredAnnotationId:e.props.annotations.hoveredAnnotationId,isAnnotatable:e.props.session.isAnnotatable,key:t,onCreateAnnotation:e.props.createAnnotation,onCurrentBgColorChange:e.handleCurrentBgColorChange,onCurrentColorChange:e.handleCurrentColorChange,onCurrentInkStrokeWidthChange:e.handleCurrentInkStrokeWidthChange,onCurrentTextSizeChange:e.handleCurrentTextSizeChange,onDeleteAnnotation:e.props.deleteAnnotation,onDeselectAnnotation:e.props.deselectAnnotation,onHoverAnnotation:e.props.hoverAnnotation,onIsCommentingChange:e.handleIsCommenting,onPageResize:e.handleWindowResizeThrottled,onSelectAnnotation:e.props.selectAnnotation,onUpdateAnnotation:e.props.updateAnnotation,onVisibilityChange:e.handleVisibilityChange,pageNumber:t,pdfDocument:e.props.document.pdfDocument,selectedAnnotationId:e.props.annotations.selectedAnnotationId,sessionId:e.props.sessionId,sessionUserObject:p,strokeWidth:"ink"===e.state.controlMode?e.state.inkStrokeWidth:2,viewportHeight:o,viewportScale:e.props.document.viewport.scale,viewportWidth:a})}));var y=(0,s.default)("Pages",{"Pages-annotatable":this.props.session.isAnnotatable});return(0,a.default)({meta:i.default.createElement("div",{hidden:!0,"aria-hidden":!0},"Locale: "+this.props.locale),screenreaderOnly:i.default.createElement("h1",{className:"screenreader-only"},(0,c.default)("DocViewer")),viewerControls:i.default.createElement(m.default,{annotatedPdfUrl:this.props.session.data.annotatedPdfUrl,controlMode:this.state.controlMode,currentBgColor:u,currentColor:r,currentFont:this.state.freetextFont,currentInkWidth:this.state.inkStrokeWidth,currentPageNum:this.state.currentPageNum+1,currentPageScale:this.props.document.scale,documentId:this.props.session.documentId,generateMergedPdf:this.props.generateMergedPdf,isAnnotatable:this.props.session.isAnnotatable,isFullscreen:this.props.isFullscreen,mergedPdfError:this.props.annotations.error,mergedPdfStatus:this.props.annotations.mergedPdfStatus,numPages:this.props.document.numPages,onControlModeChange:this.handleControlModeChange,onCurrentBgColorChange:this.handleCurrentBgColorChange,onCurrentColorChange:this.handleCurrentColorChange,onCurrentInkStrokeWidthChange:this.handleCurrentInkStrokeWidthChange,onCurrentTextSizeChange:this.handleCurrentTextSizeChange,onPageChange:this.updateViewerPage,onPageScale:this.props.scalePage,selectedAnnotationId:this.props.annotations.selectedAnnotationId,toggleFullscreen:this.props.toggleFullscreen}),pages:i.default.createElement("div",{className:y,ref:this.setDivRef},i.default.createElement("h2",{className:"screenreader-only"},(0,c.default)("Pages")),!1===this.state.hasAnyPageLoadedSuccessfully&&null==n&&i.default.createElement(d.default,null),n&&i.default.createElement("div",null,(0,c.default)("Error loading document")),o&&i.default.createElement("div",null,(0,c.default)("Error loading page")),f,i.default.createElement(h.default,{annotationsByPage:this.props.annotations.stagedByPage}))})}}]),t}();t.default=A},695:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={setItem:function(e,t){o[e]=t},getItem:function(e){return o[e]}};try{o=window.localStorage||window.sessionStorage||{}}catch(e){console.info&&console.info("Unable to access localStorage")}t.default=o},702:function(e,t){},703:function(e,t){},704:function(e,t){},725:function(e,t){},730:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadDocument=function(e){return function(t,n){t({type:o.GET_DOCUMENT_PENDING}),r.PDFJS.getDocument(e).then(function(n){t({type:o.GET_DOCUMENT_SUCCESS,documentId:e,pdfDocument:n})}).then(function(){i(t,n)}).catch(function(e){console.log("GET_DOCUMENT_ERROR",e),t({type:o.GET_DOCUMENT_ERROR,error:e})})}},t.loadPage=i,t.loadTextLayer=a,t.scalePageByRatio=function(e,t){if("number"!=typeof e)throw new Error("expected browserWidth to be a number");if("number"!=typeof t)throw new Error("expected pageWidth to be a number");var n=1/(t/e);return function(e,t){e({type:o.SET_SCALE,scaleRatio:n}),setTimeout(function(){var n=t().document.pdfDocument;n&&n.getPage&&i(e,t)},15)}},t.scalePage=function(e){return function(t,n){t({type:o.SCALE_PAGE,scaleModifier:e}),i(t,n)}};var o=n(522),r=n(433);function i(e,t){e({type:o.GET_PAGE_PENDING}),t().document.pdfDocument.getPage(1).then(function(n){e({type:o.GET_PAGE_SUCCESS,page:n}),a(e,t)}).catch(function(t){console.log("GET_PAGE_ERROR",t),e({type:o.GET_PAGE_ERROR,error:t})})}function a(e,t){e({type:o.GET_TEXT_CONTENT_PENDING}),t().document.page.getTextContent({normalizeWhitespace:!0}).then(function(t){e({type:o.GET_TEXT_CONTENT_SUCCESS,textContent:t})}).catch(function(t){console.log("GET_TEXT_CONTENT_ERROR",t),e({type:o.GET_TEXT_CONTENT_ERROR,error:t})})}r.PDFJS.workerSrc=window.DocViewer&&window.DocViewer.pdfjsWorker?window.DocViewer.pdfjsWorker:"/vendor/pdfjs-dist/pdf.worker.min.js"},734:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pollUntilReady=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,a=Date.now()+t;return i({url:e,endTime:a,intervalMs:n,timeoutMs:t})};var o=3e4,r=1e3,i=function e(t){var n=t.url,o=t.endTime,r=t.intervalMs,i=t.timeoutMs;return new Promise(function(t,a){Date.now()<o?function(e){return new Promise(function(t,n){fetch(e).then(function(e){t(200===e.status)}).catch(function(){t(!1)})})}(n).then(function(s){s?t():setTimeout(function(){e({url:n,endTime:o,intervalMs:r,timeoutMs:i}).then(function(){return t()}).catch(function(e){return a(e)})},r)}):a(new Error("Timeout of "+i+" ms reached"))})}},735:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.selectAnnotation=function(e){return function(t){t({type:r.SELECT_ANNOTATION,annotationId:e})}},t.deselectAnnotation=function(e){return function(t){t({type:r.DESELECT_ANNOTATION,annotationId:e})}},t.hoverAnnotation=function(e){return function(t){t({type:r.HOVER_ANNOTATION,annotationId:e})}},t.createAnnotation=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=(0,a.transformAnnotationSave)(e,t,n);return function(e,t){var a=["freetext"].includes(n.type),s=!i.contents&&a;if(!s&&!o)return e({type:r.CREATE_ANNOTATION_PENDING,annotation:i}),fetch(f+"/annotations/"+n.id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(function(e){if(e.ok)return e.json();throw new Error("error when creating annotation")}).then(function(t){e({type:r.CREATE_ANNOTATION_SUCCESS,annotation:t}),["ink","strikeout","highlight"].includes(t.type)&&document.querySelector("#Annotation-"+t.id+" .Comment-create").focus()}).catch(function(t){throw"commentReply"===i.type?window.alert((0,l.default)("There was an error saving this comment.")):window.alert((0,l.default)("There was an error saving this annotation.")),e({type:r.CREATE_ANNOTATION_ERROR,annotation:i,error:t}),console.error(t),t});e({type:r.STAGE_ANNOTATION,annotation:i})}},t.updateAnnotation=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=(0,a.transformAnnotationSave)(e,t,n);return function(e,t){var a=["freetext"].includes(n.type),s=!i.contents&&a;if(!s&&!o)return e({type:r.UPDATE_ANNOTATION_PENDING,annotation:i}),fetch(f+"/annotations/"+n.id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(function(t){if(!t.ok)throw new Error("Error updating annotation");e({type:r.UPDATE_ANNOTATION_SUCCESS,annotation:i})}).catch(function(t){throw e({type:r.UPDATE_ANNOTATION_ERROR,annotation:i,error:t}),"commentReply"===i.type?window.alert((0,l.default)("There was an error saving this comment.")):window.alert((0,l.default)("There was an error saving this annotation.")),console.error(t),t});e({type:r.STAGE_ANNOTATION,annotation:i})}},t.deleteAnnotation=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(i,a){var s=a(),u=s.annotations&&s.annotations.data&&s.annotations.data.find(function(e){return e.id===t}),c=n?r.DELETE_ROOT_COMMENT_SUCCESS:r.DELETE_ANNOTATION_SUCCESS,f=n?s.annotations.stagedByPage[e].find(function(e){return e.id===t}).inreplyto:null,d={type:c,annotationId:t,annotationPage:e};if(n&&(d=o({},d,{baseAnnotationId:f})),!u)return i(d);fetch(p+"/annotations/"+t,{method:"DELETE"}).then(function(e){if(e.ok)return i(d);throw new Error("Error deleting annotation")}).catch(function(e){window.alert((0,l.default)("There was an error. It was not deleted.")),i({type:r.DELETE_ANNOTATION_ERROR,error:e})})}},t.loadAnnotations=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(e,t){e({type:r.GET_ANNOTATIONS_PENDING}),fetch(f+"/annotations",{headers:{"Cache-control":"no-cache",Pragma:"no-cache",Expires:0}}).then(function(e){if(e.ok)return e.json();throw new Error("Error fetching annotations")}).then(function(t){e({type:r.GET_ANNOTATIONS_SUCCESSFUL,response:t})}).catch(function(t){e({type:r.GET_ANNOTATIONS_ERROR,error:t})})}},t.generateMergedPdf=function(e){return function(e,t){e({type:r.GENERATE_MERGED_PDF_PENDING});var n=p+"/annotated.pdf";fetch(n,{method:"POST"}).then(function(e){return 202===e.status?Promise.resolve():Promise.reject(new Error("Error kicking off merged pdf process"))}).then(function(){return e({type:r.GENERATE_MERGED_PDF_SUCCESSFUL}),Promise.resolve()}).then(function(){return(0,i.pollUntilReady)(p+"/annotated.pdf/is_ready")}).then(function(){e({type:r.GENERATE_MERGED_PDF_DONE}),window.location=n}).catch(function(t){window.alert((0,l.default)("Something went wrong generating the annotated PDF. Please try again later.")),e({type:r.GENERATE_MERGED_PDF_ERROR,error:t})})}};var r=n(523),i=n(734),a=n(403),s=n(144),l=u(n(51));u(n(535));function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,s.sessionIdFromPath)(window.location.pathname),p="/1/sessions/"+c,f="/2018-03-07/sessions/"+c},736:function(e,t,n){"use strict";var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=n(522),i=n(138),a={isDocumentLoading:!1,wasDocumentLoadedSuccessfully:!1,documentLoadError:null,documentId:null,pdfDocument:null,isPageLoading:!1,wasPageLoadedSuccessfully:!1,pageLoadError:null,page:null,isTextLayerLoading:!1,wasTextLayerLoadedSuccessfully:!1,textContentLoadError:null,textContent:null,scale:i.DEFAULT_SCALE,numPages:0,rotate:0};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments[1];switch(t.type){case r.GET_DOCUMENT_SUCCESS:var n=t.pdfDocument,s=t.documentId;return o({},e,{isDocumentLoading:!1,wasDocumentLoadedSuccessfully:!0,documentLoadError:null,documentId:s,pdfDocument:n,numPages:n.pdfInfo.numPages});case r.SET_SCALE:var l=t.scaleRatio*e.scale;return l===e.scale?e:l>i.DEFAULT_SCALE&&e.scale===i.DEFAULT_SCALE?o({},e,{viewport:e.page&&e.page.getViewport(e.scale)}):(l>i.DEFAULT_SCALE?l=i.DEFAULT_SCALE:l<i.MIN_SCALE&&(l=i.MIN_SCALE),o({},e,{scale:l,viewport:e.page&&e.page.getViewport(e.scale)}));case r.SCALE_PAGE:var u=function(e,t){var n=Math.round(100*(e+t))/100;return n>=i.MIN_SCALE&&n<=i.MAX_SCALE?n:e}(e.scale,t.scaleModifier);return u===e.scale?e:o({},e,{scale:u,viewport:e.page&&e.page.getViewport(e.scale)});case r.GET_DOCUMENT_PENDING:return o({},e,{isDocumentLoading:!0,wasDocumentLoadedSuccessfully:!1,documentLoadError:null,pdfDocument:null});case r.GET_DOCUMENT_ERROR:return o({},e,{isDocumentLoading:!1,wasDocumentLoadedSuccessfully:!1,documentLoadError:t.error,pdfDocument:null});case r.GET_PAGE_PENDING:return o({},e,{isPageLoading:!0,wasPageLoadedSuccessfully:!1,pageLoadError:null,page:null});case r.GET_PAGE_SUCCESS:var c=t.page.getViewport(e.scale);return o({},e,{isPageLoading:!1,wasPageLoadedSuccessfully:!0,pageLoadError:null,page:t.page,viewport:c});case r.GET_PAGE_ERROR:return o({},e,{isPageLoading:!1,wasPageLoadedSuccessfully:!1,pageLoadError:t.error,page:null});case r.GET_TEXT_CONTENT_PENDING:return o({},e,{isTextLayerLoading:!0,wasTextLayerLoadedSuccessfully:!1,textContentLoadError:null,textContent:null});case r.GET_TEXT_CONTENT_SUCCESS:return o({},e,{isTextLayerLoading:!1,wasTextLayerLoadedSuccessfully:!0,textContentLoadError:null,textContent:t.textContent});case r.GET_TEXT_CONTENT_ERROR:return o({},e,{isTextLayerLoading:!1,wasTextLayerLoadedSuccessfully:!1,textContentLoadError:t.error,textContent:null});default:return e}}},836:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments[1];switch(t.type){case a.SELECT_ANNOTATION:return o({},e,{selectedAnnotationId:t.annotationId});case a.DESELECT_ANNOTATION:var n=e.selectedAnnotationId===t.annotationId?null:e.selectedAnnotationId;return o({},e,{selectedAnnotationId:n});case a.HOVER_ANNOTATION:return o({},e,{hoveredAnnotationId:t.annotationId});case a.GET_ANNOTATIONS_PENDING:return o({},e,{isLoading:!0,wasLoadSuccessful:!1,error:null});case a.GET_ANNOTATIONS_SUCCESSFUL:var s=t.response.data,c=o({},e,{data:s,stagedByPage:(0,r.default)(s,function(e){return e.page}),isLoading:!1,wasLoadSuccessful:!0,error:null}),p=(0,i.default)(c,["lastVerifiedState"]);return o({},c,{lastVerifiedState:p});case a.GET_ANNOTATIONS_ERROR:return o({},e,{isLoading:!1,wasLoadSuccessful:!1,error:t.error});case a.DELETE_ANNOTATION_SUCCESS:var f=Object.assign({},e.stagedByPage,l({},t.annotationPage,(e.stagedByPage[t.annotationPage]||[]).filter(function(e){return e.id!==t.annotationId})));return o({},e,{stagedByPage:f,data:e.data.filter(function(e){return e.id!==t.annotationId}),selectedAnnotationId:e.selectedAnnotationId===t.annotationId?null:e.selectedAnnotationId,hoveredAnnotationId:null});case a.DELETE_ROOT_COMMENT_SUCCESS:var d=Object.assign({},e.stagedByPage,l({},t.annotationPage,(e.stagedByPage[t.annotationPage]||[]).filter(function(e){return e.inreplyto!==t.baseAnnotationId})));return o({},e,{stagedByPage:d,data:e.data.filter(function(e){return e.inreplyto!==t.baseAnnotationId}),selectedAnnotationId:e.selectedAnnotationId===t.annotationId?null:e.selectedAnnotationId,hoveredAnnotationId:null});case a.CREATE_ANNOTATION_PENDING:var h=(e.stagedByPage[t.annotation.page]||[]).findIndex(function(e){return e.id===t.annotation.id}),m=e.stagedByPage[t.annotation.page]||[],g=Object.assign({},e.stagedByPage,l({},t.annotation.page,m.slice(0,-1===h?m.length:h).concat(t.annotation).concat(-1===h?[]:m.slice(h+1))));return o({},e,{stagedByPage:g,hoveredAnnotationId:null,selectedAnnotationId:t.annotation.inreplyto||t.annotation.id});case a.UPDATE_ANNOTATION_PENDING:var v=(e.stagedByPage[t.annotation.page]||[]).findIndex(function(e){return e.id===t.annotation.id}),y=e.stagedByPage[t.annotation.page]||[],b=Object.assign({},e.stagedByPage,l({},t.annotation.page,y.slice(0,-1===v?y.length:v).concat(t.annotation).concat(-1===v?[]:y.slice(v+1))));return o({},e,{stagedByPage:b});case a.CREATE_ANNOTATION_SUCCESS:var w=e.stagedByPage[t.annotation.page]||[],E=Object.assign({},e.stagedByPage,l({},t.annotation.page,w.filter(function(e){return e.id!==t.annotation.id}).concat(t.annotation))),C=o({},e,{data:e.data.concat(t.annotation),stagedByPage:E}),_=(0,i.default)(C,["lastVerifiedState"]);return o({},C,{lastVerifiedState:_});case a.CREATE_ANNOTATION_ERROR:var A=e.stagedByPage[t.annotation.page]||[],O=Object.assign({},e.stagedByPage,l({},t.annotation.page,A.filter(function(e){return e.id!==t.annotation.id})));return o({},e,{stagedByPage:O,data:e.data.filter(function(e){return e.id!==t.annotation.id}),selectedAnnotationId:e.selectedAnnotationId===t.annotation.id?null:e.selectedAnnotationId,hoveredAnnotationId:null});case a.UPDATE_ANNOTATION_SUCCESS:var S=o({},e,{data:e.data.filter(function(e){return e.id!==t.annotation.id}).concat(t.annotation)}),x=(0,i.default)(S,["lastVerifiedState"]);return o({},S,{lastVerifiedState:x});case a.UPDATE_ANNOTATION_ERROR:return o({},e.lastVerifiedState,{lastVerifiedState:e.lastVerifiedState});case a.STAGE_ANNOTATION:var T=(e.stagedByPage[t.annotation.page]||[]).findIndex(function(e){return e.id===t.annotation.id}),P=e.stagedByPage[t.annotation.page]||[],k=Object.assign({},e.stagedByPage,l({},t.annotation.page,P.slice(0,-1===T?P.length:T).concat(t.annotation).concat(-1===T?[]:P.slice(T+1))));return o({},e,{selectedAnnotationId:t.annotation.id,stagedByPage:k});case a.GENERATE_MERGED_PDF_PENDING:return o({},e,{mergedPdfStatus:"Waiting"});case a.GENERATE_MERGED_PDF_ERROR:case a.MERGED_PDF_TIMED_OUT:return o({},e,{mergedPdfStatus:"Error",error:t.error});case a.GENERATE_MERGED_PDF_DONE:return o({},e,{mergedPdfStatus:"Done"});default:return e}};var r=s(n(835)),i=s(n(535)),a=n(523);function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u={data:[],stagedByPage:{},isLoading:!1,selectedAnnotationId:null,hoveredAnnotationId:null,wasLoadSuccessful:!1,error:null,isEditingAnnotation:!1,currentAnnotationType:null,mergedPdfStatus:"None"}},837:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(476),r=s(n(836)),i=s(n(737)),a=s(n(736));function s(e){return e&&e.__esModule?e:{default:e}}var l=(0,o.combineReducers)({annotations:r.default,document:a.default});t.default=(0,o.createStore)(l,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),(0,o.compose)((0,o.applyMiddleware)(i.default)))},844:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=a(n(47)),i=a(n(559));function a(e){return e&&e.__esModule?e:{default:e}}var s=i.default.enabled&&i.default.on,l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleFullscreen=function(){var e=s&&!1===i.default.isFullscreen;n.setState({isFullscreen:e},function(){var e=document.querySelector("#App");e instanceof HTMLElement&&s&&i.default.toggle(e)})},n.onFullscreenChange=function(){n.setState({isFullscreen:s&&i.default.isFullscreen})},n.state={isFullscreen:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"componentDidMount",value:function(){s&&i.default.on("change",this.onFullscreenChange)}},{key:"componentWillUnmount",value:function(){s&&i.default.off("change",this.onFullscreenChange)}},{key:"render",value:function(){return this.props.render(this.state.isFullscreen,this.toggleFullscreen)}}]),t}();t.default=l}}]);
//# sourceMappingURL=6.3e1de8650111e04d9802.bundle.js.map